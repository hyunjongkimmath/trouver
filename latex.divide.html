<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Divide LaTeX files into parts">

<title>latex.divide – trouver</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ebc57992554dae5230fa85c1bd5a55fa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="latex.divide – trouver">
<meta property="og:description" content="Divide LaTeX files into parts">
<meta property="og:site_name" content="trouver">
<meta name="twitter:title" content="latex.divide – trouver">
<meta name="twitter:description" content="Divide LaTeX files into parts">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">trouver</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./latex.divide.html">latex.divide</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">trouver</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.vault.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.vault</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.markdown.file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.markdown.file</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.markdown.heading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.markdown.heading</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.links</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.tags.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.tags</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.footnotes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.footnotes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.reference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obisidian.personal.authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.authors</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.index_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.index_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.note_type.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.note_type</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.convert.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.convert</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.notations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.note_processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.note_processing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.information_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.information_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learninig.database_update.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.database_update</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.information_note_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.information_note_types</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notation_identification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.notation_identification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notation_summarization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.notation_summarization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.tokenize.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.tokenize</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.vault.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.vault</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.divide.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">latex.divide</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.folders</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.formatting</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.preamble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.preamble</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.comments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex.comments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.machine_learning.notation_linking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.notation_linking</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.definition_and_notation_naming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.definition_and_notation_naming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.tests</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.regex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.definition_and_notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.definition_and_notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.numbers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./41_helper.accented_characters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">41_helper.accented_characters.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.date_and_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.date_and_time</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./43_helper.topological_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topological sort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./44_helper.alphabet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alphabet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.path_accepted_string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.path_accepted_string</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./46_helper.files_and_folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Files and folders</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.macros_and_commands.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex.macros_and_commands</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.arxiv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.arxiv</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.vault_and_links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.vault_and_links</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.parse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.notation.parse</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.in_standard_information_note.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.notation.in_standard_information_note</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.note_division.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.note_division</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>app.__init__</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./todo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TODO list</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_to.install_trouver.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">how_to.install_trouver</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_to.train_ml_model.fastai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">how_to.train_ml_model.fastai</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">release_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./star.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.concise_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tutorial.concise_code</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.walkthrough.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tutorial.walkthrough</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./unused.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using_regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Regex</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#divide-latex-file-into-parts" id="toc-divide-latex-file-into-parts" class="nav-link active" data-scroll-target="#divide-latex-file-into-parts">Divide LaTeX file into parts</a>
  <ul class="collapse">
  <li><a href="#nodocumentnodeerror" id="toc-nodocumentnodeerror" class="nav-link" data-scroll-target="#nodocumentnodeerror">NoDocumentNodeError</a></li>
  <li><a href="#find_document_node" id="toc-find_document_node" class="nav-link" data-scroll-target="#find_document_node">find_document_node</a></li>
  <li><a href="#detect-environment-names-used-in-a-file" id="toc-detect-environment-names-used-in-a-file" class="nav-link" data-scroll-target="#detect-environment-names-used-in-a-file">Detect environment names used in a file</a></li>
  <li><a href="#environment_names_used" id="toc-environment_names_used" class="nav-link" data-scroll-target="#environment_names_used">environment_names_used</a></li>
  <li><a href="#numbered_newtheorems_counters_in_preamble" id="toc-numbered_newtheorems_counters_in_preamble" class="nav-link" data-scroll-target="#numbered_newtheorems_counters_in_preamble">numbered_newtheorems_counters_in_preamble</a></li>
  <li><a href="#numberwithins_in_preamble" id="toc-numberwithins_in_preamble" class="nav-link" data-scroll-target="#numberwithins_in_preamble">numberwithins_in_preamble</a></li>
  <li><a href="#display_names_of_environments" id="toc-display_names_of_environments" class="nav-link" data-scroll-target="#display_names_of_environments">display_names_of_environments</a></li>
  <li><a href="#divide-latex-text-into-parts" id="toc-divide-latex-text-into-parts" class="nav-link" data-scroll-target="#divide-latex-text-into-parts">Divide latex text into parts</a></li>
  <li><a href="#text_from_node" id="toc-text_from_node" class="nav-link" data-scroll-target="#text_from_node">text_from_node</a></li>
  <li><a href="#get_node_from_simple_text" id="toc-get_node_from_simple_text" class="nav-link" data-scroll-target="#get_node_from_simple_text">get_node_from_simple_text</a></li>
  <li><a href="#swap_numbers_invoked" id="toc-swap_numbers_invoked" class="nav-link" data-scroll-target="#swap_numbers_invoked">swap_numbers_invoked</a></li>
  <li><a href="#divide_latex_text" id="toc-divide_latex_text" class="nav-link" data-scroll-target="#divide_latex_text">divide_latex_text</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hyunjongkimmath/trouver/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">latex.divide</h1>
</div>

<div>
  <div class="description">
    Divide LaTeX files into parts
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div id="cell-2" class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore.test <span class="im">import</span> ExceptionExpected, test_eq</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.helper.tests <span class="im">import</span> _test_directory<span class="co"># , non_utf8_chars_in_file</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="divide-latex-file-into-parts" class="level2">
<h2 class="anchored" data-anchor-id="divide-latex-file-into-parts">Divide LaTeX file into parts</h2>
<p>To make Obsidian notes from a LaTeX file, I use sections/subsections, and environments as places to make new notes.</p>
<p>Things to think about: Sections/subsections environments, including theorems, corollaries, propositions, lemmas, definitions, notations citations Macros defined in the preamble?</p>
<p>LatexMacroNodes include: sections/subsections, citations, references, and labels, e.g.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>&gt; <span class="kw">\section</span>{Introduction}</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">\cite</span>{<span class="ex">ellenberg2nilpotent</span>}</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\subsection</span>{The section conjecture}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">\'</span>e</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">\ref</span>{<span class="ex">fundamental-exact-sequence</span>}</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\cite</span>{<span class="ex">stix2010period</span>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">\ref</span>{<span class="ex">fundamental-exact-sequence</span>}</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="kw">\cite</span>{<span class="ex">stix2012rational</span>}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="kw">\cite</span>[Appendix C]{<span class="ex">stix2010period</span>}</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="kw">\subsection</span>{The tropical section conjecture}</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="kw">\label</span>{<span class="ex">subsec:tropical-section-conjecture</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="get-the-document-node" class="level4">
<h4 class="anchored" data-anchor-id="get-the-document-node">Get the Document Node</h4>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L95" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="nodocumentnodeerror" class="level3">
<h3 class="anchored" data-anchor-id="nodocumentnodeerror">NoDocumentNodeError</h3>
<blockquote class="blockquote">
<pre><code> NoDocumentNodeError (text)</code></pre>
</blockquote>
<p>*Exception raised when a LatexEnvironmentNode corresponding to the document environment is expected in a LaTeX string, but no such node exists.</p>
<p><strong>Attributes</strong> - text - str - The text in which the document environment is not found.*</p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L112" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="find_document_node" class="level3">
<h3 class="anchored" data-anchor-id="find_document_node">find_document_node</h3>
<blockquote class="blockquote">
<pre><code> find_document_node (text:str, document_environment_name:str='document')</code></pre>
</blockquote>
<p>*Find the <code>LatexNode</code> object for the main document in <code>text</code>.</p>
<p><strong>Raises</strong> - NoDocumentNodeError - If document environment node is not detected.*</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>text</td>
<td>str</td>
<td></td>
<td>LaTeX str</td>
</tr>
<tr class="even">
<td>document_environment_name</td>
<td>str</td>
<td>document</td>
<td>The name of the document environment.</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>LatexEnvironmentNode</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The main content of virtually all LaTeX math articles belongs to a document environment, which pylatexenc can often detect. The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#find_document_node"><code>find_document_node</code></a> function returns this <code>LatexEnvironmentNode</code> object:</p>
<div id="cell-10" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>latex_file_path <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'latex_example_1'</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(latex_file_path)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>document_node <span class="op">=</span> find_document_node(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If the LaTeX file has no <code>document</code> environment, then a <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#nodocumentnodeerror"><code>NoDocumentNodeError</code></a> is raised:</p>
<div id="cell-12" class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This latex document has its `document` environment commented out.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>latex_file_path <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'latex_example_2'</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(latex_file_path)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> ExceptionExpected(NoDocumentNodeError):</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    document_node <span class="op">=</span> find_document_node(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>At the time of this writinga <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#nodocumentnodeerror"><code>NoDocumentNodeError</code></a> may be raised even if the LaTeX file has a proper <code>document</code> environment</p>
<div id="cell-14" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>latex_file_path <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'example_with_a_command_with_begin.tex'</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(latex_file_path)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perhaps in the future, pylatexenc will be able to find the document node for this file.</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># When that time comes, delete this example.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> ExceptionExpected(NoDocumentNodeError):</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    find_document_node(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.preamble.html#divide_preamble"><code>divide_preamble</code></a> function can be used to circumvent this problem:</p>
<div id="cell-16" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(text)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>document_node <span class="op">=</span> find_document_node(document)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>test_eq(document_node.environmentname, <span class="st">'document'</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> document_node.isNodeType(LatexEnvironmentNode)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-17" class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># hide</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Find no document node error causes</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># latex_file_path = r'_tests\latex_full\litt_cfag\main.tex'</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># text = text_from_file(latex_file_path)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># document_node = find_document_node(text)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="detect-environment-names-used-in-a-file" class="level3">
<h3 class="anchored" data-anchor-id="detect-environment-names-used-in-a-file">Detect environment names used in a file</h3>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L131" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="environment_names_used" class="level3">
<h3 class="anchored" data-anchor-id="environment_names_used">environment_names_used</h3>
<blockquote class="blockquote">
<pre><code> environment_names_used (text:str)</code></pre>
</blockquote>
<p><em>Return the set of all environment names used in the main document of the latex code.</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>text</td>
<td>str</td>
<td>LaTeX document</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>set</strong></td>
<td><strong>The set of all environment names used in the main document.</strong></td>
</tr>
</tbody>
</table>
<p>Writers often use different environment names. For examples, writers often use <code>theorem</code>, <code>thm</code>, or <code>theo</code> for theorem environments or <code>lemma</code> or <code>lem</code> for lemma environments. The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#environment_names_used"><code>environment_names_used</code></a> function returns the environment names actually used in the tex file.</p>
<p>In the example below, note that only the environments that are actually used are returned. For instance, the preamble of the document defines the theorem environments <code>problem</code>, and <code>lemma</code> (among other things), but these are not actually used in the document itself.</p>
<div id="cell-22" class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>latex_file_path <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'has_fully_written_out_environment_names.tex'</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>sample_text_1 <span class="op">=</span> text_from_file(latex_file_path)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>sample_output_1 <span class="op">=</span> environment_names_used(sample_text_1)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>test_eq({<span class="st">'corollary'</span>, <span class="st">'proof'</span>, <span class="st">'maincorollary'</span>, <span class="st">'abstract'</span>, <span class="st">'proposition'</span>}, sample_output_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The document in the example below uses shorter names for theorem environments:</p>
<div id="cell-24" class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>latex_file_path <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'has_shorter_environment_names.tex'</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>sample_text_2 <span class="op">=</span> text_from_file(latex_file_path)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>sample_output_2 <span class="op">=</span> environment_names_used(sample_text_2)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>test_eq({<span class="st">'conj'</span>, <span class="st">'notation'</span>, <span class="st">'corollary'</span>, <span class="st">'defn'</span>}, sample_output_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="identify-the-numbering-convention-of-a-latex-document" class="level4">
<h4 class="anchored" data-anchor-id="identify-the-numbering-convention-of-a-latex-document">Identify the numbering convention of a LaTeX document</h4>
<p>LaTeX documents have various number conventions. Here are some examples of papers on the arXiv and notes on their numbering schemes. Note that the source code to these articles are publicly available on the arXiv.</p>
<ul>
<li>Ellenberg, Venkatesh, and Westerland, <em><a href="https://arxiv.org/abs/0912.0325">Homological stability for Hurwitz spaces and the Cohen-Lenstra conjecture over function fields</a></em>,
<ul>
<li><p>The subsections and theorem-like environments of each section share a numbering scheme, e.g.&nbsp;section 1 has subsection <code>1.1 The Cohen-Lenstra heuristics</code>, <code>1.2 Theorem</code>, <code>1.3 Hurwitz spaces</code>. This is accomplished by defining theorem-like environments using the <code>subsection</code> counter, e.g.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\theoremstyle</span>{plain}</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\newtheorem</span>{thm}[subsection]{Theorem}</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\newtheorem</span>{prop}[subsection]{Proposition}</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">\newtheorem</span>{cor}[subsection]{Corollary}</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">\newtheorem</span>{remark}{Remark}</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">\newtheorem</span>{conj}[subsection]{Conjecture}</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">\newtheorem*</span>{conj*}{Conjecture}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>defines the <code>thm</code>, <code>prop</code>, <code>cor</code>, and <code>conj</code> environments to be numbered using the <code>subsection</code> counter, the <code>remark</code> environmment to be defiend as an unnumbered environment, and the <code>conj*</code> environment to be defined as an unnumbered environment with a different name than the <code>conj</code> environment.</p></li>
<li><p>The <code>\swapnumbers</code> command is included in the preamble to change the way that theorems are numbered in the document, e.g.&nbsp;the article has <code>1.2 Theorem</code> as opposed to <code>Theorem 1.2</code>.</p></li>
<li><p>The equations are numbered along the subsections - this is accomplished by the lines</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\numberwithin</span>{equation}{subsection}</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\renewcommand</span>{<span class="ex">\theequation</span>}{<span class="fu">\thesubsection</span>.<span class="fu">\arabic</span>{equation}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>in the preamble.</p></li>
</ul></li>
<li>Hoyois, <em><a href="https://arxiv.org/abs/1309.6147">A quadratic refinement of the Grothendieck-Lefschetz-Verdier Trace Formula</a></em>
<ul>
<li>The theorem-like environments are numbered <code>Theorem 1.1, Theorem 1.3, Corollary 1.4, Theorem 1.5</code>, etc.
<ul>
<li>The theorem-like environments that are numbered are assigned the <code>equation</code> counter. In particular, the equation environments share their numberings with the theorem-like environments. For example, section 1 has Equation <code>(1.2)</code></li>
<li>This equation counter is reset at the beginning of each section and the section number is included in the numbering via</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\numberwithin</span>{equation}{section}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
</ul>
<div id="cell-27" class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: consider different arxiv articles to see how they are numbered</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L175" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="numbered_newtheorems_counters_in_preamble" class="level3">
<h3 class="anchored" data-anchor-id="numbered_newtheorems_counters_in_preamble">numbered_newtheorems_counters_in_preamble</h3>
<blockquote class="blockquote">
<pre><code> numbered_newtheorems_counters_in_preamble (document:str,
                                            add_equation_counter:Optional[
                                            bool]=None)</code></pre>
</blockquote>
<p>*Return the dict specifying the numbered <code>\newtheorem</code> command invocations</p>
<p>Assumes that</p>
<ul>
<li>invocations of the <code>\newtheorem</code> command are exclusively in the preamble of the LaTeX document.</li>
<li>theorem-like environments are defined using the <code>\newtheorem</code> command.</li>
<li>no environments of the same name are defined twice.</li>
<li>There is at most one invocation of <code>\theoremstyle</code> or <code>\newtheorem</code> in each line.</li>
</ul>
<p>This function does not take into account <code>\numberwithins</code> being used. The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#numberwithins_in_preamble"><code>numberwithins_in_preamble</code></a> function accounts for invocations of the <code>\numberwithins</code> command instead.</p>
<p>The <code>equation</code> environment (and other related environments, such as <code>eqnarray</code>) seems to be included in documents of the class <code>amsart</code> or <code>article</code> (i.e.&nbsp;documents which invoke <code>\documentclass{amsart}</code> or <code>\documentclass{article}</code>, possibly with some optional arguments). The <code>equation</code> environment (and other related environments) is accordingly included in the output of this function if the document is of the class <code>amsart</code> and <code>add_equation_counter</code> is not specified, set to <code>None</code>.</p>
<p>This function uses two separate regex patterns, one to detect the invocations of <code>\newtheorem</code> in which the optional parameter is the second parameter and one to detect those in which the optional parameter is the third parameter.*</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>document</td>
<td>str</td>
<td></td>
<td>The LaTeX document</td>
</tr>
<tr class="even">
<td>add_equation_counter</td>
<td>Optional</td>
<td>None</td>
<td>Determines whether or not the <code>equation</code> environment will have a counter added when a <code>newthoerem</code> command for the <code>equation</code> environment is not explicitly invoked in the preamble. If <code>None</code>, then the counter is added if the article is of class <code>amsart</code> or <code>article</code>. If <code>True</code>, then the counter is added. If <code>False</code>, then the counter is not added.</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>dict</strong></td>
<td></td>
<td><strong>The keys are the command names of the environments. The value a key is a tuple <code>(&lt;counter&gt;, &lt;reset_by_counter&gt;)</code>, where <code>&lt;counter&gt;</code> is the counter that the environment belongs to, which can be custom defined or predefined in LaTeX, and <code>&lt;reset_by_counter&gt;</code> is a counter whose incrementation resets the # counter of the environment, if available.</strong></td>
</tr>
</tbody>
</table>
<div id="cell-29" class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\theoremstyle</span><span class="sc">{definition}</span><span class="vs">                 \newtheorem</span><span class="sc">{conj}{Conjecture}</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem*</span><span class="sc">{example}{Example}</span><span class="vs">            \newtheorem</span><span class="sc">{defn}{Definition}</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{remark}{Remark}</span><span class="vs"> \newtheorem*</span><span class="sc">{notation}{Notation}</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{document}</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{document}</span><span class="vs">"""</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>numbered_newtheorems_counters_in_preamble(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>{'conj': ('conj', None), 'defn': ('defn', None), 'remark': ('remark', None)}</code></pre>
</div>
</div>
<p>The <code>numbered_newtheorems_counter_in_preamble</code> function parses the preamble of a LaTeX document for invocations of the <code>\newtheorem</code> command and returns what counters each theorem-like environment command belongs to.</p>
<div id="cell-31" class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'newtheorem_example.tex'</span>) </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> numbered_newtheorems_counters_in_preamble(text)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>test_eq(counters,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>   {<span class="st">'theorem'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>), <span class="st">'lemma'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>), <span class="st">'definition'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>), <span class="st">'corollary'</span>: (<span class="st">'corollary'</span>, <span class="va">None</span>), <span class="st">'remark'</span>: (<span class="st">'remark'</span>, <span class="st">'theorem'</span>), <span class="st">'equation'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'eqnarray'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>)}</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{article}
\usepackage{amsthm}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition} % Note that `theorem`, `lemma`, and `definition` all have `theorem` as their counter.
\newtheorem{corollary}{Corollary} % Note that `corollary` has its own counter.
\newtheorem{remark}{Remark}[theorem] % `remark` has `theorem` as its counter
\newtheorem*{conjecture*}{Conjecture} % `conjecture*` has no counter

\begin{document}

\section{Introduction}

\begin{theorem}
This is Theorem 1.
\end{theorem}

\begin{lemma}
This is Lemma 2.
\end{lemma}

\begin{definition}
This is Definition 3.
\end{definition}

\end{document}</code></pre>
</div>
</div>
<div id="cell-32" class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="vs">\theoremstyle</span><span class="sc">{plain}</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{thm}</span><span class="vs">[subsection]</span><span class="sc">{Theorem}</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{prop}</span><span class="vs">[subsection]</span><span class="sc">{Proposition}</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{cor}</span><span class="vs">[subsection]</span><span class="sc">{Corollary}</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{remark}{Remark}</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{conj}</span><span class="vs">[subsection]</span><span class="sc">{Conjecture}</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem*{conj*}</span><span class="sc">{Conjecture}</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{document}</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{document}</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="vs">"""</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> numbered_newtheorems_counters_in_preamble(text)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>test_eq(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    counters,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    {<span class="st">'thm'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>), <span class="st">'prop'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>), <span class="st">'cor'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>), <span class="st">'remark'</span>: (<span class="st">'remark'</span>, <span class="va">None</span>), <span class="st">'conj'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#numbered_newtheorems_counters_in_preamble"><code>numbered_newtheorems_counters_in_preamble</code></a> ignores commented out text:</p>
<div id="cell-34" class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="vs">\theoremstyle</span><span class="sc">{plain}</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{thm}</span><span class="vs">[subsection]</span><span class="sc">{Theorem}</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{prop}</span><span class="vs">[subsection]</span><span class="sc">{Proposition}</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{cor}</span><span class="vs">[subsection]</span><span class="sc">{Corollary}</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{conj}</span><span class="vs">[subsection]</span><span class="sc">{Conjecture}</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem*{conj*}</span><span class="sc">{Conjecture}</span><span class="vs"> %\newtheorem</span><span class="sc">{fakeenv}</span><span class="vs">{This won't be picked up!}</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{document}</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{document}</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="vs">"""</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> numbered_newtheorems_counters_in_preamble(text)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>test_eq(</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    counters,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    {<span class="st">'thm'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>), <span class="st">'prop'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>), <span class="st">'cor'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>), <span class="st">'conj'</span>: (<span class="st">'subsection'</span>, <span class="va">None</span>)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#numbered_newtheorems_counters_in_preamble"><code>numbered_newtheorems_counters_in_preamble</code></a> does not account for <code>\numberwithin</code> command invocations. The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#numberwithins_in_preamble"><code>numberwithins_in_preamble</code></a> function accounts for invocations of <code>\numberwithin</code> instead.</p>
<div id="cell-36" class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_3_theorem_like_environments_share_counter_with_equation_and_reset_at_each_section'</span> <span class="op">/</span> <span class="st">'main.tex'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># So `numbered_newtheorems_counters_in_preamble` only considers</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the theorem-like environemnts as being counted by 'equation'.</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the command  `\numberwithin{equation}{section}`</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># resets the equation counter</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># every time the `section` counter is incremented.</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>test_eq(numbered_newtheorems_counters_in_preamble(text), </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>       {<span class="st">'theorem'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'proposition'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'lemma'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'corollary'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'definition'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'example'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'remark'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'equation'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'eqnarray'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>)}</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{amsart}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amsfonts, amssymb, amsthm, amsopn}

\numberwithin{equation}{section}

\theoremstyle{plain}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{theoremA}{Theorem A}
\newtheorem*{theoremB}{Theorem B}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{corollary}[equation]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{example}[equation]{Example}
\newtheorem*{acknowledgements}{Acknowledgements}
\newtheorem*{conventions}{Conventions}

\theoremstyle{remark}
\newtheorem{remark}[equation]{Remark}

\begin{document}

\section{Introduction}

\begin{theorem}
This is Theorem 1.1. This is because the \verb|\numberwithin{equation}{section}| makes the section number included in the equation counter and because the \\
\verb|\newtheorem{theorem}[equation]{Theorem}| command makes the environment \verb|theorem| be counted by the equation counter.
\end{theorem}

The following makes an equation labeled 1.2; 
\begin{equation}
5 + 7 = 12
\end{equation}

\begin{theorem*}
This Theorem is unnumbered
\end{theorem*}

\begin{corollary}
This is Corollary 1.3.
\end{corollary}

\section{Another section}
\begin{theorem}
This is theorem 2.1
\end{theorem}

The following is labeled 2.2:
\begin{equation}
3+5 = 8.
\end{equation}

\end{document}</code></pre>
</div>
</div>
<p>The <code>\newtheorem</code> command can be used to specify the counter of the newly defined theorem-like environment to be reset upon another counter’s incrementation; for example <code>\newtheorem{theorem}{Theorem}[section]</code> specifies for a new environment named <code>theorem</code> (with display text <code>Theorem</code>) that is reset whenever the <code>section</code> counter is incremented.</p>
<div id="cell-38" class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_7_newtheorem_command_restarts_counter_by_section'</span> <span class="op">/</span> <span class="st">'main.tex'</span>) </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># So `numbered_newtheorems_counters_in_preamble` only considers the theorem-like</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  environemnts as being counted by 'equation'.</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the command  `\numberwithin{equation}{section}` resets the equation counter</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># every time the `section` counter is incremented.</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>test_eq(numbered_newtheorems_counters_in_preamble(text), </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>        {<span class="st">'lemma'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>), <span class="st">'theorem'</span>: (<span class="st">'theorem'</span>, <span class="st">'section'</span>), <span class="st">'corollary'</span>: (<span class="st">'corollary'</span>, <span class="st">'theorem'</span>), <span class="st">'proposition'</span>: (<span class="st">'proposition'</span>, <span class="st">'section'</span>), <span class="st">'equation'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>), <span class="st">'eqnarray'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>)}</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
% Based on an example from https://www.overleaf.com/learn/latex/Theorems_and_proofs#Numbered_theorems.2C_definitions.2C_corollaries_and_lemmas

\documentclass[12 pt]{amsart}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
% Note that the below invocation of \newtheorem is invalid:
% \newtheorem{proposition}[theorem]{Proposition}[section]
\newtheorem{proposition}{Proposition}[section]

\begin{document}
\section{Introduction}
Theorems can easily be defined:

\begin{theorem}
Let \(f\) be a function whose derivative exists in every point, then \(f\) is 
a continuous function.
\end{theorem}

\begin{theorem}[Pythagorean theorem]
\label{pythagorean}
This is a theorem about right triangles and can be summarised in the next 
equation 
\[ x^2 + y^2 = z^2 \]
\end{theorem}

And a consequence of theorem \ref{pythagorean} is the statement in the next 
corollary.

\begin{corollary}
There's no right rectangle whose sides measure 3cm, 4cm, and 6cm.
\end{corollary}

You can reference theorems such as \ref{pythagorean} when a label is assigned.

\begin{lemma}
Given two line segments whose lengths are \(a\) and \(b\) respectively there is a 
real number \(r\) such that \(b=ra\).
\end{lemma}

\end{document}

</code></pre>
</div>
</div>
<p>For the following test, we have multiple theorems defined in the same line:</p>
<div id="cell-40" class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\theoremstyle</span><span class="sc">{definition}</span><span class="vs">                 \newtheorem</span><span class="sc">{conj}{Conjecture}</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem*</span><span class="sc">{example}{Example}</span><span class="vs">            \newtheorem</span><span class="sc">{defn}{Definition}</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{remark}{Remark}</span><span class="vs"> \newtheorem*</span><span class="sc">{notation}{Notation}</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{document}</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{document}</span><span class="vs">"""</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>numbered_newtheorems_counters_in_preamble(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>{'conj': ('conj', None), 'defn': ('defn', None), 'remark': ('remark', None)}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L272" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="numberwithins_in_preamble" class="level3">
<h3 class="anchored" data-anchor-id="numberwithins_in_preamble">numberwithins_in_preamble</h3>
<blockquote class="blockquote">
<pre><code> numberwithins_in_preamble (document:str)</code></pre>
</blockquote>
<p>*Return the <code>dict</code> describing <code>\numberwithin</code> commands invoked in the preamble of <code>document</code>.</p>
<p>Assumes that <code>\numberwithin</code> commands are invoked exclusively in the preamble.</p>
<p>See also the <code>numbered_newtheorems_counter_in_preamble</code> function, which parses invocations of the <code>\newtheorem</code> command.*</p>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>document</td>
<td>str</td>
<td>The LaTeX document</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>dict</strong></td>
<td><strong>The keys are the first arguments of <code>numberwithin</code> invocations and the values ar ethe second arguments of <code>numberwithin</code> invocations.</strong></td>
</tr>
</tbody>
</table>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#numberwithins_in_preamble"><code>numberwithins_in_preamble</code></a> function returns a <code>dict</code> describing invocations of the <code>\numberwithin</code> commands. See also the <code>numbered_newtheorems_counter_in_preamble</code> function, which parses invocations of the <code>\newtheorem</code> command.</p>
<p>In the following example, there is an invocation of the <code>\numberwithin</code> command; for the LaTeX document in the example below, the equation counter is reset every time the <code>section</code> counter is incremented.</p>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#numberwithins_in_preamble"><code>numberwithins_in_preamble</code></a> function returns a <code>dict</code> that is used by the <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> function to account for this fact.</p>
<div id="cell-44" class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_3_theorem_like_environments_share_counter_with_equation_and_reset_at_each_section'</span> <span class="op">/</span> <span class="st">'main.tex'</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>test_eq(numberwithins_in_preamble(text), {<span class="st">'equation'</span>: <span class="st">'section'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{amsart}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amsfonts, amssymb, amsthm, amsopn}

\numberwithin{equation}{section}

\theoremstyle{plain}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{theoremA}{Theorem A}
\newtheorem*{theoremB}{Theorem B}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{corollary}[equation]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{example}[equation]{Example}
\newtheorem*{acknowledgements}{Acknowledgements}
\newtheorem*{conventions}{Conventions}

\theoremstyle{remark}
\newtheorem{remark}[equation]{Remark}

\begin{document}

\section{Introduction}

\begin{theorem}
This is Theorem 1.1. This is because the \verb|\numberwithin{equation}{section}| makes the section number included in the equation counter and because the \\
\verb|\newtheorem{theorem}[equation]{Theorem}| command makes the environment \verb|theorem| be counted by the equation counter.
\end{theorem}

The following makes an equation labeled 1.2; 
\begin{equation}
5 + 7 = 12
\end{equation}

\begin{theorem*}
This Theorem is unnumbered
\end{theorem*}

\begin{corollary}
This is Corollary 1.3.
\end{corollary}

\section{Another section}
\begin{theorem}
This is theorem 2.1
\end{theorem}

The following is labeled 2.2:
\begin{equation}
3+5 = 8.
\end{equation}

\end{document}</code></pre>
</div>
</div>
<section id="getting-the-display-names-of-environment" class="level4">
<h4 class="anchored" data-anchor-id="getting-the-display-names-of-environment">Getting the display names of environment</h4>
<p>For example, <code>\newtheorem{theorem}{Theorem}</code> defines a theorem-like environment called <code>theorem</code> whose display name is <code>Theorem</code>.</p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L297" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="display_names_of_environments" class="level3">
<h3 class="anchored" data-anchor-id="display_names_of_environments">display_names_of_environments</h3>
<blockquote class="blockquote">
<pre><code> display_names_of_environments (document:str)</code></pre>
</blockquote>
<p>*Return the dict specifying the display names for each theorem-like environment.</p>
<p>This function uses two separate regex patterns, one to detect the invocations of <code>\newtheorem</code> in which the optional parameter is the second parameter and one to detect those in which the optional parameter is the third parameter.</p>
<p>Assumes that - invocations of the <code>\newtheorem</code> command are exclusively in the preamble of the LaTeX document. - theorem-like environments are defined using the <code>\newtheorem</code> command. - no environments of the same name are defined twice.*</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>document</td>
<td>str</td>
<td>The LaTeX document</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>dict</strong></td>
<td></td>
</tr>
</tbody>
</table>
<p>Basic examples:</p>
<div id="cell-50" class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'newtheorem_example.tex'</span>) </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>display_names <span class="op">=</span> display_names_of_environments(text)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>test_eq(display_names,{<span class="st">'theorem'</span>: <span class="st">'Theorem'</span>, <span class="st">'lemma'</span>: <span class="st">'Lemma'</span>, <span class="st">'definition'</span>: <span class="st">'Definition'</span>, <span class="st">'corollary'</span>: <span class="st">'Corollary'</span>, <span class="st">'conjecture*'</span>: <span class="st">'Conjecture'</span>, <span class="st">'remark'</span>: <span class="st">'Remark'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{article}
\usepackage{amsthm}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition} % Note that `theorem`, `lemma`, and `definition` all have `theorem` as their counter.
\newtheorem{corollary}{Corollary} % Note that `corollary` has its own counter.
\newtheorem{remark}{Remark}[theorem] % `remark` has `theorem` as its counter
\newtheorem*{conjecture*}{Conjecture} % `conjecture*` has no counter

\begin{document}

\section{Introduction}

\begin{theorem}
This is Theorem 1.
\end{theorem}

\begin{lemma}
This is Lemma 2.
\end{lemma}

\begin{definition}
This is Definition 3.
\end{definition}

\end{document}</code></pre>
</div>
</div>
<div id="cell-51" class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_1_consecutive_numbering_scheme'</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>display_names <span class="op">=</span> display_names_of_environments(text)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(display_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{article}
\usepackage{amsthm}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition} % Note that `theorem`, `lemma`, and `definition` all have `theorem` as their counter.
\newtheorem{corollary}{Corollary} % Note that `corollary` has its own counter.
\newtheorem{remark}{Remark}[theorem] % `remark` has `theorem` as its counter
\newtheorem*{conjecture*}{Conjecture} % `conjecture*` has no counter

\begin{document}

\section{Introduction}

\begin{theorem}
This is Theorem 1.
\end{theorem}

\begin{lemma}
This is Lemma 2.
\end{lemma}

\begin{definition}
This is Definition 3.
\end{definition}

\end{document}
{'theorem': 'Theorem', 'lemma': 'Lemma', 'definition': 'Definition', 'corollary': 'Corollary', 'conjecture*': 'Conjecture', 'remark': 'Remark'}</code></pre>
</div>
</div>
<div id="cell-52" class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_7_newtheorem_command_restarts_counter_by_section'</span> <span class="op">/</span> <span class="st">'main.tex'</span>) </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>display_names <span class="op">=</span> display_names_of_environments(text)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>test_eq(display_names,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>{<span class="st">'theorem'</span>: <span class="st">'Theorem'</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a> <span class="st">'corollary'</span>: <span class="st">'Corollary'</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a> <span class="st">'lemma'</span>: <span class="st">'Lemma'</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a> <span class="st">'proposition'</span>: <span class="st">'Proposition'</span>,})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
% Based on an example from https://www.overleaf.com/learn/latex/Theorems_and_proofs#Numbered_theorems.2C_definitions.2C_corollaries_and_lemmas

\documentclass[12 pt]{amsart}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
% Note that the below invocation of \newtheorem is invalid:
% \newtheorem{proposition}[theorem]{Proposition}[section]
\newtheorem{proposition}{Proposition}[section]

\begin{document}
\section{Introduction}
Theorems can easily be defined:

\begin{theorem}
Let \(f\) be a function whose derivative exists in every point, then \(f\) is 
a continuous function.
\end{theorem}

\begin{theorem}[Pythagorean theorem]
\label{pythagorean}
This is a theorem about right triangles and can be summarised in the next 
equation 
\[ x^2 + y^2 = z^2 \]
\end{theorem}

And a consequence of theorem \ref{pythagorean} is the statement in the next 
corollary.

\begin{corollary}
There's no right rectangle whose sides measure 3cm, 4cm, and 6cm.
\end{corollary}

You can reference theorems such as \ref{pythagorean} when a label is assigned.

\begin{lemma}
Given two line segments whose lengths are \(a\) and \(b\) respectively there is a 
real number \(r\) such that \(b=ra\).
\end{lemma}

\end{document}

</code></pre>
</div>
</div>
<p>In the following example, there are multiple <code>\newtheorem</code> commands defined in a single line.</p>
<div id="cell-54" class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\theoremstyle</span><span class="sc">{definition}</span><span class="vs">                 \newtheorem</span><span class="sc">{conj}{Conjecture}</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem*</span><span class="sc">{example}{Example}</span><span class="vs">            \newtheorem</span><span class="sc">{defn}{Definition}</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{remark}{Remark}</span><span class="vs"> \newtheorem*</span><span class="sc">{notation}{Notation}</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{document}</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{document}</span><span class="vs">"""</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>test_eq(display_names_of_environments(text), {<span class="st">'conj'</span>: <span class="st">'Conjecture'</span>, <span class="st">'example'</span>: <span class="st">'Example'</span>, <span class="st">'defn'</span>: <span class="st">'Definition'</span>, <span class="st">'remark'</span>: <span class="st">'Remark'</span>, <span class="st">'notation'</span>: <span class="st">'Notation'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="divide-latex-text-into-parts" class="level3">
<h3 class="anchored" data-anchor-id="divide-latex-text-into-parts">Divide latex text into parts</h3>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L549" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="text_from_node" class="level3">
<h3 class="anchored" data-anchor-id="text_from_node">text_from_node</h3>
<blockquote class="blockquote">
<pre><code> text_from_node (node:pylatexenc.latexwalker.LatexNode)</code></pre>
</blockquote>
<p><em>Return the str representing <code>node</code>.</em></p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L541" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="get_node_from_simple_text" class="level3">
<h3 class="anchored" data-anchor-id="get_node_from_simple_text">get_node_from_simple_text</h3>
<blockquote class="blockquote">
<pre><code> get_node_from_simple_text (text:str)</code></pre>
</blockquote>
<p><em>Return the (first) <code>LatexNode</code> object from a str.</em></p>
<div id="cell-58" class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"""\begin</span><span class="sc">{theorem}</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="vs">lalalala</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{equation}</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{equation}</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{theorem}</span><span class="vs">"""</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>text_from_node(node)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>'\\begin{theorem}\nlalalala\n\\begin{equation}\n\\end{equation}\n\\end{theorem}'</code></pre>
</div>
</div>
<div id="cell-59" class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\begin</span><span class="sc">{thm}</span><span class="vs">This is a theorem. \end</span><span class="sc">{thm}</span><span class="vs">"""</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">isinstance</span>(node, LatexEnvironmentNode)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>test_eq(node.environmentname, <span class="st">'thm'</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\begin</span><span class="sc">{thm}</span><span class="vs">This is a theorem. \end</span><span class="sc">{thm}</span><span class="vs"> \begin</span><span class="sc">{proof}</span><span class="vs"> This is a proof. It is not captured by the `get_node_from_simple_text` function \end</span><span class="sc">{proof}</span><span class="vs">"""</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">isinstance</span>(node, LatexEnvironmentNode)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>test_eq(node.environmentname, <span class="st">'thm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-60" class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\begin</span><span class="sc">{thm}</span><span class="vs">This is a theorem. \end</span><span class="sc">{thm}</span><span class="vs">"""</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Test a theoreem being counted by its own counter.</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>numbertheorem_counters <span class="op">=</span> {<span class="st">'thm'</span>: (<span class="st">'thm'</span>, <span class="va">None</span>)}</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>numberwithins <span class="op">=</span> {}</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> {<span class="st">'thm'</span>: <span class="dv">1</span>}</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'1'</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Test a theorem being countered by the equation counter.</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>numbertheorem_counters <span class="op">=</span> {<span class="st">'thm'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>)}</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>numberwithins <span class="op">=</span> {}</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> {<span class="st">'equation'</span>: <span class="dv">2</span>}</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'2'</span>)</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Test a theorem being countered by the equation counter.</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>numbertheorem_counters <span class="op">=</span> {<span class="st">'thm'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>)}</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>numberwithins <span class="op">=</span> {}</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> {<span class="st">'equation'</span>: <span class="dv">2</span>}</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'2'</span>)</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\begin</span><span class="sc">{corollary}</span><span class="vs">This is a corollary. \end</span><span class="sc">{orollary}</span><span class="vs">"""</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Test a theorem-like environment being counted by the counter of</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a><span class="co"># another theorem-like environment</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>numbertheorem_counters <span class="op">=</span> {<span class="st">'corollary'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>), <span class="st">'theorem'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>)}</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>numberwithins <span class="op">=</span> {}</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> {<span class="st">'theorem'</span>: <span class="dv">0</span>}</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'0'</span>)</span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Test a theorem-like environment whose counter is numbered within</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a><span class="co"># The section counter.</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a><span class="co"># First, see what happens when a theorem is called</span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\begin</span><span class="sc">{theorem}</span><span class="vs">This is a theorem. \end</span><span class="sc">{theorem}</span><span class="vs">"""</span></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>numbertheorem_counters <span class="op">=</span> {<span class="st">'theorem'</span>: (<span class="st">'theorem'</span>, <span class="va">None</span>)}</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>numberwithins <span class="op">=</span> {<span class="st">'theorem'</span>: <span class="st">'section'</span>}</span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> {<span class="st">'section'</span>: <span class="dv">1</span>, <span class="st">'theorem'</span>: <span class="dv">0</span>}</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'1.0'</span>)</span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Next, see what happens when a new section is invoked:</span></span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\section{New section! The theorem counter should be reset}"""</span></span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'1'</span>)</span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Test a theorem-like environment sharing a counter with equation</span></span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a><span class="co"># and in turn equation is numbered within section.</span></span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\begin</span><span class="sc">{theorem}</span><span class="vs">This is a theorem. \end</span><span class="sc">{theorem}</span><span class="vs">"""</span></span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>numbertheorem_counters <span class="op">=</span> {<span class="st">'theorem'</span>: (<span class="st">'equation'</span>, <span class="va">None</span>)}</span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>numberwithins <span class="op">=</span> {<span class="st">'equation'</span>: <span class="st">'section'</span>}</span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>counters <span class="op">=</span> {<span class="st">'section'</span>: <span class="dv">1</span>, <span class="st">'equation'</span>: <span class="dv">0</span>}</span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'1.0'</span>)</span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Next, see what happens when a new section is invoked:</span></span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r"""\section{New section! The theorem counter should be reset}"""</span></span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> get_node_from_simple_text(text)</span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a>sample_numbering <span class="op">=</span> _node_numbering(</span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true" tabindex="-1"></a>    node, numbertheorem_counters, numberwithins, counters)</span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true" tabindex="-1"></a>test_eq(sample_numbering, <span class="st">'1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L816" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="swap_numbers_invoked" class="level3">
<h3 class="anchored" data-anchor-id="swap_numbers_invoked">swap_numbers_invoked</h3>
<blockquote class="blockquote">
<pre><code> swap_numbers_invoked (preamble:str)</code></pre>
</blockquote>
<p>*Returns <code>True</code> if <code>\swapnumbers</code> is in the preamble.</p>
<p>Assume that a mention of <code>\swapnumbers</code> is an actual invocation.*</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>preamble</td>
<td>str</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td></td>
</tr>
</tbody>
</table>
<div id="cell-62" class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> swap_numbers_invoked(<span class="vs">r'\swapnumbers'</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> swap_numbers_invoked(<span class="vs">r'''</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\documentclass</span><span class="sc">{article}</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="vs">\usepackage</span><span class="sc">{amsthm}</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{theorem}{Theorem}</span><span class="vs"> % \swapnumbers</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{corollary}</span><span class="vs">[theorem]</span><span class="sc">{Corollary}</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem</span><span class="sc">{definition}</span><span class="vs">[theorem]</span><span class="sc">{Definition}</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="vs">\newtheorem*{remark*}</span><span class="sc">{Remark}</span><span class="vs">'''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/divide.py#L898" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="divide_latex_text" class="level3">
<h3 class="anchored" data-anchor-id="divide_latex_text">divide_latex_text</h3>
<blockquote class="blockquote">
<pre><code> divide_latex_text (document:str, dir:Optional[os.PathLike],
                    environments_to_not_divide_along:list[str]=['align',
                    'align*', 'diagram', 'displaymath', 'displaymath*',
                    'enumerate', 'eqnarray', 'eqnarray*', 'equation',
                    'equation*', 'gather', 'gather*', 'itemize', 'label',
                    'multiline', 'multiline*', 'multline', 'multline*',
                    'proof', 'quote', 'tabular', 'table'],
                    replace_commands_in_document_first:bool=True,
                    repeat_replacing_commands:int=-1)</code></pre>
</blockquote>
<p>*Divide LaTeX text to convert into Obsidian.md notes.</p>
<p>Assumes that the counters in the LaTeX document are either the predefined ones or specified by the <code>\newtheorem</code> command.</p>
<p>Proof environments are assigned to the same parts their prcededing theorem-like environments, if available.</p>
<p>TODO: Implement counters specified by <code>\newcounter</code>, cf.&nbsp; https://www.overleaf.com/learn/latex/Counters#LaTeX_commands_for_working_with_counters.*</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>document</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>dir</td>
<td>Optional</td>
<td></td>
<td>The directory where the included files and style files are to be found.</td>
</tr>
<tr class="odd">
<td>environments_to_not_divide_along</td>
<td>list</td>
<td>[‘align’, ‘align<em>’, ’diagram’, ’displaymath’, ’displaymath</em>’, ‘enumerate’, ‘eqnarray’, ‘eqnarray<em>’, ’equation’, ’equation</em>’, ‘gather’, ‘gather<em>’, ’itemize’, ’label’, ’multiline’, ’multiline</em>’, ‘multline’, ’multline*‘, ’proof’, ‘quote’, ‘tabular’, ‘table’]</td>
<td>A list of the names of the environemts along which to not make a new note, unless the environment starts a section (or the entire document).</td>
</tr>
<tr class="even">
<td>replace_commands_in_document_first</td>
<td>bool</td>
<td>True</td>
<td>If <code>True</code>, invoke <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_commands_in_latex_document"><code>replace_commands_in_latex_document</code></a> on <code>document</code> to first replace custom commands (in the document minus the preamble) before starting to divide the document.</td>
</tr>
<tr class="odd">
<td>repeat_replacing_commands</td>
<td>int</td>
<td>-1</td>
<td>If <code>replace_commands_in_document_first</code> is <code>True</code>, then this is passed as the <code>repeat</code> argument into the invocation of <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_commands_in_latex_document"><code>replace_commands_in_latex_document</code></a>.</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td></td>
<td><strong>Each tuple is of the form <code>(note_title, text)</code>, where <code>note_title</code> often encapsulates the note type (i.e.&nbsp;section/subsection/display text of a theorem-like environment) along with the numbering and <code>text</code> is the text of the part. Sometimes <code>title</code> is just a number, which means that <code>text</code> is not of a <code>\section</code> or <code>\subsection</code> command and not of a theorem-like environment.</strong></td>
</tr>
</tbody>
</table>
<div id="cell-64" class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_text_with_gather_environment'</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span>  <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print(sample_latex_text)</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1. Introduction', '\\section{Introduction}\n\nThere is an equation\n\\begin{align*}\nasdf\n\\end{align*}\nbut this equation should not get to start its own part.\n\n']]</code></pre>
</div>
</div>
<section id="examples-for-the-divide_latex_text-function" class="level4">
<h4 class="anchored" data-anchor-id="examples-for-the-divide_latex_text-function">Examples for the <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> function</h4>
<p>In the following example, we take a basic LaTeX file and divide it into parts:</p>
<div id="cell-67" class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_proof_preceded_by_theorem'</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_latex_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
\documentclass[10pt]{article}

\theoremstyle{plain}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{theoremA}{Theorem A}
\newtheorem*{theoremB}{Theorem B}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{corollary}[equation]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{example}[equation]{Example}
\newtheorem*{acknowledgements}{Acknowledgements}
\newtheorem*{conventions}{Conventions}

\theoremstyle{remark}
\newtheorem{remark}[equation]{Remark}



\begin{document}
\section{Some section}

\begin{theorem}
This is a theorem.
\end{theorem}

\begin{proof}
This is a proof
\end{proof}

\end{document}</code></pre>
</div>
</div>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.preamble.html#divide_preamble"><code>divide_preamble</code></a> function recognizes where the preamble ends and where the document begins.</p>
<div id="cell-69" class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-70" class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(preamble)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
\documentclass[10pt]{article}

\theoremstyle{plain}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{theoremA}{Theorem A}
\newtheorem*{theoremB}{Theorem B}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{corollary}[equation]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{example}[equation]{Example}
\newtheorem*{acknowledgements}{Acknowledgements}
\newtheorem*{conventions}{Conventions}

\theoremstyle{remark}
\newtheorem{remark}[equation]{Remark}



</code></pre>
</div>
</div>
<div id="cell-71" class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(document)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{document}
\section{Some section}

\begin{theorem}
This is a theorem.
\end{theorem}

\begin{proof}
This is a proof
\end{proof}

\end{document}</code></pre>
</div>
</div>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> function divides the LaTeX document into parts, generally based on setions and theorem-like environments:</p>
<div id="cell-73" class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(parts), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1. Some section', '\\section{Some section}\n\n'], ['Theorem 1.', '\\begin{theorem}\nThis is a theorem.\n\\end{theorem}\\begin{proof}\nThis is a proof\n\\end{proof}']]</code></pre>
</div>
</div>
<p>In the next example, we have some <code>enumerate</code> environments to list out some things. The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> does not create a new part of the <code>enumerate</code> environment.</p>
<div id="cell-75" class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_text_preceded_by_undivided_environment'</span> <span class="op">/</span>_test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_text_preceded_by_undivided_environment'</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_latex_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>% In this example, there are enumerate environments, which should not get their
% own `part`, cf. `divide_latex_text` in `16_latex.convert.ipynb`.
\documentclass[10pt]{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\begin{document}

\section{Introduction}

Blahblahblah, this document has some lists.
The `divide_latex_text` should not create a separate part for the below `enumerate`
environment; after all, it seems better to include the list in the same file/note
as the text that provides context for the list.

\begin{enumerate}
  \item Rings
  \item Fields
\end{enumerate}

And here is another list, perhaps a grocery list:

\begin{enumerate}
  \setcounter{enumi}{3}
  \item apples
  \item bananas
  \item milk
\end{enumerate}

Lalalala

\end{document}</code></pre>
</div>
</div>
<div id="cell-76" class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(document, <span class="bu">dir</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(parts), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1. Introduction', '\\section{Introduction}\n\nBlahblahblah, this document has some lists.\nThe `divide_latex_text` should not create a separate part for the below `enumerate`\nenvironment; after all, it seems better to include the list in the same file/note\nas the text that provides context for the list.\n\n\\begin{enumerate}\n  \\item Rings\n  \\item Fields\n\\end{enumerate}\n\nAnd here is another list, perhaps a grocery list:\n\n\\begin{enumerate}\n  \\setcounter{enumi}{3}\n  \\item apples\n  \\item bananas\n  \\item milk\n\\end{enumerate}\n\nLalalala\n\n']]</code></pre>
</div>
</div>
<div id="cell-77" class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_2'</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(document, <span class="bu">dir</span>)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1', '\\maketitle'], ['abstract', '\\begin{abstract}\nThis is an abstract\n\\end{abstract}']]</code></pre>
</div>
</div>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> function by default divides along a LaTeX environment (something which is invoked by <code>\begin{...} \end{...}</code>). One can use the optional <code>environments_to_not_divide_along</code> parameter in the function to specify which environments to not divide along. By default, this list is set as follows:</p>
<div id="cell-79" class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>DEFAULT_ENVIRONMENTS_TO_NOT_DIVIDE_ALONG</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>['align',
 'align*',
 'diagram',
 'displaymath',
 'displaymath*',
 'enumerate',
 'eqnarray',
 'eqnarray*',
 'equation',
 'equation*',
 'gather',
 'gather*',
 'itemize',
 'label',
 'multiline',
 'multiline*',
 'multline',
 'multline*',
 'proof',
 'quote',
 'tabular',
 'table']</code></pre>
</div>
</div>
<p>In the following example, the <code>theorem</code>, <code>corollary</code>, and <code>definition</code> environments share a counter, which is not reset even when a new section begins.</p>
<div id="cell-81" class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_1_consecutive_numbering_scheme'</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{article}
\usepackage{amsthm}
%\usepackage{amsmath}

\newtheorem{theorem}{Theorem}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem*{remark*}{Remark}

%\numberwithin{theorem}{part}

\begin{document}
For this document, the `theorem` counter is not reset whenever a new section begins.

A similar numbering scheme can be accomplished by importing \verb|amsmath| and invoking the code \verb|\numberwithin{theorem}{part}| in the preamble.

\section{Introduction}

\begin{theorem}
This is Theorem 1.
\end{theorem}

\begin{corollary}
This is Corollary 2.
\end{corollary}

\begin{remark*}
This is a remark. It is unnumbered and it does not affect the numberings of other environments.
\end{remark*}

\begin{definition}
This is Definition 3.
\end{definition}



\section{Another Section}

\begin{theorem}
This is Theorem 4.
\end{theorem}

And we might get a corollary!

\begin{corollary}
This is Corollary 5.
\end{corollary}

\begin{definition}
This is Definition 6.
\end{definition}

\end{document}</code></pre>
</div>
</div>
<div id="cell-82" class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> divide_latex_text(text, <span class="bu">dir</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>sample_output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[['1',
  'For this document, the `theorem` counter is not reset whenever a new section begins.\n\nA similar numbering scheme can be accomplished by importing \\verb|amsmath| and invoking the code \\verb|\\numberwithin{theorem}{part}| in the preamble.'],
 ['1. Introduction', '\\section{Introduction}\n\n'],
 ['Theorem 1.', '\\begin{theorem}\nThis is Theorem 1.\n\\end{theorem}'],
 ['Corollary 2.',
  '\\begin{corollary}\nThis is Corollary 2.\n\\end{corollary}'],
 ['Remark',
  '\\begin{remark*}\nThis is a remark. It is unnumbered and it does not affect the numberings of other environments.\n\\end{remark*}'],
 ['Definition 3.',
  '\\begin{definition}\nThis is Definition 3.\n\\end{definition}'],
 ['2. Another Section', '\\section{Another Section}\n\n'],
 ['Theorem 4.', '\\begin{theorem}\nThis is Theorem 4.\n\\end{theorem}'],
 ['2', 'And we might get a corollary!'],
 ['Corollary 5.',
  '\\begin{corollary}\nThis is Corollary 5.\n\\end{corollary}'],
 ['Definition 6.',
  '\\begin{definition}\nThis is Definition 6.\n\\end{definition}']]</code></pre>
</div>
</div>
<div id="cell-83" class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> sample_output[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">==</span> <span class="st">'1'</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> sample_output[<span class="dv">1</span>][<span class="dv">0</span>] <span class="op">==</span> <span class="st">'1. Introduction'</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> sample_output[<span class="dv">2</span>][<span class="dv">0</span>] <span class="op">==</span> <span class="st">'Theorem 1.'</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> sample_output[<span class="dv">3</span>][<span class="dv">0</span>] <span class="op">==</span> <span class="st">'Corollary 2.'</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> sample_output[<span class="dv">4</span>][<span class="dv">0</span>] <span class="op">==</span> <span class="st">'Remark'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the following example, the <code>\numerwithin</code> command is used to make the theorem-like environments numbered within sections. These environments are first numbered <code>1.1</code>, <code>1.2</code>, <code>1.3</code>, etc., and then numbered <code>2.1</code>, <code>2.2</code>, <code>2.3</code>, etc. once a new section starts.</p>
<div id="cell-85" class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_2_numbering_scheme_reset_at_each_section'</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>% This is an example of a LaTeX document whose theorem-like environments are numbered with sections.

\documentclass{article}
\usepackage{amsthm}
\usepackage{amsmath}

\newtheorem{theorem}{Theorem}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem*{remark*}{Remark}

\numberwithin{theorem}{section}

\begin{document}

This document resets its `theorem` counter whenever a new section begins.

\section{Introduction}

\begin{theorem}
This is Theorem 1.1.
\end{theorem}

\begin{corollary}
This is Corollary 1.2.
\end{corollary}

\begin{remark*}
This is a remark. It is unnumbered and it does not affect the numberings of other environments.
\end{remark*}


\begin{definition}
This is Definition 1.3.
\end{definition}



\section{Another Section}

\begin{theorem}
This is Theorem 2.1.
\end{theorem}

\begin{corollary}
This is Corollary 2.2.
\end{corollary}

\begin{definition}
This is Definition 2.3.
\end{definition}

\end{document}
</code></pre>
</div>
</div>
<div id="cell-86" class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>divide_latex_text(text, <span class="bu">dir</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[['1',
  'This document resets its `theorem` counter whenever a new section begins.'],
 ['1. Introduction', '\\section{Introduction}\n\n'],
 ['Theorem 1.1.', '\\begin{theorem}\nThis is Theorem 1.1.\n\\end{theorem}'],
 ['Corollary 1.2.',
  '\\begin{corollary}\nThis is Corollary 1.2.\n\\end{corollary}'],
 ['Remark',
  '\\begin{remark*}\nThis is a remark. It is unnumbered and it does not affect the numberings of other environments.\n\\end{remark*}'],
 ['Definition 1.3.',
  '\\begin{definition}\nThis is Definition 1.3.\n\\end{definition}'],
 ['2. Another Section', '\\section{Another Section}\n\n'],
 ['Theorem 2.1.', '\\begin{theorem}\nThis is Theorem 2.1.\n\\end{theorem}'],
 ['Corollary 2.2.',
  '\\begin{corollary}\nThis is Corollary 2.2.\n\\end{corollary}'],
 ['Definition 2.3.',
  '\\begin{definition}\nThis is Definition 2.3.\n\\end{definition}']]</code></pre>
</div>
</div>
<p>In this example, the various theorem-like environments share a counter with <code>equation</code> environments and this counter is reset at the start of each new section.</p>
<div id="cell-88" class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_3_theorem_like_environments_share_counter_with_equation_and_reset_at_each_section'</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\documentclass{amsart}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amsfonts, amssymb, amsthm, amsopn}

\numberwithin{equation}{section}

\theoremstyle{plain}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{theoremA}{Theorem A}
\newtheorem*{theoremB}{Theorem B}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{corollary}[equation]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{example}[equation]{Example}
\newtheorem*{acknowledgements}{Acknowledgements}
\newtheorem*{conventions}{Conventions}

\theoremstyle{remark}
\newtheorem{remark}[equation]{Remark}

\begin{document}

\section{Introduction}

\begin{theorem}
This is Theorem 1.1. This is because the \verb|\numberwithin{equation}{section}| makes the section number included in the equation counter and because the \\
\verb|\newtheorem{theorem}[equation]{Theorem}| command makes the environment \verb|theorem| be counted by the equation counter.
\end{theorem}

The following makes an equation labeled 1.2; 
\begin{equation}
5 + 7 = 12
\end{equation}

\begin{theorem*}
This Theorem is unnumbered
\end{theorem*}

\begin{corollary}
This is Corollary 1.3.
\end{corollary}

\section{Another section}
\begin{theorem}
This is theorem 2.1
\end{theorem}

The following is labeled 2.2:
\begin{equation}
3+5 = 8.
\end{equation}

\end{document}</code></pre>
</div>
</div>
<div id="cell-89" class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_3_theorem_like_environments_share_counter_with_equation_and_reset_at_each_section'</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>divide_latex_text(text, <span class="bu">dir</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[['1. Introduction', '\\section{Introduction}\n\n'],
 ['Theorem 1.1.',
  '\\begin{theorem}\nThis is Theorem 1.1. This is because the \\verb|\\numberwithin{equation}{section}| makes the section number included in the equation counter and because the \\\\\n\\verb|\\newtheorem{theorem}[equation]{Theorem}| command makes the environment \\verb|theorem| be counted by the equation counter.\n\\end{theorem}'],
 ['1',
  'The following makes an equation labeled 1.2; \n\\begin{equation}\n5 + 7 = 12\n\\end{equation}'],
 ['Theorem', '\\begin{theorem*}\nThis Theorem is unnumbered\n\\end{theorem*}'],
 ['Corollary 1.3.',
  '\\begin{corollary}\nThis is Corollary 1.3.\n\\end{corollary}'],
 ['2. Another section', '\\section{Another section}\n'],
 ['Theorem 2.1.', '\\begin{theorem}\nThis is theorem 2.1\n\\end{theorem}'],
 ['2',
  'The following is labeled 2.2:\n\\begin{equation}\n3+5 = 8.\n\\end{equation}']]</code></pre>
</div>
</div>
<div id="cell-90" class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_4_unnumbered_section'</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide_latex_text(text, <span class="bu">dir</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1. This is section 1', '\\section{This is section 1}\n\n'], ['Theorem 1.1.', '\\begin{theorem}\nThis is Theorem 1.1.\n\\end{theorem}'], ['1.1. This is a subsection 1.1', '\\subsection{This is a subsection 1.1}\n\nThe following makes an equation labeled 1; \n\\begin{equation}\n5 + 7 = 12\n\\end{equation}\n\n'], ['Theorem', '\\begin{theorem*}\nThis Theorem is unnumbered\n\\end{theorem*}'], ['1.2. This is subsection 1.2', '\\subsection{This is subsection 1.2}\n\n'], ['Corollary 1.2.', '\\begin{corollary}\nThis is Corollary 1.2.\n\\end{corollary}'], ['1. Unnumbered section', '\\section*{Unnumbered section}\n\n'], ['1.1. This is subsection 1.3', '\\subsection{This is subsection 1.3}\n'], ['1.1.1. This is subsubsection 1.3.1', '\\subsubsection{This is subsubsection 1.3.1}\n\n'], ['Theorem 1.1.', '\\begin{theorem}\nThis is Theorem 1.3.\n\\end{theorem}'], ['2. Another section', '\\section{Another section}\n\n'], ['2.1. This is subsection 2.1', '\\subsection{This is subsection 2.1}\n\n'], ['Theorem 2.1.', '\\begin{theorem}\nThis is Theorem 2.1\n\\end{theorem}'], ['1', 'The following is labeled 2; note that the equation counter was not reset by section:\n\\begin{equation}\n3+5 = 8.\n\\end{equation}']]</code></pre>
</div>
</div>
<div id="cell-91" class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_5_subsections_and_theorem_like_environments_share_counter'</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> divide_latex_text(text, <span class="bu">dir</span>)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide_latex_text(text, <span class="bu">dir</span>))</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output[<span class="dv">4</span>][<span class="dv">0</span>], <span class="st">'1. Remark.'</span>)</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output[<span class="dv">5</span>][<span class="dv">0</span>], <span class="st">'Remark'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1. This is section 1', '\\section{This is section 1}\n\n'], ['1.1. Theorem.', '\\begin{thm}\nThis is 1.1. Theorem. Note that the \\verb|\\swapnumbers| command is invoked in the preamble.\n\\end{thm}'], ['1.2. This is 1.2. subsection.', '\\subsection{This is 1.2. subsection.}\n\nNote that the equation counter is numbered within the subsection counter and that the theorem-like environments are numbered with the equation counter.\n\n'], ['1.2.1. This is 1.2.1. Subsubsection', '\\subsubsection{This is 1.2.1. Subsubsection}\n\n'], ['1. Remark.', '\\begin{remark}\nThis is an 1. Remark. Note that \\verb|\\remark| has a counter separate from those of many of the other theorem-like environments.\n\\end{remark}'], ['Remark', '\\begin{rem*}\nThis is an unnumbered Remark.\n\\end{rem*}'], ['1.3. Proposition.', '\\begin{prop}\nThis is 1.3. Proposition.\n\\end{prop}'], ['1. Unnumbered section', '\\section*{Unnumbered section}\n\n'], ['1.1. Theorem.', '\\begin{thm}\nThis is 1.4. Theorem.\n\\end{thm}'], ['2. This is Section 2', '\\section{This is Section 2}\n\n'], ['2.1. Theorem.', '\\begin{thm}\nThis is 2.1. Theorem\n\\end{thm}']]</code></pre>
</div>
</div>
<p>In the below example, the <code>theorem</code> count is specified to reset at every new section and the <code>corollary</code> environment is specified to reset at every new theorem.</p>
<p>In particular, note that there is a Theorem 1.2 and a subsequent Corollary 1.2.1 in the example:</p>
<div id="cell-93" class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_7_newtheorem_command_restarts_counter_by_section'</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>) </span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> divide_latex_text(text, <span class="bu">dir</span> )</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide_latex_text(text, <span class="bu">dir</span>))</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output[<span class="dv">4</span>][<span class="dv">0</span>], <span class="st">'Corollary 1.2.1.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
% Based on an example from https://www.overleaf.com/learn/latex/Theorems_and_proofs#Numbered_theorems.2C_definitions.2C_corollaries_and_lemmas

\documentclass[12 pt]{amsart}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
% Note that the below invocation of \newtheorem is invalid:
% \newtheorem{proposition}[theorem]{Proposition}[section]
\newtheorem{proposition}{Proposition}[section]

\begin{document}
\section{Introduction}
Theorems can easily be defined:

\begin{theorem}
Let \(f\) be a function whose derivative exists in every point, then \(f\) is 
a continuous function.
\end{theorem}

\begin{theorem}[Pythagorean theorem]
\label{pythagorean}
This is a theorem about right triangles and can be summarised in the next 
equation 
\[ x^2 + y^2 = z^2 \]
\end{theorem}

And a consequence of theorem \ref{pythagorean} is the statement in the next 
corollary.

\begin{corollary}
There's no right rectangle whose sides measure 3cm, 4cm, and 6cm.
\end{corollary}

You can reference theorems such as \ref{pythagorean} when a label is assigned.

\begin{lemma}
Given two line segments whose lengths are \(a\) and \(b\) respectively there is a 
real number \(r\) such that \(b=ra\).
\end{lemma}

\end{document}


[['1. Introduction', '\\section{Introduction}\nTheorems can easily be defined:\n\n'], ['Theorem 1.1.', '\\begin{theorem}\nLet \\(f\\) be a function whose derivative exists in every point, then \\(f\\) is \na continuous function.\n\\end{theorem}'], ['Theorem 1.2.', '\\begin{theorem}[Pythagorean theorem]\n\\label{pythagorean}\nThis is a theorem about right triangles and can be summarised in the next \nequation \n\\[ x^2 + y^2 = z^2 \\]\n\\end{theorem}'], ['1', 'And a consequence of theorem \\ref{pythagorean} is the statement in the next \ncorollary.'], ['Corollary 1.2.1.', "\\begin{corollary}\nThere's no right rectangle whose sides measure 3cm, 4cm, and 6cm.\n\\end{corollary}"], ['2', 'You can reference theorems such as \\ref{pythagorean} when a label is assigned.'], ['Lemma 1.3.', '\\begin{lemma}\nGiven two line segments whose lengths are \\(a\\) and \\(b\\) respectively there is a \nreal number \\(r\\) such that \\(b=ra\\).\n\\end{lemma}']]</code></pre>
</div>
</div>
<p>Note that part titles are stripped and are single-lined:</p>
<div id="cell-95" class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: fill in the following example</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co"># part = parts[...]</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co"># assert part[0].strip() == part[0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the following example, the subsections and the theorem-like environments share a counter:</p>
<div id="cell-97" class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'numbering_example_8_subsubsections_and_theorems_share_counter'</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> text_from_file(<span class="bu">file</span>) </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text)</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> divide_latex_text(text, <span class="bu">dir</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_output)</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output[<span class="op">-</span><span class="dv">1</span>][<span class="dv">0</span>], <span class="st">'Theorem 1.1.2.'</span>)</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output[<span class="op">-</span><span class="dv">2</span>][<span class="dv">0</span>], <span class="st">'1.1.1. section 1.1.1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
% Based on an example from https://www.overleaf.com/learn/latex/Theorems_and_proofs#Numbered_theorems.2C_definitions.2C_corollaries_and_lemmas

\documentclass[12 pt]{amsart}

\newtheorem{cor}[subsubsection]{Corollary}
\newtheorem{lem}[subsubsection]{Lemma}
\newtheorem{prop}[subsubsection]{Proposition}
\newtheorem{propconstr}[subsubsection]{Proposition-Construction}
\newtheorem{lemconstr}[subsubsection]{Lemma-Construction}
\newtheorem{ax}[subsubsection]{Axiom}
\newtheorem{conj}[subsubsection]{Conjecture}
\newtheorem{thm}[subsubsection]{Theorem}
\newtheorem{qthm}[subsubsection]{Quasi-Theorem}
\newtheorem{qlem}[subsubsection]{Quasi-Lemma}
\newtheorem{defn}[subsubsection]{Definition}
\newtheorem{quest}[subsubsection]{Question}
\newtheorem{claim}[subsubsection]{Claim}

\begin{document}
\section{Introduction}

\subsection{section 1.1}

\subsubsection{section 1.1.1}

\begin{thm}
This is theorem 1.1.2
\end{thm}

\end{document}


[['1. Introduction', '\\section{Introduction}\n\n'], ['1.1. section 1.1', '\\subsection{section 1.1}\n\n'], ['1.1.1. section 1.1.1', '\\subsubsection{section 1.1.1}\n\n'], ['Theorem 1.1.2.', '\\begin{thm}\nThis is theorem 1.1.2\n\\end{thm}']]</code></pre>
</div>
</div>
<p>In the below example, note that there is some text immediately following the subsubsection; the “part” for the start of the subsubsection is joined by this following text:</p>
<div id="cell-99" class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_text_after_subsubsection'</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_latex_text)</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>test_eq(parts[<span class="dv">2</span>], [<span class="st">'1.1.1. section 1.1.1'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">subsubsection{section 1.1.1}</span><span class="ch">\n</span><span class="st">Some text beneath subsubsection</span><span class="ch">\n</span><span class="st">'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
% Based on an example from https://www.overleaf.com/learn/latex/Theorems_and_proofs#Numbered_theorems.2C_definitions.2C_corollaries_and_lemmas

\documentclass[12 pt]{amsart}

\newtheorem{cor}[subsubsection]{Corollary}
\newtheorem{lem}[subsubsection]{Lemma}
\newtheorem{prop}[subsubsection]{Proposition}
\newtheorem{propconstr}[subsubsection]{Proposition-Construction}
\newtheorem{lemconstr}[subsubsection]{Lemma-Construction}
\newtheorem{ax}[subsubsection]{Axiom}
\newtheorem{conj}[subsubsection]{Conjecture}
\newtheorem{thm}[subsubsection]{Theorem}
\newtheorem{qthm}[subsubsection]{Quasi-Theorem}
\newtheorem{qlem}[subsubsection]{Quasi-Lemma}
\newtheorem{defn}[subsubsection]{Definition}
\newtheorem{quest}[subsubsection]{Question}
\newtheorem{claim}[subsubsection]{Claim}

\begin{document}
\section{Introduction}

\subsection{section 1.1}

\subsubsection{section 1.1.1}
Some text beneath subsubsection
\begin{thm}
This is theorem 1.1.2
\end{thm}

\end{document}


[['1. Introduction', '\\section{Introduction}\n\n'], ['1.1. section 1.1', '\\subsection{section 1.1}\n\n'], ['1.1.1. section 1.1.1', '\\subsubsection{section 1.1.1}\nSome text beneath subsubsection\n'], ['Theorem 1.1.2.', '\\begin{thm}\nThis is theorem 1.1.2\n\\end{thm}']]</code></pre>
</div>
</div>
<p>In the below example, theorem-like environments and equation environments share a counter and there is an equation within a theorem:</p>
<div id="cell-101" class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_theorems_and_equations_share_counter_and_equation_in_theorem'</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_latex_text)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>test_eq(parts[<span class="dv">2</span>], [<span class="st">'Corollary 1.3.'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">begin</span><span class="sc">{cor}</span><span class="ch">\n</span><span class="st">This is Corollary 1.3</span><span class="ch">\n\\</span><span class="st">end</span><span class="sc">{cor}</span><span class="st">'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
\documentclass[12pt]{amsart}
\usepackage{amsmath}
\usepackage{amsfonts}


\numberwithin{equation}{section}
\numberwithin{figure}{section}

\newtheorem{lemma}[equation]{Lemma}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{conjecture}[equation]{Conjecture}
\newtheorem{cor}[equation]{Corollary}
\newtheorem{prop}[equation]{Proposition}

\begin{document}

\section{Introduction}

\begin{theorem}
\begin{equation}
asdf
\end{equation}
\end{theorem}

\begin{cor}
This is Corollary 1.3
\end{cor}

\end{document}
[['1. Introduction', '\\section{Introduction}\n\n'], ['Theorem 1.1.', '\\begin{theorem}\n\\begin{equation}\nasdf\n\\end{equation}\n\\end{theorem}'], ['Corollary 1.3.', '\\begin{cor}\nThis is Corollary 1.3\n\\end{cor}']]</code></pre>
</div>
</div>
<p>In the below example, theorem-like environments and equation environments share a counter and there is an equation within the proof of a proposition:</p>
<div id="cell-103" class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_equation_in_proof'</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_latex_text)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>test_eq(parts[<span class="dv">2</span>], [<span class="st">'Corollary 1.3.'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">begin</span><span class="sc">{cor}</span><span class="ch">\n</span><span class="st">This is Corollary 1.3</span><span class="ch">\n\\</span><span class="st">end</span><span class="sc">{cor}</span><span class="st">'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
\documentclass[12pt]{amsart}
\usepackage{amsmath}
\usepackage{amsfonts}


\numberwithin{equation}{section}
\numberwithin{figure}{section}

\newtheorem{lemma}[equation]{Lemma}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{conjecture}[equation]{Conjecture}
\newtheorem{cor}[equation]{Corollary}
\newtheorem{prop}[equation]{Proposition}

\begin{document}

\section{Introduction}

\begin{prop}
This is Proposition 1.1
\end{prop}
\begin{proof}
\begin{equation}
\end{equation}
\end{proof}

\begin{cor}
This is Corollary 1.3
\end{cor}

\end{document}
[['1. Introduction', '\\section{Introduction}\n\n'], ['Proposition 1.1.', '\\begin{prop}\nThis is Proposition 1.1\n\\end{prop}\\begin{proof}\n\\begin{equation}\n\\end{equation}\n\\end{proof}'], ['Corollary 1.3.', '\\begin{cor}\nThis is Corollary 1.3\n\\end{cor}']]</code></pre>
</div>
</div>
<p>In the below example, theorem-like environments and equation environments share a counter and there is an <code>eqnarray</code> after the start of a section:</p>
<div id="cell-105" class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_eqnarray_after_start_of_section'</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_latex_text)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>test_eq(parts[<span class="dv">1</span>], [<span class="st">'Proposition 1.2.'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">begin</span><span class="sc">{prop}</span><span class="ch">\n</span><span class="st">This is Proposition 1.2</span><span class="ch">\n\\</span><span class="st">end</span><span class="sc">{prop}</span><span class="st">'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
\documentclass[12pt]{amsart}
\usepackage{amsmath}
\usepackage{amsfonts}


\numberwithin{equation}{section}
\numberwithin{figure}{section}

\newtheorem{lemma}[equation]{Lemma}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{conjecture}[equation]{Conjecture}
\newtheorem{cor}[equation]{Corollary}
\newtheorem{prop}[equation]{Proposition}

\begin{document}

\section{Introduction}
lalalala some stuff $5$

Hello I am saying stuff
\begin{eqnarray}
\end{eqnarray}
\begin{prop}
This is Proposition 1.2
\end{prop}

\end{document}
[['1. Introduction', '\\section{Introduction}\nlalalala some stuff $5$\n\nHello I am saying stuff\n\\begin{eqnarray}\n\\end{eqnarray}\n'], ['Proposition 1.2.', '\\begin{prop}\nThis is Proposition 1.2\n\\end{prop}']]</code></pre>
</div>
</div>
<p>In the below example, there are many custom commands deifned using the <code>\def</code> command. Note that use of <code>\u</code> in the LaTeX file, which causes problems for <code>pylatexenc</code>.</p>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> function had difficulties parsing through the latex document for the below example, specifically because this <code>\u</code> command made <code>pylatexenc</code> unable to find the <code>\section</code> following the <code>\u</code>. Now that <a href="https://hyunjongkimmath.github.io/trouver/latex.divide.html#divide_latex_text"><code>divide_latex_text</code></a> provides the option to replace custom commands from the LaTeX document (with their underlying “meaning/definitions” via the <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_commands_in_latex_document"><code>replace_commands_in_latex_document</code></a> function) before parsing through the LaTeX document, this is no longer a problem.</p>
<div id="cell-107" class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'divide_latex_example_unknown_section_division_problem'</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">dir</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>sample_latex_text <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print(sample_latex_text)</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>preamble, document <span class="op">=</span> divide_preamble(sample_latex_text)</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(sample_latex_text, <span class="bu">dir</span>)</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># test_eq(parts[1], ['Proposition 1.2.', '\\begin{prop}\nThis is Proposition 1.2\n\\end{prop}'])</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(parts), <span class="dv">3</span>)</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['1. Background and Notation', '\\section{Background and Notation}\n\n'], ['1.1. Unitary groups', '\\subsection{Unitary groups}\n\\label{subsecunitary}\n\nwhere $\\bm{{\\rm R}}_{{\\mathcal O}_E/{\\mathbb Z}}$ is the restriction of scalars functor.\nThen $SU$ is the derived group of $GU$ and of ${\\rm U}$,\n\n'], ['2. Mumford-Tate groups and endomorphism rings', '\\section{Mumford-Tate groups and endomorphism rings}\n\n\\label{secmt}\n\nCarlson and Toledo have \n\n\\bibliographystyle{hamsplain}\n\\bibliography{jda}\n\n']]</code></pre>
</div>
</div>
<div id="cell-108" class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: example with a multilined section title forced to single-lined:</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g. `\section{Exceptional maximal subgroups of </span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co"># \texorpdfstring{\(\GSp_4(\ff_\ell)\)}{GSp4Fell}}`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-109" class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Find a list of environment names commonly used.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-110" class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: examples with different numbering convention and different numbered environments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-111" class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here are some latex files with different conventions:</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - Different environment types have different counts and the counts do not show the section number.</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   - vankataramana_imbrd https://arxiv.org/abs/1205.6543: </span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="co">#       - e.g. section 1 has Theorem 1, Remark 1, Remark 2, Remark 3, subsection 1.1.3 has Remark 4, Subsection 2.2 has Definition 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hyunjongkimmath\.github\.io\/trouver");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hyunjongkimmath/trouver/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>