<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Adjust formatting for text from LaTeX files to be more usable by Markdown files for Obsidian.md (or vice versa)">

<title>latex.formatting – trouver</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ebc57992554dae5230fa85c1bd5a55fa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="latex.formatting – trouver">
<meta property="og:description" content="Adjust formatting for text from LaTeX files to be more usable by Markdown files for Obsidian.md (or vice versa)">
<meta property="og:site_name" content="trouver">
<meta name="twitter:title" content="latex.formatting – trouver">
<meta name="twitter:description" content="Adjust formatting for text from LaTeX files to be more usable by Markdown files for Obsidian.md (or vice versa)">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">trouver</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./latex.formatting.html">latex.formatting</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">trouver</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.vault.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.vault</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.markdown.file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.markdown.file</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.markdown.heading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.markdown.heading</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.links</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.tags.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.tags</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.footnotes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.footnotes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.reference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obisidian.personal.authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.authors</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.index_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.index_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.note_type.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.note_type</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.convert.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.convert</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.notations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.note_processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.note_processing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.information_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.information_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learninig.database_update.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.database_update</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.information_note_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.information_note_types</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notation_identification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.notation_identification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notation_summarization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.notation_summarization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.tokenize.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.tokenize</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.vault.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.vault</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.divide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.divide</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.folders</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.formatting.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">latex.formatting</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.preamble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.preamble</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.comments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex.comments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.machine_learning.notation_linking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.notation_linking</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.definition_and_notation_naming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.definition_and_notation_naming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.tests</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.regex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.definition_and_notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.definition_and_notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.numbers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./41_helper.accented_characters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">41_helper.accented_characters.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.date_and_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.date_and_time</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./43_helper.topological_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topological sort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./44_helper.alphabet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alphabet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.path_accepted_string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.path_accepted_string</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./46_helper.files_and_folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Files and folders</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.macros_and_commands.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex.macros_and_commands</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.arxiv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.arxiv</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.vault_and_links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.vault_and_links</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.parse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.notation.parse</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.in_standard_information_note.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.notation.in_standard_information_note</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.note_division.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.note_division</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>app.__init__</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./todo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TODO list</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_to.install_trouver.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">how_to.install_trouver</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_to.train_ml_model.fastai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">how_to.train_ml_model.fastai</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">release_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./star.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.concise_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tutorial.concise_code</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.walkthrough.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tutorial.walkthrough</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./unused.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using_regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Regex</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#numbers" id="toc-numbers" class="nav-link active" data-scroll-target="#numbers">Numbers</a>
  <ul class="collapse">
  <li><a href="#is_number" id="toc-is_number" class="nav-link" data-scroll-target="#is_number">is_number</a></li>
  </ul></li>
  <li><a href="#formatting-modifications-from-latex-to-obsidian.md-style-markdown" id="toc-formatting-modifications-from-latex-to-obsidian.md-style-markdown" class="nav-link" data-scroll-target="#formatting-modifications-from-latex-to-obsidian.md-style-markdown">Formatting modifications (from LaTeX to <code>Obsidian.md</code> style Markdown)</a>
  <ul class="collapse">
  <li><a href="#identify-macros-and-commands-to-replace" id="toc-identify-macros-and-commands-to-replace" class="nav-link" data-scroll-target="#identify-macros-and-commands-to-replace">Identify macros and commands to replace</a></li>
  <li><a href="#replace_command_in_text" id="toc-replace_command_in_text" class="nav-link" data-scroll-target="#replace_command_in_text">replace_command_in_text</a></li>
  <li><a href="#replace_commands_in_text" id="toc-replace_commands_in_text" class="nav-link" data-scroll-target="#replace_commands_in_text">replace_commands_in_text</a></li>
  <li><a href="#replace_commands_in_latex_document" id="toc-replace_commands_in_latex_document" class="nav-link" data-scroll-target="#replace_commands_in_latex_document">replace_commands_in_latex_document</a></li>
  <li><a href="#replace-commonly-used-syntax" id="toc-replace-commonly-used-syntax" class="nav-link" data-scroll-target="#replace-commonly-used-syntax">Replace commonly used syntax</a></li>
  <li><a href="#adjust_common_syntax_to_markdown" id="toc-adjust_common_syntax_to_markdown" class="nav-link" data-scroll-target="#adjust_common_syntax_to_markdown">adjust_common_syntax_to_markdown</a></li>
  </ul></li>
  <li><a href="#formatting-irregularities" id="toc-formatting-irregularities" class="nav-link" data-scroll-target="#formatting-irregularities">Formatting irregularities</a></li>
  <li><a href="#replace-input-and-include" id="toc-replace-input-and-include" class="nav-link" data-scroll-target="#replace-input-and-include">Replace <code>\input</code> and <code>\include</code></a>
  <ul class="collapse">
  <li><a href="#replace_input_and_include" id="toc-replace_input_and_include" class="nav-link" data-scroll-target="#replace_input_and_include">replace_input_and_include</a></li>
  </ul></li>
  <li><a href="#formatting-modifications-from-obsidian.md-style-markdown-to-latex" id="toc-formatting-modifications-from-obsidian.md-style-markdown-to-latex" class="nav-link" data-scroll-target="#formatting-modifications-from-obsidian.md-style-markdown-to-latex">Formatting modifications (from <code>Obsidian.md</code> style Markdown to LaTeX)</a>
  <ul class="collapse">
  <li><a href="#remove_dollar_signs_around_equationlike_envs" id="toc-remove_dollar_signs_around_equationlike_envs" class="nav-link" data-scroll-target="#remove_dollar_signs_around_equationlike_envs">remove_dollar_signs_around_equationlike_envs</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hyunjongkimmath/trouver/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">latex.formatting</h1>
</div>

<div>
  <div class="description">
    Adjust formatting for text from LaTeX files to be more usable by Markdown files for <code>Obsidian.md</code> (or vice versa)
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>See <code>helper.latex.macros_and_commands</code>, which contains some functions originally written for this module.</p>
<section id="numbers" class="level2">
<h2 class="anchored" data-anchor-id="numbers">Numbers</h2>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L32" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="is_number" class="level3">
<h3 class="anchored" data-anchor-id="is_number">is_number</h3>
<blockquote class="blockquote">
<pre><code> is_number (x:Union[float,int,complex,str])</code></pre>
</blockquote>
<p>*Return <code>True</code> if the input <code>x</code> represents a number.</p>
<p>This function is different from Python’s built-in <code>is_numeric</code> function, which returns <code>True</code> when all characters of a string are digits.*</p>
<div id="cell-5" class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_number(<span class="st">"3.45"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_number(<span class="dv">1</span> <span class="op">+</span> <span class="ot">5j</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_number(<span class="dv">5</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_number(<span class="fl">0.0</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_number(<span class="st">"3.43.55"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_number(<span class="st">"hie"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_number(<span class="st">"[^1]"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_number(<span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-6" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore.test <span class="im">import</span> test_eq</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.helper.tests <span class="im">import</span> _test_directory<span class="co"># , non_utf8_chars_in_file</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="formatting-modifications-from-latex-to-obsidian.md-style-markdown" class="level2">
<h2 class="anchored" data-anchor-id="formatting-modifications-from-latex-to-obsidian.md-style-markdown">Formatting modifications (from LaTeX to <code>Obsidian.md</code> style Markdown)</h2>
<section id="identify-macros-and-commands-to-replace" class="level3">
<h3 class="anchored" data-anchor-id="identify-macros-and-commands-to-replace">Identify macros and commands to replace</h3>
<p>Authors usually define a lot of custom commands and macros in their LaTeX files. Such customizations vary from author to author and most customized commands are not recognized by Obsidian.</p>
<p>See <code>nbs/_tests/latex_examples/commands_example/main.tex</code> for some examples of custom commands.</p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L55" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="replace_command_in_text" class="level3">
<h3 class="anchored" data-anchor-id="replace_command_in_text">replace_command_in_text</h3>
<blockquote class="blockquote">
<pre><code> replace_command_in_text (text:str,
                          command_tuple:tuple[str,int,typing.Optional[str]
                          ,str])</code></pre>
</blockquote>
<p>*Replaces all invocations of the specified command in <code>text</code> with the display text with the arguments used in the display text.</p>
<p>Assumes that ‘’, ‘’, ‘’, etc. are not part of the display text.*</p>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>text</td>
<td>str</td>
<td></td>
</tr>
<tr class="even">
<td>command_tuple</td>
<td>tuple</td>
<td>Consists of 1. the name of the custom command 2. the number of parameters 3. The default argument if specified or <code>None</code> otherwise, and 4. the display text of the command.</td>
</tr>
</tbody>
</table>
<div id="cell-11" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>command_tuple <span class="op">=</span> (<span class="st">'Sur'</span>, <span class="dv">0</span>, <span class="va">None</span>, <span class="vs">r'\mathrm</span><span class="sc">{Sur}</span><span class="vs">'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pattern = regex_pattern_detecting_command(command_tuple)</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'The number of element of $\Sur(\operatorname</span><span class="sc">{Cl}</span><span class="vs"> \mathcal</span><span class="sc">{O}</span><span class="vs">_L, A)$ is ... Perhaps $\Sur$ is nonempty.'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'The number of element of $\mathrm</span><span class="sc">{Sur}</span><span class="vs">(\operatorname</span><span class="sc">{Cl}</span><span class="vs"> \mathcal</span><span class="sc">{O}</span><span class="vs">_L, A)$ is ... Perhaps $\mathrm</span><span class="sc">{Sur}</span><span class="vs">$ is nonempty.'</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># One parameter</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>command_tuple <span class="op">=</span> (<span class="st">'field'</span>, <span class="dv">1</span>, <span class="va">None</span>, <span class="vs">r'\mathbb{#1}'</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># pattern = regex_pattern_detecting_command(command_tuple)</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'$\field</span><span class="sc">{Q}</span><span class="vs">$ is the field of rational numbers. $\field</span><span class="sc">{C}</span><span class="vs">$ is the field of complex numbers'</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'$\mathbb</span><span class="sc">{Q}</span><span class="vs">$ is the field of rational numbers. $\mathbb</span><span class="sc">{C}</span><span class="vs">$ is the field of complex numbers'</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple parameters</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>command_tuple <span class="op">=</span> (<span class="st">'mat'</span>, <span class="dv">4</span>, <span class="va">None</span>, <span class="vs">r'\left[\begin</span><span class="sc">{array}{cc}</span><span class="vs">#1 &amp; #2 \\ #3 &amp; #4\end</span><span class="sc">{array}</span><span class="vs">\right]'</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># pattern = regex_pattern_detecting_command(command_tuple)</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\mat</span><span class="sc">{{</span><span class="vs">123</span><span class="sc">}}</span><span class="vs">{asdfasdf</span><span class="sc">{}{}</span><span class="vs">}</span><span class="sc">{{{}}}{{</span><span class="vs">asdf}</span><span class="sc">{asdf}{}</span><span class="vs">}'</span> <span class="co"># This is a balanced str.</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'\left[\begin</span><span class="sc">{array}{cc}{123}</span><span class="vs"> &amp; asdfasdf</span><span class="sc">{}{}</span><span class="vs"> \\ </span><span class="sc">{{}}</span><span class="vs"> &amp; </span><span class="sc">{asdf}{asdf}{}</span><span class="vs">\end</span><span class="sc">{array}</span><span class="vs">\right]'</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple parameters, one of which is optional parameter</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>command_tuple <span class="op">=</span> (<span class="st">'plusbinomial'</span>, <span class="dv">3</span>, <span class="st">'2'</span>, <span class="vs">r'(#2 + #3)^#1'</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># pattern = regex_pattern_detecting_command(command_tuple)</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># When the optional parameter is used</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\plusbinomial</span><span class="sc">{x}{y}</span><span class="vs">'</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'(x + y)^2'</span>)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co"># When the optional parameter is not used</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\plusbinomial[4]</span><span class="sc">{x}{y}</span><span class="vs">'</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'(x + y)^4'</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co"># One parameter that is optional.</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>command_tuple <span class="op">=</span> (<span class="st">'greet'</span>, <span class="dv">1</span>, <span class="st">'world'</span>, <span class="vs">r'Hello #1!'</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co"># pattern = regex_pattern_detecting_command(command_tuple)</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co"># When the optional parameter is used</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\greet'</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'Hello world!'</span>)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="co"># When the optional parameter is not used</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\greet[govna]'</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'Hello govna!'</span>)</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="co"># In the following example, `\del` is a command defined as `\delta`.</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Any invocation `\delta` should NOT be replaced into `\deltata` should NOT be replaced into `\deltata`</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>command_tuple <span class="op">=</span> (<span class="vs">r'del'</span>, <span class="dv">0</span>, <span class="va">None</span>, <span class="vs">r'\delta'</span>)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a><span class="co"># pattern = regex_pattern_detecting_command(command_tuple)</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\del should be replaced. \delta should not.'</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>test_eq(replace_command_in_text(text, command_tuple), <span class="vs">r'\delta should be replaced. \delta should not.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L99" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="replace_commands_in_text" class="level3">
<h3 class="anchored" data-anchor-id="replace_commands_in_text">replace_commands_in_text</h3>
<blockquote class="blockquote">
<pre><code> replace_commands_in_text (text:str,
                           command_tuples:list[tuple[str,int,typing.Option
                           al[str],str]], repeat:int=1)</code></pre>
</blockquote>
<p>*Replaces all invocations of the specified commands in <code>text</code> with the display text with the arguments used in the display text.</p>
<p>Assumes that ‘’, ‘’, ‘’, etc. are not part of the display text.</p>
<p>If <code>repeat</code> is set to <code>-1</code>, then this function attempts to replace custom commands until no commands to replace are found. However, this might cause infinite loops for some documents.*</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>text</td>
<td>str</td>
<td></td>
<td>The text in which to replace the commands. This should not include the preamble of a latex document.</td>
</tr>
<tr class="even">
<td>command_tuples</td>
<td>list</td>
<td></td>
<td>An output of <a href="https://hyunjongkimmath.github.io/trouver/helper.latex.macros_and_commands.html#custom_commands"><code>custom_commands</code></a>. Each tuple Consists of 1. the name of the custom command 2. the number of parameters 3. The default argument if specified or <code>None</code> otherwise, and 4. the display text of the command.</td>
</tr>
<tr class="odd">
<td>repeat</td>
<td>int</td>
<td>1</td>
<td>The number of times to repeat replacing the commands throughout the text; note that some custom commands could be “nested”, i.e.&nbsp;the custom commands are defined in terms of other custom commands. Defaults to <code>1</code>, in which custom commands are replaced throughout the entire document once. If set to -1, then this function attempts to replace custom commands until no commands to replace are found.</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The <code>replace_comands_in_text</code> function replaces custom commands from a (the main part of) a LaTeX document.</p>
<div id="cell-14" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'''Here is a matrix over $\field</span><span class="sc">{Q}</span><span class="vs">$: $\mat{1/2}</span><span class="sc">{2}</span><span class="vs">{-1}{5/7}$.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="vs">           Note that it is not over $\field</span><span class="sc">{F}</span><span class="vs">_7$ and not over $\field</span><span class="sc">{F}</span><span class="vs">_2$.'''</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>command_tuples <span class="op">=</span> [</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'field'</span>, <span class="dv">1</span>, <span class="va">None</span>, <span class="vs">r'\mathbb{#1}'</span>),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'mat'</span>, <span class="dv">4</span>, <span class="va">None</span>, <span class="vs">r'\left[\begin</span><span class="sc">{array}{cc}</span><span class="vs">#1 &amp; #2 \\ #3 &amp; #4\end</span><span class="sc">{array}</span><span class="vs">\right]'</span>)]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> replace_commands_in_text(text, command_tuples)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output, </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="vs">r'''Here is a matrix over $\mathbb</span><span class="sc">{Q}</span><span class="vs">$: $\left[\begin</span><span class="sc">{array}{cc}</span><span class="vs">1/2 &amp; 2 \\ -1 &amp; 5/7\end</span><span class="sc">{array}</span><span class="vs">\right]$.</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="vs">           Note that it is not over $\mathbb</span><span class="sc">{F}</span><span class="vs">_7$ and not over $\mathbb</span><span class="sc">{F}</span><span class="vs">_2$.'''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that some writers define custom commands using other custom commands. By default, the <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_commands_in_text"><code>replace_commands_in_text</code></a> function replaces custom commands just once. In the following example, there is a custom command that is defined using another custom command and the function replace the “outer” custom command:</p>
<div id="cell-16" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: continue this example</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'''$\Gm$'''</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>command_tuples <span class="op">=</span> [</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'Gm'</span>, <span class="dv">0</span>, <span class="va">None</span>, <span class="vs">r'\bG_\mult'</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'bG'</span>, <span class="dv">0</span>, <span class="va">None</span>, <span class="vs">r'\mathbb</span><span class="sc">{G}</span><span class="vs">'</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'mult'</span>, <span class="dv">0</span>, <span class="va">None</span>, <span class="vs">r'\times'</span>),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> replace_commands_in_text(text, command_tuples)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>test_eq(sample_output, </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="vs">r'''$\mathbb</span><span class="sc">{G}</span><span class="vs">_\times$'''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L125" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="replace_commands_in_latex_document" class="level3">
<h3 class="anchored" data-anchor-id="replace_commands_in_latex_document">replace_commands_in_latex_document</h3>
<blockquote class="blockquote">
<pre><code> replace_commands_in_latex_document (document:str, repeat:int=1)</code></pre>
</blockquote>
<p>*Return the latex document (with the preamble) with invocations of custom commands/operators replaced with their display text.</p>
<p>Assumes that all custom commands and operators are defined in the preamble.</p>
<p>Assumes that, if commands with the same name are defined multiple times, only the finally defined command is used.</p>
<p>This function does not replace <code>\input</code>’s and <code>\include</code>’s with the code of the corresponding files. See <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_input_and_include"><code>replace_input_and_include</code></a>, which accomplishes this.</p>
<p>Even replaces these invocations incommented out text.*</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>document</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>repeat</td>
<td>int</td>
<td>1</td>
<td>The number of times to repeat replacing the commands throughout the text; note that some custom commands could be “nested”, i.e.&nbsp;the custom commands are defined in terms of other custom commands. Defaults to <code>1</code>, in which custom commands are replaced throughout the entire document once. If set to -1, then this function attempts to replace custom commands until no commands to replace are found. See also <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_commands_in_text"><code>replace_commands_in_text</code></a></td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div id="cell-18" class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'commands_recursive_example'</span> <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>document <span class="op">=</span> text_from_file(<span class="bu">file</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>commands_replaced <span class="op">=</span> replace_commands_in_latex_document(document)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> commands_replaced.startswith(<span class="vs">r'\begin</span><span class="sc">{document}</span><span class="vs">'</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> commands_replaced.endswith(<span class="vs">r'\end</span><span class="sc">{document}</span><span class="vs">'</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\S'</span> <span class="kw">not</span> <span class="kw">in</span> commands_replaced</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\mathbb</span><span class="sc">{S}</span><span class="vs">1'</span> <span class="kw">in</span> commands_replaced  <span class="co"># Note that $\S$ is defined twice in the preamble; only the latter definition is used.</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\field</span><span class="sc">{Q}</span><span class="vs">$'</span> <span class="kw">not</span> <span class="kw">in</span> commands_replaced</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\mathbb</span><span class="sc">{Q}</span><span class="vs">$'</span> <span class="kw">in</span> commands_replaced</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\commentedout'</span> <span class="kw">not</span> <span class="kw">in</span> commands_replaced</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'This is actually a command that is commented out, but it is also replaced!'</span> <span class="kw">in</span> commands_replaced</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(commands_replaced)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{document}

$\mathbb{S}1$
%$\mathbf{Q}$
%$\mathbf{Q}$
%This is actually a command that is commented out, but it is also replaced!
$\mathbb{Q}$

\end{document}</code></pre>
</div>
</div>
</section>
<section id="replace-commonly-used-syntax" class="level3">
<h3 class="anchored" data-anchor-id="replace-commonly-used-syntax">Replace commonly used syntax</h3>
<p>Obsidian does not compile all LaTeX syntax. For example</p>
<ul>
<li><code>\( \)</code> and <code>\[ \]</code> are not recognized as math mode delimiters.</li>
<li><code>\begin{equation} \end{equation}</code> and <code>\begin{align} \end{align}</code> (as well as their unnumbered versions with <code>*</code>) require surrounding <code>$$</code>.</li>
</ul>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#adjust_common_syntax_to_markdown"><code>adjust_common_syntax_to_markdown</code></a> function gives options to modify formatting from LaTeX text to fit markdown better.</p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L362" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="adjust_common_syntax_to_markdown" class="level3">
<h3 class="anchored" data-anchor-id="adjust_common_syntax_to_markdown">adjust_common_syntax_to_markdown</h3>
<blockquote class="blockquote">
<pre><code> adjust_common_syntax_to_markdown (text:str,
                                   options:list[str]=['math_mode_delimiter
                                   s', 'begin_end_equationlike_env', 'repl
                                   ace_backtick_and_apostrophe_quotes',
                                   'remove_comments',
                                   'inline_mathmode_to_own_paragraph',
                                   'merge_multiline_paragraph',
                                   'remove_xspace', 'remove_ensuremath'])</code></pre>
</blockquote>
<p>*Adjust some common syntax, such as math mode delimiters and equation/align environments, for Markdown.</p>
<p>Assumes that the tokens for math mode delimiters (e.g.&nbsp;<code>\( \)</code> and <code>\[ \]</code>) are not used otherwise.</p>
<p>The following lists admissible parameters in the <code>options</code> parameter and the effects that including them have:</p>
<ul>
<li><code>"math_mode_delimiters"</code>
<ul>
<li>Replace <code>\( \)</code> as math mode delimiters with <code>$ $</code>.</li>
<li>Replace <code>\[ \]</code> as math mode delimiters with <code>$$ $$</code>.</li>
</ul></li>
<li><code>"begin_end_equationlike_env"</code>
<ul>
<li>Replace <code>\\begin{...} \end{...}</code> with <code>$$\\begin{...} \end{...}$$</code> and <code>\\begin{...*} \end{...*}</code> with <code>$$\\begin{...*} \end{...*}$$</code> for the following environments:
<ul>
<li><code>align</code></li>
<li><code>displaymath</code></li>
<li><code>equation</code></li>
<li><code>eqnarray</code></li>
</ul></li>
</ul></li>
<li><code>"replace_backtick_and_apostrophe_quotes"</code>
<ul>
<li>replace <code>`` ''</code> as quotation delimiters with <code>" "</code>.</li>
</ul></li>
<li><code>"remove_comments"</code>
<ul>
<li>remove LaTeX comments.</li>
</ul></li>
<li><code>"inline_mathmode_to_own_paragraph"</code>
<ul>
<li>Make it so that each inline-math mode string (of the form <code>$$...$$</code>) has at least one newline before and after it. Also delete one blank space character <code>' '</code> from the text immediately before and after the in-line math mode string if they exist.</li>
</ul></li>
<li><code>"merge_multiline_paragraph"</code>
<ul>
<li>Some writers will type paragraphs in multiple lines, likely because their LaTeX editor of choice does not wrap text within a single line. Including this option merges “normal” paragraphs into a single line.
<ul>
<li>Inline-mathmode text are not affected by this option.</li>
</ul></li>
</ul></li>
<li><code>"remove_xspace"</code>
<ul>
<li>Some writiers include <code>\\xspace</code> in their code (such as in their custom commands) Obsidian does not render these.</li>
</ul></li>
<li><code>"remove_ensuremath"</code>
<ul>
<li>Some writiers include <code>\\ensuremath</code> in their code (such as in their custom commands) Obsidian does not render these.*</li>
</ul></li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>text</td>
<td>str</td>
<td></td>
<td>The LaTeX code to adjust to Markdown.</td>
</tr>
<tr class="even">
<td>options</td>
<td>list</td>
<td>[‘math_mode_delimiters’, ‘begin_end_equationlike_env’, ‘replace_backtick_and_apostrophe_quotes’, ‘remove_comments’, ‘inline_mathmode_to_own_paragraph’, ‘merge_multiline_paragraph’, ‘remove_xspace’, ‘remove_ensuremath’]</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td></td>
<td><strong>Each <code>str</code> specifies what formatting should be done.</strong></td>
</tr>
</tbody>
</table>
<div id="cell-22" class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'''</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="vs">are cellular and the DG category one gets by replacing the</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="vs">topological spaces $</span><span class="sc">{Mor}</span><span class="vs">_</span><span class="sc">{{</span><span class="vs">\mathcal K}_</span><span class="sc">{{</span><span class="vs">top</span><span class="sc">}}</span><span class="vs">}(X_i,X_j)$ by their</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="vs">cellular chain complexes equals ${\mathcal K}$.</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="vs">'''</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(_merge_multilines(text))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
are cellular and the DG category one gets by replacing the topological spaces ${Mor}_{{\mathcal K}_{{top}}}(X_i,X_j)$ by their cellular chain complexes equals ${\mathcal K}$.
</code></pre>
</div>
</div>
<p>Here is a basic example:</p>
<div id="cell-24" class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'''I want to talk about \(\mathbb</span><span class="sc">{Z}</span><span class="vs">[i]\). It is the ring whose elements are of the form $a+bi$ where $a,b \in \mathhbb</span><span class="sc">{Z}</span><span class="vs">$.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="vs">It has a multiplication structure:</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="vs">\[ (a+bi) (c+di) = (ac-bd) + (ad+bc)i.\]</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="vs">Here is an equation:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{equation}</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="vs">5+7 = 12</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{equation}</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="vs">Here is another:</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin{equation*}</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="vs">5+6 = 11</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="vs">\end{equation*}</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="vs">Here is an align:</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{align}</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="vs">5+7 = 12</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{align}</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="vs">Here is another:</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin{align*}</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="vs">5+6 = 11</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="vs">\end{align*}</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{eqnarray}</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="vs">asdf</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{eqnarray}</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="vs">\begin</span><span class="sc">{displaymath}</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="vs">asdf</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="vs">\end</span><span class="sc">{displaymath}</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="vs">asdf ``hello''</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="vs">``a multiline</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="vs">quotation'' % Sneak comment!</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="vs">'''</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>sample_output <span class="op">=</span> adjust_common_syntax_to_markdown(text)</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sample_output)</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\('</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\)'</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\['</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\]'</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'$$\begin</span><span class="sc">{align}</span><span class="vs">'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\end</span><span class="sc">{align}</span><span class="vs">$$'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'$$\begin</span><span class="sc">{equation}</span><span class="vs">'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\end</span><span class="sc">{equation}</span><span class="vs">$$'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'$$\begin{align*}'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\end{align*}$$'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'$$\begin{equation*}'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\end{equation*}$$'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'$$\begin</span><span class="sc">{eqnarray}</span><span class="vs">'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\end</span><span class="sc">{eqnarray}</span><span class="vs">$$'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'$$\begin</span><span class="sc">{displaymath}</span><span class="vs">'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'\end</span><span class="sc">{displaymath}</span><span class="vs">$$'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r"``hello''"</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'"hello"'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'"a multiline quotation"'</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">' "a multiline quotation"'</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'``'</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'%'</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="vs">r'Sneak comment'</span> <span class="kw">not</span> <span class="kw">in</span> sample_output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I want to talk about $\mathbb{Z}[i]$. It is the ring whose elements are of the form $a+bi$ where $a,b \in \mathhbb{Z}$. It has a multiplication structure:

$$ (a+bi) (c+di) = (ac-bd) + (ad+bc)i.$$

Here is an equation:

$$\begin{equation}
5+7 = 12
\end{equation}$$

Here is another:

$$\begin{equation*}
5+6 = 11
\end{equation*}$$

Here is an align:

$$\begin{align}
5+7 = 12
\end{align}$$

Here is another:

$$\begin{align*}
5+6 = 11
\end{align*}$$

$$\begin{eqnarray}
asdf
\end{eqnarray}$$

$$\begin{displaymath}
asdf
\end{displaymath}$$

asdf "hello"

"a multiline quotation" 

</code></pre>
</div>
</div>
<p>We test the removal of <code>\xspace</code> and <code>\ensuremath</code></p>
<div id="cell-26" class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="vs">r'\ensuremath{\operatorname</span><span class="sc">{GL}</span><span class="vs">_n}\xspace'</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>test_eq(adjust_common_syntax_to_markdown(text), <span class="st">'</span><span class="ch">\\</span><span class="st">operatorname</span><span class="sc">{GL}</span><span class="st">_n'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="formatting-irregularities" class="level2">
<h2 class="anchored" data-anchor-id="formatting-irregularities">Formatting irregularities</h2>
<p>Since writers use their own formatting for LaTeX documents, there will be formatting practices that the functions in this module do not account for or do not fully account for. The following parses the LaTeX document to warn the user of formatting choices that <code>trouver</code> does not account for.</p>
<div id="cell-30" class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> warn_for_formatting_irregularities(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>        document: <span class="bu">str</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        ):</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: Go through assumptions made by various functions</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: custom command for section</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: custom command is invoked, but does not match explicit formatting, e.g. {\tilde M}</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: warn about \docuemntclass; the most common are `amsart` and `article`, but some writers will use other classes, such as `standalone, svmult, icmart, compositio`</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: warn about \newcounter, cf https://www.overleaf.com/learn/latex/Counters#LaTeX_commands_for_working_with_counters.</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: warn about newcomand and DeclareOperator being declared as custom commands of their own. cf. arinkin_gaitsgory_sscsglc</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: warn about section/subsection/subsubsetion being wrapped around some custom commands.</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="replace-input-and-include" class="level2">
<h2 class="anchored" data-anchor-id="replace-input-and-include">Replace <code>\input</code> and <code>\include</code></h2>
<p>Writers oftentimes opt to use separate their writings in multiple parts and then incorporate these parts using <code>\input</code> or <code>\include</code>. The following functions account for these to put together all the latex code in one place</p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L437" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="replace_input_and_include" class="level3">
<h3 class="anchored" data-anchor-id="replace_input_and_include">replace_input_and_include</h3>
<blockquote class="blockquote">
<pre><code> replace_input_and_include (document:str, dir:os.PathLike,
                            commands:list[tuple[str,int,typing.Optional[st
                            r],str]], repeat_replacing_commands:int=-1)</code></pre>
</blockquote>
<p><em>Sequentially replace invocations of <code>\input</code> or <code>\include</code> with the contents of the corresponding files, updating and applying custom commands as needed.</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>document</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>dir</td>
<td>PathLike</td>
<td></td>
<td>The directory containing the <code>.tex</code> files which are to be included.</td>
</tr>
<tr class="odd">
<td>commands</td>
<td>list</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>repeat_replacing_commands</td>
<td>int</td>
<td>-1</td>
<td>this is passed as the <code>repeat</code> argument into the invocation of <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#replace_commands_in_text"><code>replace_commands_in_text</code></a>.</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The following is a basic example</p>
<div id="cell-35" class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>latex_folder <span class="op">=</span> _test_directory() <span class="op">/</span> <span class="st">'latex_examples'</span> <span class="op">/</span> <span class="st">'latex_example_with_inputs_and_includes'</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>main_file <span class="op">=</span> latex_folder <span class="op">/</span> <span class="st">'main.tex'</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(main_file, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    document <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>preamble, body <span class="op">=</span> divide_preamble(document)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>commands <span class="op">=</span> custom_commands(preamble)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> replace_input_and_include(body, latex_folder, commands)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-36" class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{document}

\section*{\underline{Introduction}}
This is the main document. We use {\bf custom commands} here.

% This file defines new commands


Now we can use {\it input command}.


\section*{\underline{Chapter 1}}

This is content from chapter 1. We define {\large new commands} here too.

This function is related to the main document


Let's use {\large include command} from chapter1.


\subsection{A Subsection}

This content is from a subsection file. We use {\small\textsc{local commands}} here.

We also use {\bf main document commands} and {\it input file commands}.


Finally, we use {\small\textsc{another input}}.

\end{document}
</code></pre>
</div>
</div>
</section>
</section>
<section id="formatting-modifications-from-obsidian.md-style-markdown-to-latex" class="level2">
<h2 class="anchored" data-anchor-id="formatting-modifications-from-obsidian.md-style-markdown-to-latex">Formatting modifications (from <code>Obsidian.md</code> style Markdown to LaTeX)</h2>
<p>As written previously displaymath/equationlike environments (e.g.&nbsp;<code>\begin{equation} \end{equation}</code>) used in Markdown require surrounding <code>$$</code>.</p>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#remove_dollar_signs_around_equationlike_envs"><code>remove_dollar_signs_around_equationlike_envs</code></a> function is one function used to revert such markdown-formatted code into code better suited for LaTeX.</p>
<hr>
<p><a href="https://github.com/hyunjongkimmath/trouver/blob/main/trouver/latex/formatting.py#L499" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="remove_dollar_signs_around_equationlike_envs" class="level3">
<h3 class="anchored" data-anchor-id="remove_dollar_signs_around_equationlike_envs">remove_dollar_signs_around_equationlike_envs</h3>
<blockquote class="blockquote">
<pre><code> remove_dollar_signs_around_equationlike_envs (text:str)</code></pre>
</blockquote>
<p>*Remove dollar signs preceding and following displaymath/equation-like environments.</p>
<p>Such dollar signs are in place to make the code renderable as Markdown code in Obsidian.md.</p>
<p>This function is essentially the reverse of <a href="https://hyunjongkimmath.github.io/trouver/latex.formatting.html#_replace_equationlike_envs"><code>_replace_equationlike_envs</code></a>.*</p>
<div id="cell-40" class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> remove_dollar_signs_around_equationlike_envs(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="vs">r'''$$\begin{align*}asdf\end{align*}$$'''</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(output)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'$'</span> <span class="kw">not</span> <span class="kw">in</span> output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{align*}asdf\end{align*}</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hyunjongkimmath\.github\.io\/trouver");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hyunjongkimmath/trouver/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>