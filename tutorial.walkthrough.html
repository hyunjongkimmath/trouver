<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An end-to-end walkthrough on setting up a trouver workflow">

<title>tutorial.walkthrough – trouver</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ebc57992554dae5230fa85c1bd5a55fa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="tutorial.walkthrough – trouver">
<meta property="og:description" content="An end-to-end walkthrough on setting up a trouver workflow">
<meta property="og:image" content="https://hyunjongkimmath.github.io/trouver/images/tutorial_walkthrough_60_cursor_hover_over_link_to_preview_note.png">
<meta property="og:site_name" content="trouver">
<meta property="og:image:alt" content="Hovering the cursor above a link shows a preview of the linked note">
<meta property="og:image:height" content="780">
<meta property="og:image:width" content="690">
<meta name="twitter:title" content="tutorial.walkthrough – trouver">
<meta name="twitter:description" content="An end-to-end walkthrough on setting up a trouver workflow">
<meta name="twitter:image" content="https://hyunjongkimmath.github.io/trouver/images/tutorial_walkthrough_60_cursor_hover_over_link_to_preview_note.png">
<meta name="twitter:image:alt" content="Hovering the cursor above a link shows a preview of the linked note">
<meta name="twitter:image-height" content="780">
<meta name="twitter:image-width" content="690">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">trouver</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tutorial.walkthrough.html">tutorial.walkthrough</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">trouver</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.vault.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.vault</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.markdown.file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.markdown.file</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.markdown.heading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.markdown.heading</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.links</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.tags.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.tags</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.footnotes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.footnotes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.reference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obisidian.personal.authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.authors</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.index_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.index_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.note_type.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.note_type</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.convert.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.convert</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.notations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.note_processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.note_processing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.information_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.information_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learninig.database_update.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.database_update</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.information_note_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.information_note_types</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notation_identification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obisidian.personal.machine_learning.notation_identification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.notation_summarization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.notation_summarization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.tokenize.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.tokenize</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.vault.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.vault</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.divide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.divide</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.folders</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.formatting</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./latex.preamble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">latex.preamble</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.comments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex.comments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.machine_learning.notation_linking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.notation_linking</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.definition_and_notation_naming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.definition_and_notation_naming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.tests</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.regex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.definition_and_notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.definition_and_notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.numbers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./41_helper.accented_characters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">41_helper.accented_characters.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.date_and_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.date_and_time</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./43_helper.topological_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topological sort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./44_helper.alphabet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alphabet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.path_accepted_string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.path_accepted_string</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./46_helper.files_and_folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Files and folders</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.latex.macros_and_commands.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.latex.macros_and_commands</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.arxiv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.arxiv</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.vault_and_links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.vault_and_links</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.parse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.notation.parse</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.notation.in_standard_information_note.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.notation.in_standard_information_note</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.obsidian.personal.machine_learning.note_division.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">markdown.obsidian.personal.machine_learning.note_division</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app.__init__.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>app.__init__</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helper.packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./todo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TODO list</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_to.install_trouver.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">how_to.install_trouver</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_to.train_ml_model.fastai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">how_to.train_ml_model.fastai</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">release_notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./star.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">helper.packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.concise_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tutorial.concise_code</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.walkthrough.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">tutorial.walkthrough</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./unused.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using_regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Regex</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#installations" id="toc-installations" class="nav-link active" data-scroll-target="#installations">Installations</a></li>
  <li><a href="#creating-an-obsidian.md-vault" id="toc-creating-an-obsidian.md-vault" class="nav-link" data-scroll-target="#creating-an-obsidian.md-vault">Creating an <code>Obsidian.md</code> vault</a></li>
  <li><a href="#obsidian.md-functionalities" id="toc-obsidian.md-functionalities" class="nav-link" data-scroll-target="#obsidian.md-functionalities"><code>Obsidian.md</code> functionalities</a></li>
  <li><a href="#optional-adding-some-files-and-folders-for-formatting-for-trouver" id="toc-optional-adding-some-files-and-folders-for-formatting-for-trouver" class="nav-link" data-scroll-target="#optional-adding-some-files-and-folders-for-formatting-for-trouver">Optional: Adding some files and folders for formatting for <code>trouver</code></a></li>
  <li><a href="#dividing-a-latex-file" id="toc-dividing-a-latex-file" class="nav-link" data-scroll-target="#dividing-a-latex-file">Dividing a LaTeX file</a>
  <ul class="collapse">
  <li><a href="#obtaining-an-arxiv-source-file-using-trouver" id="toc-obtaining-an-arxiv-source-file-using-trouver" class="nav-link" data-scroll-target="#obtaining-an-arxiv-source-file-using-trouver">Obtaining an arXiv source file using <code>trouver</code></a></li>
  </ul></li>
  <li><a href="#using-machine-learning-models" id="toc-using-machine-learning-models" class="nav-link" data-scroll-target="#using-machine-learning-models">Using Machine learning models</a></li>
  <li><a href="#applications-of-the-notation-notes" id="toc-applications-of-the-notation-notes" class="nav-link" data-scroll-target="#applications-of-the-notation-notes">Applications of the notation notes</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hyunjongkimmath/trouver/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">tutorial.walkthrough</h1>
</div>

<div>
  <div class="description">
    An end-to-end walkthrough on setting up a <code>trouver</code> workflow
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>In this tutorial, we describe a recommended setup for using <code>trouver</code>. Note that the exact details and consequences of this walkthrough may change as <code>trouver</code> or any related software changes; the current version of this walkthrough was written on 12/24/2024 and was written based on <code>trouver</code> version 1.0.0.</p>
<blockquote class="blockquote">
<p><strong>Warning</strong> A previous version of this tutorial was written around March 2023. Since then, <code>trouver</code> has had significant updates and the following tutorial may not fully reflect those changes. If parts of this tutorial seem erroneous or not up-to-date, please let us know by <a href="https://github.com/hyunjongkimmath/trouver/issues/new">reporting the issue on the GitHub repo</a>.</p>
<p>Moreover, user experience with this tutorial may vary — in particular the specific details/outputs in the examples used in this tutorial may not be the same as those that you get.</p>
</blockquote>
<p>See also <a href="tutorial.concise_code.html">tutorial.concise_code</a> for a concise version of the code used in this tutorial.</p>
<section id="installations" class="level2">
<h2 class="anchored" data-anchor-id="installations">Installations</h2>
<p>See also <a href="`how_to.install_trouver.html`"><code>how_to.install_trouver</code></a>.</p>
<p>Go to a command-line (e.g.&nbsp;<code>cmd</code> on Windows, <code>Terminal</code> on Linux) and install <code>trouver</code> with <code>pip</code>:</p>
<pre class="terminal"><code>pip install trouver</code></pre>
<p>Install JupyterLab.</p>
<pre class="terminal"><code>pip install jupyterlab</code></pre>
<p>Once installed, launch JupyterLab with</p>
<pre class="terminal"><code>jupyter-lab</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/tutorial_walkthrough_1_jupyterlab_launch.png" class="img-fluid figure-img"></p>
<figcaption>This is supposed to be an image of JupyterLab being launched</figcaption>
</figure>
</div>
<p>Alternatively, install the classic Jupyter Notebook via</p>
<pre class="terminal"><code>pip install notebook</code></pre>
<p>and launch with</p>
<pre class="terminal"><code>jupyter notebook</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/tutorial_walkthrough_2_classic_notebook_launch.png" class="img-fluid figure-img"></p>
<figcaption>This is supposed to be an image of classic Jupyter notebook being launched</figcaption>
</figure>
</div>
<p>or use <code>Visual Studio Code</code> to view and edit notebooks.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/tutorial_walkthrough_3_vscode.png" class="img-fluid figure-img"></p>
<figcaption>This is an image of Visual Studio Code</figcaption>
</figure>
</div>
<p>Install <a href="https://obsidian.md/"><code>Obsidian.md</code></a>. <code>Obsidian.md</code> is a note taking software that, among other functionalities, makes it easy to link between notes.</p>
<p>Note that the most important basic functionalities in <code>Obsidian.md</code> are free.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_4_obsidian_md_website.png" alt="This is an image of the Obsidian.md website" width="400" class="center">
</p>
<p>The following window pops up upon launching Obsidian.md</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_5_obsidian_md_launch.png" alt="This is an image of Obsidian.md upon launch" width="400" class="center">
</p>
<blockquote class="blockquote">
<p><strong>Warning</strong> At the time of this writing, <code>trouver</code> has not been tested on MacOS extensively. We have also found that running the latest Python versions in Jupyter notebooks on modern MacOS machines (e.g.&nbsp;those using the M1 processor and in particular the arm64 architecture) lead to some issues. cf.&nbsp;stackexchange discussions such as</p>
<pre><code>- https://apple.stackexchange.com/questions/436801/m1-mac-mach-o-file-but-is-an-incompatible-architecture-have-x86-64-need-a
- https://stackoverflow.com/questions/71502583/jupiter-wont-launch-from-terminal-on-m1-macbook.</code></pre>
<p>For MacOS users, it may be useful to go through this tutorial/walkthrough using a Python console or using the <a href="https://drive.google.com/file/d/12HnwmnSSB5OgDjP3T4V-FNMGMEDOPAF5/view?usp=share_link">Google Colab Notebook</a> for this tutorial/walkthrough. <!--- > One can also try running `trouver` on an older version of Python (e.g. version 3.7) to avoid these Jupyter problems. In this case, one may need to install some additional Python packages, such as [`graphlib-backport`](https://pypi.org/project/graphlib-backport/). --></p>
</blockquote>
</section>
<section id="creating-an-obsidian.md-vault" class="level2">
<h2 class="anchored" data-anchor-id="creating-an-obsidian.md-vault">Creating an <code>Obsidian.md</code> vault</h2>
<p>An Obsidian vault is a folder where Obsidian stores your notes as well as setting files, CSS, trash folder, and any sub-folders, notes, and attachments you add yourself, cf.&nbsp;<a href="https://forum.obsidian.md/t/what-exactly-is-a-vault/4369/2">“What exactly is a vault?”</a>.</p>
<p>Let us make a new <code>Obsidian.md</code> vault. For this example, we call the vault <code>example_math_vault</code> and create it in a local folder called <code>trouver_walkthrough_folder</code>. Doing so creates a folder <code>example_math_vault</code> in <code>trouver_walkthrough_folder</code>, i.e.&nbsp;creates the folder <code>trouver_walkthrough_folder/example_math_vault</code>:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_6_obsidian_make_new_vault.png" alt="This is an image of creating a new `Obsidian.md` vault" width="400" class="center">
</p>
<p>Upon creating the vault, <code>Obsidian.md</code> will open the vault:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_7_created_vault.png" alt="This is an image of the newly created `Obsidian.md` vault" width="400" class="center">
</p>
</section>
<section id="obsidian.md-functionalities" class="level2">
<h2 class="anchored" data-anchor-id="obsidian.md-functionalities"><code>Obsidian.md</code> functionalities</h2>
<section id="creating-files-and-folders-in-an-obsidian-vault" class="level4">
<h4 class="anchored" data-anchor-id="creating-files-and-folders-in-an-obsidian-vault">Creating files and folders in an Obsidian vault</h4>
<p>By and large, one can make files and folders fairly liberally in one’s own Obsidian vault (note, however, that Obsidian can experience significant lags on vaults with many notes, say on the order of 10,000, depending on the machine running it).</p>
<p>For example, let us create a new note by clicking on the “New note” icon in the left pane:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_8_new_note_button.png" alt="Click on the new note button" width="400" class="center">
</p>
<p>Let us name the new note <code>_index</code>:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_9_index_note_made.png" alt="Rename the new note from `Untitled` to `_index`" width="400" class="center">
</p>
<p>Let us check that a new file named <code>_index.md</code> has been created in the computer. To open the directory that the file is in, it is convenient to use the <code>Show in system explorer</code> command. To use this command, open the <a href="https://help.obsidian.md/Plugins/Command+palette"><code>Command Palette</code></a> by either clicking on the <code>Open command palette</code> icon in the left pane</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_9_index_note_made.png" alt="Rename the new note from `Untitled` to `_index`" width="400" class="center">
</p>
<p>or by using the <a href="https://forum.obsidian.md/t/obsidian-hotkeys-favorites-and-best-practices/12125">Hotkey</a>/keyboard shortcut for the <code>Open command palette</code> command. By default, this shortcut is either <code>Ctrl + p</code> or <code>Cmd + p</code> (or the appropriate variant for your computer).</p>
<p>Either way, the command palette should open up.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_11_command_palette_open.png" alt="The command palette" width="400" class="center">
</p>
<p>Type the word <code>system</code> so that the command palette shows that <code>Show in system explorer</code> command.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_12_command_palette_system_explorer_command.png" alt="The show in system explorer command" width="400" class="center">
</p>
<p>Select this command to open the directory containing the <code>_index.md</code> file, which should be the root directory of the vault:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_13_system_explorer.png" alt="See the `_index.md` file created in the root directory of the vault" width="400" class="center">
</p>
</section>
<section id="links-and-editing-files" class="level4">
<h4 class="anchored" data-anchor-id="links-and-editing-files">Links and editing files</h4>
<p>Let us now create some more files and folders. Note that one can create files and folders for an Obsidian vault without using Obsidian. In particular, one can create such files and folders in the computer’s default file system.</p>
<p>Let us create a folder named <code>algebra</code> and a folder named <code>number_theory</code>. Let us also create files named <code>_index_algebra.md</code> and <code>_index_number_theory.md</code> in these two folders respectively (make sure that the file extensions are <code>.md</code>).</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_14_algebra_and_number_theory_folders.png" alt="We created an `algebra` and a `number theory` folder." width="400" class="center">
</p>
<p>Going back to <code>Obsidian</code>, note that <code>Osidian</code> recognizes that these files and folders have been created:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_15_obsidian_sees_new_files_and_folders.png" alt="Obsidian recognizes the newly created files and folders" width="400" class="center">
</p>
<p>Now let us edit the <code>_index.md</code> file within Obsidian. In the file, start typing <code>[[_index_algebra]]</code>. Note that Obsidian makes some autocomplete suggestions when we do so:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_16_obsidian_autocompletes_links.png" alt="Obsidian autocompletes links" width="400" class="center">
</p>
<p>What we have done is that we have created a link within the Obsidian vault! This is one of Obsidian’s highlighted features - one can make and access links fairly easily within an Obsidian vault. Click on the link to go to the <code>_index_algebra</code> note:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_17_obsidian_link_click.png" alt="Clicking on an Obsidian link" width="400" class="center">
</p>
<p>Let us start typing the following text:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Algebra is really fun. Here are some things that I want to learn about </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The Galois group $\operatorname{Gal}(L/K)$ of a Galois field extension</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$\mathbb{A}^1$-homotopy theory.</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>etc.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that there are some LaTeX strings in this text and that Obsidian renders such text as so:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_18_obsidian_markdown_typing.png" alt="Obsidian renders math" width="400" class="center">
</p>
<p>Some users may prefer to use the <code>Source mode</code> as the Default editing mode, as opposed to <code>Live Preview</code>. To change this setting, go to <code>Settings &gt; Editor &gt; Default editing mode</code>:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_19_source_editing_mode.png" alt="Change the default editing mode to `Source mode`" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_20_editing_mode_with_source_mode.png" alt="This is what the editing mode looks like in `Source mode`" width="400" class="center">
</p>
<p>On can quickly toggle between the editing view and reading view with the <code>Toggle reading/editing view</code> command (which has the Hotkey <code>Ctrl + e</code> or <code>Cmd + e</code> by default):</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_20_reading_view.png" alt="Reading view" width="400" class="center">
</p>
</section>
<section id="quick-switcher" class="level4">
<h4 class="anchored" data-anchor-id="quick-switcher">Quick Switcher</h4>
<p>In Obsidian, one can search and open notes by name. Open the <a href="https://help.obsidian.md/Plugins/Quick+switcher"><code>Quick switcher</code></a> either with the <code>Open quick switcher</code> icon in the left pane or with the Hotkey <code>Ctrl + o</code> or <code>Cmd + o</code>:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_21_quick_switcher.png" alt="Open quick switcher icon" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_22_quick_swticher_open.png" alt="The quick switcher" width="400" class="center">
</p>
<p>Start typing <code>_index_number_theory</code>. Note that the quick switcher autocompletes note names. Open the <code>_index_number_theory</code> note by selecting it in the quick switcher:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_23_quick_swticher_typing.png" alt="Type in the name of a note to get the quick switcher to open it" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_24_note_opened_with_quick_swticher.png" alt="Type in the name of a note to get the quick switcher to open it" width="400" class="center">
</p>
<p>One can add <a href="https://help.obsidian.md/Linking+notes+and+files/Aliases">“aliases”</a> to Obsidian notes to make them better searchable.</p>
</section>
<section id="more-obsidian-features" class="level4">
<h4 class="anchored" data-anchor-id="more-obsidian-features">More Obsidian features</h4>
<p>Obsidian has quite a lot of features that make Obsidian vaults highly useful and customizable. In fact, there are quite a lot of features of Obsidian that the author of <code>trouver</code> regularly uses:</p>
<ul>
<li>Vim keybindings</li>
<li>CSS Styles</li>
<li>Plugins</li>
<li>etc.</li>
</ul>
<p>See the <a href="https://help.obsidian.md/Obsidian/Index"><code>Obsidian Help</code></a> vault online for more information on Obsidian’s features.</p>
</section>
</section>
<section id="optional-adding-some-files-and-folders-for-formatting-for-trouver" class="level2">
<h2 class="anchored" data-anchor-id="optional-adding-some-files-and-folders-for-formatting-for-trouver">Optional: Adding some files and folders for formatting for <code>trouver</code></h2>
<p>For the purposes of using <code>trouver</code>, we recommend adding a few more folders. We will need a <code>_references</code> folder and a <code>_templates</code> folder and multiple subfolders. For convenience, copy the <code>_references</code> and <code>_templates</code> folders from the <code>nbs/_tests/empty_model_vault</code> directory of the <code>trouver</code> GitHub repository:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_25_references_and_templates_folders_copied_over.png" alt="Type in the name of a note to get the quick switcher to open it" width="400" class="center">
</p>
<p>Each of these folders have subfolders <code>A-E</code>, <code>F-J</code>, <code>K-O</code>, <code>P-T</code>, and <code>U-Z</code> and subsubfolders corresponding to each letter in the English alphabet. These are for organization. There are also multiple files named <code>README.md</code> in this subsubfolders. Feel free to delete them.</p>
<section id="rationale-for-the-_references-and-_templates-folders" class="level4">
<h4 class="anchored" data-anchor-id="rationale-for-the-_references-and-_templates-folders">Rationale for the <code>_references</code> and <code>_templates</code> folders</h4>
<p>The basic file organization philosophy for <code>trouver</code> is that each mathematical reference should have a dedicated folder in a vault and mathematical (standard information) notes derived from the mathematical reference should belong to this folder (or one of its subfolders/subsubfolders/etc).</p>
<p>The <code>_references</code> folder contains notes that contain information about each mathematical references, e.g.&nbsp;bibliographical information, where to find the reference (say on the arxiv), any other personal notes about the reference. The reference notes will be embedded in the standard information notes so that these information do not have to be manually replicated from standard information note to standard information note.</p>
<p>The <code>_templates</code> folder contains notes which serve as templates for the standard information notes for each reference.</p>
</section>
</section>
<section id="dividing-a-latex-file" class="level2">
<h2 class="anchored" data-anchor-id="dividing-a-latex-file">Dividing a LaTeX file</h2>
<p>The <a href="helper.arxiv.html">helper.arxiv</a> module of <code>trouver</code> can use the arXiv API to download the source code of an arXiv article. Moreover, <code>trouver</code> can (attempt to) divide a LaTeX document into not-too-long parts in an Obsidian vault.</p>
<blockquote class="blockquote">
<p>See <a href="index.html#special-thanks">index</a> for an acknowledgement of arXiv.</p>
</blockquote>
<section id="obtaining-an-arxiv-source-file-using-trouver" class="level3">
<h3 class="anchored" data-anchor-id="obtaining-an-arxiv-source-file-using-trouver">Obtaining an arXiv source file using <code>trouver</code></h3>
<p>One fortunate state of mathematics is that many manuscripts are made publicly available on <a href="https://arxiv.org/">arxiv.org</a> before they are formally published. In fact, the source code to many of these manuscripts are also generally available on the arxiv.</p>
<p>As an example, we download the source code for <a href="https://arxiv.org/abs/2106.10586">a paper written by the creator of trouver with a collaborator</a> (See <a href="index.html#special-thanks"><code>Special Thanks</code></a> for an acknowledgement to <a href="https://sites.google.com/wisc.edu/spark483">Sun Woo Park</a>, the collaborator in question, for permitting this paper to be presented for examples in <code>trouver</code>’s documentation).</p>
<div id="cell-25" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.helper.files_and_folders <span class="im">import</span> get_download_path</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.latex <span class="im">import</span> find_main_latex_file</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.helper.arxiv <span class="im">import</span> arxiv_id, arxiv_search, download_from_results, extract_last_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-26" class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://arxiv.org/abs/2106.10586"</span> <span class="co"># Replace this with the url </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> <span class="bu">list</span>(arxiv_search(arxiv_id(url)))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>latex_dir <span class="op">=</span> Path(get_download_path()) <span class="co"># Replace this with the path that you can to download the source file in; e.g. r'C:\Users\&lt;your user name&gt;' or r'/home/usr'</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>downloaded_path <span class="op">=</span> download_from_results(results, latex_dir, source<span class="op">=</span><span class="va">True</span>)[<span class="dv">0</span>]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(downloaded_path)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>reference <span class="op">=</span> downloaded_path.name</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>author_full_names <span class="op">=</span> [author.name <span class="cf">for</span> author <span class="kw">in</span> results[<span class="dv">0</span>].authors]</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>author_names <span class="op">=</span> extract_last_names(author_full_names)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>latex_file <span class="op">=</span> find_main_latex_file(downloaded_path)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(latex_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>C:\Users\hyunj\Downloads\kim_park_gm1dcmbmc
C:\Users\hyunj\Downloads\kim_park_gm1dcmbmc\2106.10586v4.Global___mathbb_A__1__degrees_of_covering_maps_between_modular_curves.tex</code></pre>
</div>
</div>
<section id="manual-download-an-arxiv-file" class="level4">
<h4 class="anchored" data-anchor-id="manual-download-an-arxiv-file">(Manual) Download an arXiv file</h4>
<p>Alternatively, if the code <a href="#obtaining-an-arxiv-source-file-using-trouver">above</a> does not work for some reason, one can manually download the source code.</p>
<p>As an example, let us go to the <a href="https://arxiv.org/abs/2106.10586">arxiv page for a paper written by the creator of trouver with a collaborator</a>.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_26_arxiv_page.png" alt="The webpage for an arxiv article" width="400" class="center">
</p>
<p>On the right, beneath <code>Download:</code>, note that there is a link titled <code>Other formats</code>. Access the link to got to the <code>Format selector</code> page:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_27_arxiv_format_selector_page.png" alt="The format selector page for the arxiv article" width="400" class="center">
</p>
<p>Around the bottom of this page is the option to download the source file(s) for the article. Click the <code>Download source</code> link to download the source file(s). Move the files to a different location if desired. For this example, we made a folder named <code>latex_files</code> in the <code>trouver_walkthrough_folder</code>, a subfolder named <code>kim_park_ga1dcmmc</code> in <code>latex_files</code>, and moved the source file into <code>kim_park_ga1dcmmc</code>.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_28_folder_for_arxiv_article.png" alt="New folder with arxiv source file" width="400" class="center">
</p>
<p>Either the file is compressed and contains multiple files, or the file is not compressed and is actually a <code>.tex</code> file. Attempt to decompress the file. If this fails, rename the file to have the <code>.tex</code> extension. Either way, you should have a <code>.tex</code> file at this stage. For this example, it turns out that the file is compressed and multiple files appear upon decompression.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_29_extract_files.png" alt="Attempt to decompress the file" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_30_files_extracted.png" alt="Files extracted" width="400" class="center">
</p>
<p>The author usually finds it convenient to name the (main) <code>.tex</code> file <code>main.tex</code> for the purposes of using <code>trouver</code>, but the name of the <code>.tex</code> file ultimately does not matter.</p>
</section>
<section id="using-trouver-to-divide-the-file-and-make-notes-in-the-obsidian-vault" class="level4">
<h4 class="anchored" data-anchor-id="using-trouver-to-divide-the-file-and-make-notes-in-the-obsidian-vault">Using <code>trouver</code> to divide the file and make notes in the Obsidian vault</h4>
<p>Now that we have the <code>.tex</code> file set up, we are now ready to the code from <code>trouver</code> to divide it. While the code can really be run from any python interpreter, we highly recommend using a notebook (say via Jupyter or VSCode) to run <code>trouver</code> code.</p>
<p>To open JupyterLab, open a command-line interface and run</p>
<pre class="terminal"><code>jupyter-lab</code></pre>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_31_jupyter_lab_opened.png" alt="JupyterLab opened once more." width="400" class="center">
</p>
<p>Create a new notebook and run the following Python import statements:</p>
<div id="cell-31" class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.helper.files_and_folders <span class="im">import</span> text_from_file</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.latex.convert <span class="im">import</span> (</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    divide_preamble, divide_latex_text, custom_commands,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    setup_reference_from_latex_parts</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.latex.preamble <span class="im">import</span> replace_inclusion_of_style_file_with_code</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Further run (a variant of) the following code. Replace <code>latex_file</code> and <code>vault</code> to be Python <a href="https://docs.python.org/3/library/pathlib.html"><code>Path</code>’s</a> appropriate for your example. For more general instances, you may want to change the <code>reference</code> variable, the <code>location</code> variable, and the <code>author_names</code> varaibles as well.</p>
<div id="cell-33" class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One way to get folders accessible in Google Colab is to upload</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># zip files of them and to unzip them.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># !unzip /content/example_math_vault.zip</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># !unzip /content/latex_files.zip</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-34" class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change this as desired.</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The name of the reference as well as the name of the folder that contains</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the latex file</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>reference <span class="op">=</span> reference</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Change this as desired.</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>latex_file <span class="op">=</span> latex_file </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># latex_file = Path(r'C:\Users\&lt;user&gt;') / reference / 'main.tex'</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>latex_text <span class="op">=</span> text_from_file(latex_file)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>preamble, _ <span class="op">=</span> divide_preamble(latex_text)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>preamble <span class="op">=</span> replace_inclusion_of_style_file_with_code(preamble, latex_dir)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> divide_latex_text(latex_text, downloaded_path)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>cust_comms <span class="op">=</span> custom_commands(preamble)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the below as needed;</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># The path to the Obsidian vault in which to setup the "subvault"</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># For convenience, we currently set this as the folder where the</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># arXiv source file got downloaded into,</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co"># But you may change this to wherever your Obsiidan.md vault</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># actually is located at.</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>vault <span class="op">=</span> Path(downloaded_path)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the below as needed;</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># The path relative to the vault of the directory in which to make</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co"># the new folder containing the new notes.</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>location <span class="op">=</span> Path(<span class="st">'.'</span>)  </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the below as needed</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># The (family) names of the authors;</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>author_names <span class="op">=</span> author_names </span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>setup_reference_from_latex_parts(</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    parts, cust_comms, vault, location,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    reference,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    author_names,</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># You may set this to `True` if you set up a `_references` folder</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># in your Obsidian.md vault.</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    create_reference_file_in_references_folder<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># You may set this to `True` if you set up a `_templates` folder</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># in your Obsidian.md vault.</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>    create_template_file_in_templates_folder<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    adjust_common_latex_syntax_to_markdown<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    repeat_replacing_custom_commands<span class="op">=-</span><span class="dv">1</span>,</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>    copy_obsidian_configs<span class="op">=</span><span class="va">None</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_32_setup_reference_folder_from_latex.png" alt="The code has been executed in JupyterLab and the code has set up a folder in the Obsidian vault" width="400" class="center">
</p>
<!---
Safely ignore the warning messages about configuration files for plugins.
-->
<p>Now return to the Obsidian vault. Note that a new folder named <code>kim_park_ga1dcmmc</code> has been created in the specified folder of the vault (If you used the code above as-is, then this new folder is within the same folder that the arXiv source <code>.tex</code> file is downloaded in). In Obsidian, open the <code>_index_kim_park_ga1dcmmc</code> note:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_33_index_file_for_reference.png" alt="The index file for the reference folder is opened in Obsidian." width="400" class="center">
</p>
<p>Click on any of the links in the <code>_index_kim_park_ga1dcmmc</code> note to open another “index note”:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_34_index_file_for_section.png" alt="The index file a section of the reference is opened in Obsidian." width="400" class="center">
</p>
<p>Click on any of the links in the index note to open a “standard information note”. This note contains some text from the paper on arxiv.</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_35_standard_information_note.png" alt="A standard information note for the reference" width="400" class="center">
</p>
<p>You may need to reload the Obsidian vault before you can view some of these notes; Obsidian may not have registered/“indexed” some of these notes upon their creation. Reload Obsidian using the <code>Reload app without saving</code> commmand in the command palette:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_36_reload_obsidian_vault.png" alt="Reload Obsidian vault" width="400" class="center">
</p>
<p>At this point, we recommend that you explore the newly created notes and folders. As an overview, the above code does the following:</p>
<ol type="1">
<li>Creates a folder for the reference in the specified folder (In this case, a folder named <code>kim_park_ga1dcmmc</code> was created in the <code>number_theory</code> folder in the vault).</li>
<li>Creates folders corresponding to sections of the LaTeX file.</li>
<li>Creates various notes/files in the reference folder, including, but not limited to
<ul>
<li>standard information notes</li>
<li>an index note (in this case named <code>_index_kim_park_ga1dcmmc</code>)</li>
</ul></li>
<li>A template note for the standard information notes for the reference folder.
<ul>
<li>This template note may either be in same folder as the index note (if you used the above code as-is), or in the <code>_templates</code> folder of the vault. (In this case, the template note is created in <code>_templates/K-O/K</code> folder as the file <code>_template_kim_park_ga1dcmmc.md</code>)</li>
</ul></li>
<li>A copy of the above template note located in the root of the reference folder (In this case, the template note is created as the file <code>_template_kim_park_ga1dcmmc_2.md</code>).
<ul>
<li>This copy template note is created for use in case the user wishes to edit the reference folder by opening it as an Obsidian vault; in general, subdirectories of an obsidian vault can be opened as obsidian vaults in themselves. This can be advantageous when the “main” vault has many notes and thus Obsidian runs slowly in the “main” vault.</li>
</ul></li>
<li>A reference note for the reference.
<ul>
<li>This reference note may either be in same folder as the index note (if you used the above code as-is), in the <code>_references</code> folder of the vault (In this case, the reference note is located in the <code>_references/K-O/K</code> folder as the file <code>_reference_kim_park_ga1dcmmc.md</code>)</li>
<li>The user is encouraged to fill in this note with bibliographic information of the reference. Note that this reference note is embedded in the standard information notes for the reference, so the information provided in the reference note is easily readable from the standard information notes (in viewing mode).</li>
</ul></li>
</ol>
<p>If you made a mistake in running the above code and would like to re-setup your reference folder, you can use the following code to delete the reference folder, the template note, and the reference note. Enter the letter <code>Y</code> (case sensitive) to confirm that you wish to delete the folder and these notes. Note that this operation cannot be reversed.</p>
<div id="cell-36" class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.reference <span class="im">import</span> (</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    delete_reference_folder</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: delete template and reference files even without reference folder.</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>delete_reference_folder(vault, reference)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Identified reference 'kim_park_gm1dcmbmc' in the vault 'C:\Users\hyunj\Downloads\kim_park_gm1dcmbmc' as the folder 'C:\Users\hyunj\Downloads\kim_park_gm1dcmbmc\kim_park_gm1dcmbmc'...
Aborting deleting reference.
</code></pre>
</div>
</div>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_37_delete_reference_folder.png" alt="Delete reference folder in Jupyter" width="400" class="center">
</p>
</section>
<section id="using-these-notes" class="level4">
<h4 class="anchored" data-anchor-id="using-these-notes">Using these notes</h4>
<p>One can fairly liberally modify the contents in a standard information note for the purposes of <code>trouver</code>. Some things that we recommend include, but are not limited to:</p>
<ul>
<li>For the user to read more about Obsidian’s features in <a href="https://help.obsidian.md/Obsidian/Index">Obsidian’s official help vault</a>, including <a href="https://help.obsidian.md/How+to/Format+your+notes">Obsidians’ flavor of Markdown syntax</a>
<ul>
<li>However, there are many forms of Obsidian’s Markdown syntax that <code>trouver</code> does not yet parse. One example is that <code>trouver</code> does not currently parse <a href="https://help.obsidian.md/How+to/Format+your+notes#Footnotes">inline footnotes</a>.</li>
</ul></li>
<li>For the user to see what <a href="https://obsidian.md/plugins">(community) plugins</a> are available for Obsidian.
<ul>
<li>Use these plugins at your own risk as there is no way to ultimately ensure that malicious or insecure code is not included in such plugins. However, most to all of these plugins are made open source, so the user can themselves understand how these plugins are implemented.</li>
</ul></li>
<li>For the user to read <a href="https://hyunjongkimmath.github.io/trouver/"><code>trouver</code>’s documentation</a> and to explore the example vaults in the <code>nbs/_tests</code> directory of <a href="https://github.com/hyunjongkimmath/trouver#readme"><code>trouver</code>(’s GitHub repository)</a></li>
<li>For the user to liberally mark their standard information notes with footnotes with personal memos about their experience reading the specific excerpt(s) from the specific mathematical references.</li>
</ul>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_38_footnote_writing.png" alt="An example of a note with footnotes memoing the user's thought process in reading a paper." width="400" class="center">
</p>
<ul>
<li>For the user to make modifications in the standard information notes to clean up the LaTeX syntax for the purposes of reading in Obsidian.md
<ul>
<li>For example, <code>$ \operatorname{Gal}(L/K)$</code> (notice the space between the <code>$</code> and the <code>\</code> characters) will not render properly due to the space. One can correct this by typing <code>$\operatorname{Gal}(L/K)$</code> instead.</li>
</ul></li>
<li>For the user to make links between notes to develop a stronger understanding of the relationship among notes and to build reliable methods for quickly recalling mathematical facts, definitions, or notations.</li>
<li>For the user to <strong>NOT</strong> create and maintain notes of the same file name in a single vault. <code>trouver</code> generally operates under the assumption that an Obsidian vault will not have two or more files of the same name. In particular, errors or unexpected consequences may arise if the code of <code>trouver</code> is run on an Obsidian vault with two files of the same name.</li>
</ul>
<p>However, here are some modifications that one should not make to a standard information note for the purposes of <code>trouver</code>:</p>
<ul>
<li>Changing the title of/deleting the <code>See Also</code>, <code>Meta</code>, <code>References</code>, <code>Citations and Footnotes</code> headers/sections; doing so will result in errors in some functionalities of <code>trouver</code> as <code>trouver</code>’s criteria for recognizing a standard information note is as a note with such headers.
<ul>
<li>One can nevertheless modify the contents within these sections. Note that the title of the section titled <code>Topic</code> may be modified liberally and that sections can be added liberally.</li>
</ul></li>
<li>Changing the formatting of the frontmatter YAML metadata (The text in the beginning of a note starting with <code>---</code>).
<ul>
<li>One can and should nevertheless modify the contents of the frontmatter YAML metadata as appropriate.</li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="using-machine-learning-models" class="level2">
<h2 class="anchored" data-anchor-id="using-machine-learning-models">Using Machine learning models</h2>
<p>Now that we have set up a reference folder from a LaTeX file, we should make great use of the notes/files in the folder to learn concepts presented in the LaTeX file.</p>
<p>One of the basic challenges in deciphering a mathematical paper is grasping the definitions and notations presented in the paper. The machine learning models can help make this process more reliable and faster.</p>
<p>Currently, the functionalities of <code>trouver</code> are more focused towards finding notations as opposed to definitions. In time, we hope to improve these functionalities to better encompass finding definitions as well. Nevertheless, the functionalities of <code>trouver</code> effectively allow the user to identify where notations are introduced in the various notes in the reference folder and to create, for each notation, a note dedicated to the notation.</p>
<p>Currently, <code>trouver</code> uses the following ML models:</p>
<ol type="1">
<li><a href="https://huggingface.co/hyunjongkimmath/information_note_type"><code>hyunjongkimmath/information_note_type</code></a></li>
<li><a href="https://huggingface.co/hyunjongkimmath/def_and_notat_token_classification_model"><code>hyunjongkimmath/def_and_notat_token_classification_model</code></a></li>
<li><a href="https://huggingface.co/hyunjongkimmath/definition_naming_model">hyunjongkimmath/definition_naming_model</a> and <a href="https://huggingface.co/hyunjongkimmath/notation_naming_model">hyunjongkimmath/notation_naming_model</a></li>
<li><a href="https://huggingface.co/hyunjongkimmath/notation_summarizations_model">hyunjongkimmath/notation_summarizations_model</a></li>
</ol>
<p>The first is trained using <a href="https://www.fast.ai/">fast.ai</a> and the rest are trained using the Hugging Face <a href="https://huggingface.co/docs/transformers/index">Transformers</a> library.</p>
<p>ML models can be computationally intensive to run. As such, <code>trouver</code> roughly operates on a “run-once, record results for later use” principle when it comes to its ML models. Moreover, since ML models inherently cannot be perfect, <code>trouver</code> also operates on general principle to allow for users to manually correct these recorded results without raising errors.</p>
<blockquote class="blockquote">
<p><strong>Remark</strong> Graphical Processing Units (GPU’s) are <em>not</em> necessary to use these models. In particular, these models can be loaded onto a computer’s CPU.</p>
</blockquote>
<section id="downloading-and-loading-the-ml-models" class="level4">
<h4 class="anchored" data-anchor-id="downloading-and-loading-the-ml-models">Downloading and loading the ML models</h4>
<p>Since ML models typically are large in file size, the models are not part of the <code>trouver</code> library itself. Instead, the models are made publicly available on <code>Hugging Face</code>, where they can be downloaded.</p>
<p>Run the following code to download the models from the <a href="https://huggingface.co/docs/hub/index"><code>Hugging Face Hub</code>’</a> and then to load the models. Depending on your internet connection, it may take a few minutes to download this models the first time because each model is at least several hundred megabytes large. Downloading the models may also sometimes temporarily fail and may run correctly once you run the code again after waiting for some time. Moreover, these models are saved to a local cache folder. See <a href="https://huggingface.co/docs/datasets/cache">Hugging Face cache management</a> for more details. The <code>get_Huggingface_cache_dir</code> function should indicate where these models are stored in your machine.</p>
<p>See also <a href="index.html#descriptions-of-functionalities">index</a> for a description of what these models accomplish.</p>
<div id="cell-44" class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pathlib</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path, WindowsPath</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> platform</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> huggingface_hub <span class="im">import</span> from_pretrained_fastai</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> transformers <span class="im">import</span> AutoModelForSeq2SeqLM, AutoModelForTokenClassification, AutoTokenizer, pipeline</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.helper.files_and_folders <span class="im">import</span> get_huggingface_cache_dir</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.machine_learning.information_note_types <span class="im">import</span> automatically_add_note_type_tags</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification <span class="im">import</span> auto_mark_def_and_notats</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.machine_learning.definition_and_notation_naming <span class="im">import</span> add_names_to_html_tags_in_info_note</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.machine_learning.notation_summarization <span class="im">import</span> append_summary_to_notation_note</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-45" class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the model that categorizes the type(s) of standard information notes</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>repo_id <span class="op">=</span> <span class="st">'hyunjongkimmath/information_note_type'</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> platform.system() <span class="op">==</span> <span class="st">'Windows'</span>:</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> pathlib.PosixPath <span class="co"># See https://stackoverflow.com/questions/57286486/i-cant-load-my-model-because-i-cant-put-a-posixpath</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    pathlib.PosixPath <span class="op">=</span> pathlib.WindowsPath</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    information_note_type_model <span class="op">=</span> from_pretrained_fastai(repo_id)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    pathlib.PosixPath <span class="op">=</span> temp</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    information_note_type_model <span class="op">=</span> from_pretrained_fastai(repo_id)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the model the finds definitions and notations introduced in standard information notes</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> AutoModelForTokenClassification.from_pretrained(<span class="st">'hyunjongkimmath/def_and_notat_token_classification_model'</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(<span class="st">'hyunjongkimmath/def_and_notat_token_classification_model'</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>def_notat_classifier <span class="op">=</span> pipeline(<span class="st">'ner'</span>, model<span class="op">=</span>model, tokenizer<span class="op">=</span>tokenizer)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the models that names definitions and notations.</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> AutoModelForSeq2SeqLM.from_pretrained(<span class="st">'hyunjongkimmath/definition_naming_model'</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(<span class="st">'hyunjongkimmath/definition_naming_model'</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>definition_naming_pipeline <span class="op">=</span> pipeline(<span class="st">'summarization'</span>, model<span class="op">=</span>model, tokenizer<span class="op">=</span>tokenizer)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> AutoModelForSeq2SeqLM.from_pretrained(<span class="st">'hyunjongkimmath/notation_naming_model'</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(<span class="st">'hyunjongkimmath/notation_naming_model'</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>notation_naming_pipeline <span class="op">=</span> pipeline(<span class="st">'summarization'</span>, model<span class="op">=</span>model, tokenizer<span class="op">=</span>tokenizer)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the model the summarizes what notations denote</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> AutoModelForSeq2SeqLM.from_pretrained(<span class="st">'hyunjongkimmath/notation_summarizations_model'</span>)</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(<span class="st">'hyunjongkimmath/notation_summarizations_model'</span>)</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>summarizer <span class="op">=</span> pipeline(<span class="st">'summarization'</span>, model<span class="op">=</span>model, tokenizer<span class="op">=</span>tokenizer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"780548ab8b814b95b6912dadb19c910f","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_39_models_loaded_in_jupyter.png" alt="The models are now loaded in a Jupyter notebook." width="400" class="center">
</p>
<p>Note that there are some <code>if-else</code> statements used to load the <code>fast.ai</code> models; this is a workaround implemented for Windows users as loading fast.ai models seems to have some issues with Python’s <code>pathlib</code>, cf.&nbsp;<a href="https://stackoverflow.com/questions/57286486/i-cant-load-my-model-because-i-cant-put-a-posixpath">https://stackoverflow.com/questions/57286486/i-cant-load-my-model-because-i-cant-put-a-posixpath</a>.</p>
<p>After running this code, we have the Python variables <code>information_note_type_model</code>, <code>def_notat_classifier</code>, <code>definition_naming_pipeline</code>, <code>notation_naming_pipeline</code>, and <code>summarizer</code>. Note that <code>information_note_type_model</code> is a <code>fast.ai</code> model while the others are all technically not models, but rather <a href="https://huggingface.co/docs/transformers/main_classes/pipelines">pipelines</a> of the <code>transformers</code> library that contain models.</p>
<p>To use the models, first run the following import statements:</p>
<div id="cell-49" class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.markdown.<span class="bu">file</span> <span class="im">import</span> MarkdownFile</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.vault <span class="im">import</span> VaultNote</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.notes <span class="im">import</span> notes_linked_in_notes_linked_in_note, notes_linked_in_note</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.notation <span class="im">import</span> make_notation_notes_from_double_asts, make_notation_notes_from_HTML_tags</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> trouver.markdown.obsidian.personal.notation.in_standard_information_note <span class="im">import</span> notation_notes_linked_in_see_also_section</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="categorizing-the-types-of-standard-information-notes" class="level4">
<h4 class="anchored" data-anchor-id="categorizing-the-types-of-standard-information-notes">Categorizing the type(s) of standard information notes</h4>
<p>Run the following code to 1. use the <code>information_note_type_model</code> to predict the types of each standard information note in the newly created reference folder, and 2. record these predictions to the standard information notes’ respective frontmatter YAML metadata. Running the following code should take several minutes.</p>
<div id="cell-52" class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change `vault` and `reference` if necessary. These variables were defined in previous code.</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># vault = Path(r'C:\Users\&lt;user&gt;\...')  # The path to the Obsidian vault</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `reference` = 'kim_park_ga1dcmmc`</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>index_note <span class="op">=</span> VaultNote(vault, name<span class="op">=</span><span class="ss">f'_index_</span><span class="sc">{</span>reference<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> notes_linked_in_notes_linked_in_note(index_note, as_dict<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> note.exists():</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(note.name)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Tagging notes"</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>automatically_add_note_type_tags(information_note_type_model, vault, notes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tagging notes</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\bs4\__init__.py:435: MarkupResemblesLocatorWarning: The input looks more like a filename than markup. You may want to open this file and pass the filehandle into Beautiful Soup.
  warnings.warn(</code></pre>
</div>
</div>
<p>Let us first describe in more detail what the above code does. The first line</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>index_note <span class="op">=</span> VaultNote(vault, name<span class="op">=</span><span class="ss">f'_index_</span><span class="sc">{</span>reference<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>creates a <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> object from the <code>trouver.markdown.obsidian.vault</code> module, which represents a note in an Obsidian vault. The note/file that a <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> object represents does not have to exist, although runtime errors may be raised on certain operations, such as reading or writing a file, that require an existing file. In the above line of code, we pass <code>vault</code> as an argument, signifying that the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> object should represent a note from the specified Obsidian vault (as opposed to a file in any directory outside of <code>vault</code>). We also pass the Python string <code>f'_index_{reference}'</code> as the argument to the <code>name</code> parameter — in this case the string equals the string <code>'_index_kim_park_ga1dcmmc'</code> — signifying that the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> object should represent the note named <code>_index_kim_park_ga1dcmmc</code> (recall that <code>trouver</code> operates under the assumption that no two notes in an Obsidian vault have the same name).</p>
<p>Furthermore, the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> class has a cache which is supposed to keep track of all the <code>.md</code> files in an Obsidian vault. Creating or deleting files by not using methods from the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> class may make the information stored in this cache obsolete. The <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> class will try to re-scan files in the vault to update its cache, but sometimes (for reasons that are not yet well documented) the user may need to manually clear the cache via the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote.clear_cache"><code>VaultNote.clear_cache</code></a> class method:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>VaultNote.clear_cache()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Depending on the size of the vault and the specs of the computer running <code>trouver</code>, scanning the files in a vault may take several seconds or more.</p>
<p>The second line of code creates a list of <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> objects and stores the list in the variable <code>notes</code>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> notes_linked_in_notes_linked_in_note(index_note, as_dict<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.notes.html#notes_linked_in_notes_linked_in_note"><code>notes_linked_in_notes_linked_in_note</code></a> function is implemented specifically for index notes which keep track of index notes, which in turn keep track of standard information notes, via links; recall that the note <code>_index_kim_park_ga1dcmmc</code> is such an index note:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_34_index_file_for_section.png" alt="The note `_index_kim_park_ga1dcmmc` is an index note that itself keeps track of index notes" width="400" class="center">
</p>
<p>The code</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> note.exists():</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(note.name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>checks that the standard information notes listed in <code>notes</code> actually exist (more accurately, the code checks that the links in the notes linked in the note <code>_index_kim_park_ga1dcmmc</code> point to notes that actually exist). Finally,</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>automatically_add_note_type_tags(information_note_type_model, vault, notes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>uses the model to make predictions and record those predictions to the frontmatter YAML metadata of the notes.</p>
<p>The following is a comparison of a note before and after these predictions are made and recorded (note that the note is viewed in Edit mode as opposed to Viewing mode):</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_40_note_before_note_type_tag_categorization.png" alt="A note before the predictions are made" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_41_note_after_note_type_tag_categorization.png" alt="A note before the predictions are made" width="400" class="center">
</p>
<p>Before the predictions, the note only has the <code>_reference/kim_park_ga1dcmmc</code> and <code>_meta/literature_note</code> tags in the tags section of its YAML frontmatter metadata. After the predictions, the <code>_auto/_meta/narrative</code> tag is added.</p>
<p>The <code>_auto</code> prefix is used to signify that the tag is added automatically with the model. The <code>_meta/narrative</code> tag signifies that the content of the note contains a “narrative”; in this example, the note gives an overview of <span class="math inline">\(\mathbb{A}^1\)</span>-enumerative geometry, so it is fitting to consider it is “narrative”. Some tags that the model will predict for include</p>
<ul>
<li><code>_meta/definition</code></li>
<li><code>_meta/notation</code></li>
<li><code>_meta/concept</code></li>
<li><code>_meta/proof</code></li>
<li><code>_meta/narrative</code></li>
<li><code>_meta/exercise</code></li>
<li><code>_meta/remark</code></li>
<li><code>_meta/example</code></li>
</ul>
<p>See the documentation for <a href="markdown.obsidian.personal.machine_learning.information_note_types.html"><code>markdown.obsidian.personal.machine_learning.information_note_types</code></a> for more details.</p>
<p>We recommend manually editing these tags in your standard information notes as follows (if you have the time and inclination):</p>
<ul>
<li>remove the <code>_auto</code> prefix to confirm the model’s prediction if the model makes a correct prediction.</li>
<li>delete the tag altogether if the model’s prediction is incorrect.</li>
<li>add tags that the model incorrectly did not predict.</li>
</ul>
<p>At the very least, we recommend making these edits for the <code>_meta/definition</code> and <code>_meta/notation</code> tags, which signify that a standard information note introduces at least one definition and at least one notation respectively.</p>
<p>For example, upon recognizing that the model correctly predicted the standard information note to contain a narrative, we delete the <code>_auto</code> prefix from the <code>_auto/_meta/narrative</code> tag:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_42_note_after_deleting_auto_prefix_from_tag.png" alt="A note before the predictions are made" width="400" class="center">
</p>
</section>
<section id="locating-definitions-and-notations-introduced-in-standard-information-notes" class="level4">
<h4 class="anchored" data-anchor-id="locating-definitions-and-notations-introduced-in-standard-information-notes">Locating definitions and notations introduced in standard information notes</h4>
<p>Next, we use the <code>def_notat_classifier</code> to locate notations introduced in the standard information notes and record these locations in the notes. Run the following code, which may take several to a few dozen minutes:</p>
<div id="cell-56" class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>index_note <span class="op">=</span> VaultNote(vault, name<span class="op">=</span><span class="ss">f'_index_</span><span class="sc">{</span>reference<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> notes_linked_in_notes_linked_in_note(index_note, as_dict<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> note.exists()</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Finding notations"</span>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>note_mfs <span class="op">=</span> [MarkdownFile.from_vault_note(note) <span class="cf">for</span> note <span class="kw">in</span> notes]</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>notation_notes <span class="op">=</span> [</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    note <span class="cf">for</span> note, mf <span class="kw">in</span> <span class="bu">zip</span>(notes, note_mfs)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> mf.has_tag(<span class="st">'_auto/_meta/definition'</span>) <span class="kw">or</span> mf.has_tag(<span class="st">'_auto/_meta/notation'</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>       <span class="kw">or</span> mf.has_tag(<span class="st">'_meta/definition'</span>) <span class="kw">or</span> mf.has_tag(<span class="st">'_meta/notation'</span>)]</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notation_notes:</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    auto_mark_def_and_notats(note, def_notat_classifier, excessive_space_threshold<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># automatically_mark_notations(note, notation_identification_model, reference_name=reference)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Finding notations</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Token indices sequence length is longer than the specified maximum sequence length for this model (514 &gt; 512). Running this sequence through the model will result in indexing errors</code></pre>
</div>
</div>
<p>Again, <code>notes</code> is a list of all standard information notes in the reference folder. The line</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>note_mfs <span class="op">=</span> [MarkdownFile.from_vault_note(note) <span class="cf">for</span> note <span class="kw">in</span> notes]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Creates a list of <a href="https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile"><code>MarkdownFile</code></a> objects of the <code>trouver.markdown.markdown.file</code> module. A <a href="https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile"><code>MarkdownFile</code></a> object represents the contents of an Obsidian Markdown file (as opposed to a file itself). In particular, a <a href="https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile"><code>MarkdownFile</code></a> object can be created from a <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote"><code>VaultNote</code></a> object (via the <a href="https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile.from_vault_note"><code>MarkdownFile.from_vault_note</code></a> factory method) or from a Python string (via the <a href="https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile.from_string"><code>MarkdownFile.from_string</code></a> factory method). In particular, <code>note_mfs</code> is a list of <a href="https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile"><code>MarkdownFile</code></a> objects created from the contents of <code>notes</code>.</p>
<p>The line</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>notation_notes <span class="op">=</span> [note <span class="cf">for</span> note, mf <span class="kw">in</span> <span class="bu">zip</span>(notes, note_mfs) <span class="cf">if</span> mf.has_tag(<span class="st">'_auto/_meta/definition'</span>) <span class="kw">or</span> mf.has_tag(<span class="st">'_auto/_meta/notation'</span>) <span class="kw">or</span> mf.has_tag(<span class="st">'_meta/definition'</span>) <span class="kw">or</span> mf.has_tag(<span class="st">'_meta/notation'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>then creates <code>notation_notes</code> as a sublist of <code>notes</code> consisting only of the notes with at least one of the following tags in their frontmatter YAML metadata:</p>
<ul>
<li><code>_auto/_meta/definition</code></li>
<li><code>_auto/_meta/notation</code></li>
<li><code>_meta/definition</code></li>
<li><code>_meta/notation</code></li>
</ul>
<p>The code</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notation_notes:</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    auto_mark_def_and_notats(note, def_notat_classifier, excessive_space_threshold<span class="op">=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then iterates through <code>notation_notes</code>, using <code>def_notat_classifier</code> to locate notations introduced <strong><em>only</em></strong> in the notes in <code>notation_notes</code>. We recommend using the above code to use the model to locate notations in the notes in <code>notation_notes</code> because the model works better in notes that are deemed likely to contain definitions or notations.</p>
<p>The following is an example of a comparison of a note before and after notations are located (for the current version of <code>trouver</code>, the note named <code>kim_park_ga1dcmmc_29</code> should suffice as an example):</p>
<p>TODO: update images to reflect current implementation of the def/notat marking</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_44_note_before_notations_identifed.png" alt="A note after notations are identified" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_45_note_after_notations_identifed.png" alt="A note after notations are identified" width="400" class="center">
</p>
<p>Note that the difference is that html tags surround parts of the text that the model predicts to introduce definitions or notations.</p>
<ol type="1">
<li>For definitions, the HTML tags are <code>&lt;b&gt;</code> tags and have a <code>definition=""</code> attribute.</li>
<li>For notations, the HTML tags are <code>&lt;span&gt;</code> tags and have a <code>notation=""</code> attribute. Such HTML tags for notations only surround LaTeX math mode str’s.</li>
<li>For either, the HTML tags have some formatting specifications that draw boxes around the definitions/notations to make them easier to see in Obsidian.ms’s view mode.</li>
</ol>
<p>An <code>_auto/def_and_notat_identified</code> tag is added to the notes if the model finds definitions and/or notations.</p>
<p>We highly recommend the user to manually make the following edits to correct <code>def_notat_classifier</code>’s mistakes:</p>
<ol type="1">
<li>Edit/remove the HTML tags as needed</li>
<li>Add HTML tags to mark definitions/notations introduced in the text as needed.</li>
</ol>
<!---
> **Warning**
> The [`auto_mark_def_and_notats`](https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.machine_learning.tokenize.def_and_notat_token_classification.html#auto_mark_def_and_notats) function not only adds double asterisks `**` to LaTeX math mode strings, but also removes components such as links and footnotes from the text of the note. It is recommended to only apply this function to notes whose text has not been embellished with such components[^7].
> Moreover, the [`automatically_mark_notations`](https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.machine_learning.notation_identification.html#automatically_mark_notations) is currently buggy and should not be applied to the same note twice.

[^7]: More precisely, [`automatically_mark_notations`](https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.machine_learning.notation_identification.html#automatically_mark_notations) first applies [`process_standard_information_note`](https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.note_processing.html#process_standard_information_note) to a [`MarkdownFile`](https://hyunjongkimmath.github.io/trouver/markdown.markdown.file.html#markdownfile) object constructed from the [`VaultNote`](https://hyunjongkimmath.github.io/trouver/markdown.obsidian.vault.html#vaultnote) object to roughly obtain the "raw text" of the note, uses that raw text to locate notations, marks the notations in the raw text, and then replaces the text from the note with the raw text with notations marked. In the process of obtaining the "raw text", the [`process_standard_information_note`](https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.note_processing.html#process_standard_information_note) function removes components such as links and footnotes from the text.

-->
</section>
<section id="naming-marked-definitions-and-notations" class="level4">
<h4 class="anchored" data-anchor-id="naming-marked-definitions-and-notations">Naming marked definitions and notations</h4>
<p>After the definitions and notations are marked, we can then attempt to “name” them. See also <a href="index.html#descriptions-of-functionalities">index</a> for a description of what this means.</p>
<p>Depending on the length and number of notes, this may take at least several or dozens of minutes.</p>
<div id="cell-61" class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>index_note <span class="op">=</span> VaultNote(vault, name<span class="op">=</span><span class="ss">f'_index_</span><span class="sc">{</span>reference<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> notes_linked_in_notes_linked_in_note(index_note, as_dict<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>        mf <span class="op">=</span> MarkdownFile.from_vault_note(note)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        add_names_to_html_tags_in_info_note(</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>            note, def_pipeline<span class="op">=</span>definition_naming_pipeline,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>            notat_pipeline<span class="op">=</span>notation_naming_pipeline, overwrite<span class="op">=</span><span class="va">False</span>) </span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>note<span class="sc">.</span>name<span class="sc">}</span><span class="ss"> raised an exception'</span>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(e)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Your max_length is set to 200, but your input_length is only 116. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=58)
Your max_length is set to 200, but your input_length is only 126. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=63)
Your max_length is set to 200, but your input_length is only 164. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=82)
Your max_length is set to 200, but your input_length is only 85. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=42)
Your max_length is set to 200, but your input_length is only 188. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=94)
Your max_length is set to 200, but your input_length is only 188. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=94)
Your max_length is set to 200, but your input_length is only 58. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=29)</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">KeyboardInterrupt</span>                         Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In [17], line 8</span>
<span class="ansi-green-fg">      6</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">      7</span>     mf <span style="color:rgb(98,98,98)">=</span> MarkdownFile<span style="color:rgb(98,98,98)">.</span>from_vault_note(note)
<span class="ansi-green-fg ansi-bold">----&gt; 8</span>     <span class="ansi-yellow-bg">add_names_to_html_tags_in_info_note</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">      9</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">note</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">def_pipeline</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">definition_naming_pipeline</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">     10</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">notat_pipeline</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">notation_naming_pipeline</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">overwrite</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="font-weight:bold;color:rgb(0,135,0)" class="ansi-yellow-bg">False</span><span class="ansi-yellow-bg">)</span> 
<span class="ansi-green-fg">     11</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">Exception</span> <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:
<span class="ansi-green-fg">     12</span>     <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">f</span><span style="color:rgb(175,0,0)">'</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>note<span style="color:rgb(98,98,98)">.</span>name<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="color:rgb(175,0,0)"> raised an exception</span><span style="color:rgb(175,0,0)">'</span>)

File <span class="ansi-green-fg ansi-bold">c:\users\hyunj\documents\development\python\trouver\trouver\markdown\obsidian\personal\machine_learning\definition_and_notation_naming.py:159</span>, in <span class="ansi-cyan-fg">add_names_to_html_tags_in_info_note</span><span class="ansi-blue-fg ansi-bold">(info_note, def_and_notat_pipeline, def_pipeline, notat_pipeline, overwrite, fix_formatting, correct_syntax)</span>
<span class="ansi-green-fg">    156</span> raw_info_note_text <span style="color:rgb(98,98,98)">=</span> info_note<span style="color:rgb(98,98,98)">.</span>text()
<span class="ansi-green-fg">    157</span> raw_info_note_text_minus_html_tags, tags_and_locats <span style="color:rgb(98,98,98)">=</span> remove_html_tags_in_text(
<span class="ansi-green-fg">    158</span>     raw_info_note_text)
<span class="ansi-green-fg ansi-bold">--&gt; 159</span> predicted_names <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">predict_names</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">    160</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">info_note</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">def_and_notat_pipeline</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">def_pipeline</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    161</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">notat_pipeline</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    163</span> <span style="font-style:italic;color:rgb(95,135,135)"># If somehow a different number of HTML tags were found</span>
<span class="ansi-green-fg">    164</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">len</span>(predicted_names) <span style="color:rgb(98,98,98)">!=</span> <span style="color:rgb(0,135,0)">len</span>(tags_and_locats):
<span class="ansi-green-fg">    165</span>     <span style="font-style:italic;color:rgb(95,135,135)"># TODO: do warning</span>

File <span class="ansi-green-fg ansi-bold">c:\users\hyunj\documents\development\python\trouver\trouver\markdown\obsidian\personal\machine_learning\definition_and_notation_naming.py:111</span>, in <span class="ansi-cyan-fg">predict_names</span><span class="ansi-blue-fg ansi-bold">(info_note, def_and_notat_pipeline, def_pipeline, notat_pipeline)</span>
<span class="ansi-green-fg">    107</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(
<span class="ansi-green-fg">    108</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Expected `def_and_notat_pipeline` to be specified or </span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    109</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">both `def_pipeline` and `notat_pipeline` to be specified.</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">    110</span> data_points <span style="color:rgb(98,98,98)">=</span> data_from_information_note(info_note)
<span class="ansi-green-fg ansi-bold">--&gt; 111</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> [_name_prediction_for_data_point(
<span class="ansi-green-fg">    112</span>     data_point, def_and_notat_pipeline, def_pipeline, notat_pipeline)
<span class="ansi-green-fg">    113</span>     <span style="font-weight:bold;color:rgb(0,135,0)">for</span> data_point <span style="font-weight:bold;color:rgb(175,0,255)">in</span> data_points]

File <span class="ansi-green-fg ansi-bold">c:\users\hyunj\documents\development\python\trouver\trouver\markdown\obsidian\personal\machine_learning\definition_and_notation_naming.py:111</span>, in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-fg ansi-bold">(.0)</span>
<span class="ansi-green-fg">    107</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(
<span class="ansi-green-fg">    108</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Expected `def_and_notat_pipeline` to be specified or </span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    109</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">both `def_pipeline` and `notat_pipeline` to be specified.</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">    110</span> data_points <span style="color:rgb(98,98,98)">=</span> data_from_information_note(info_note)
<span class="ansi-green-fg ansi-bold">--&gt; 111</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> [<span class="ansi-yellow-bg">_name_prediction_for_data_point</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">    112</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">data_point</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">def_and_notat_pipeline</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">def_pipeline</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">notat_pipeline</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    113</span>     <span style="font-weight:bold;color:rgb(0,135,0)">for</span> data_point <span style="font-weight:bold;color:rgb(175,0,255)">in</span> data_points]

File <span class="ansi-green-fg ansi-bold">c:\users\hyunj\documents\development\python\trouver\trouver\markdown\obsidian\personal\machine_learning\definition_and_notation_naming.py:129</span>, in <span class="ansi-cyan-fg">_name_prediction_for_data_point</span><span class="ansi-blue-fg ansi-bold">(data_point, def_and_notat_pipeline, def_pipeline, notat_pipeline)</span>
<span class="ansi-green-fg">    127</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    128</span>     summarizer <span style="color:rgb(98,98,98)">=</span> notat_pipeline
<span class="ansi-green-fg ansi-bold">--&gt; 129</span>     summarizer_output <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">summarizer</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">data_point</span><span class="ansi-yellow-bg">[</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">text</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">max_length</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">20</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">min_length</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">0</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    130</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> summarizer_output[<span style="color:rgb(98,98,98)">0</span>][<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">summary_text</span><span style="color:rgb(175,0,0)">'</span>]

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\pipelines\text2text_generation.py:269</span>, in <span class="ansi-cyan-fg">SummarizationPipeline.__call__</span><span class="ansi-blue-fg ansi-bold">(self, *args, **kwargs)</span>
<span class="ansi-green-fg">    245</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">__call__</span>(<span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs):
<span class="ansi-green-fg">    246</span>     <span style="color:rgb(175,0,0)">r</span><span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg">    247</span> <span style="font-style:italic;color:rgb(175,0,0)">    Summarize the text(s) given as inputs.</span>
<span class="ansi-green-fg">    248</span> 
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    267</span> <span style="font-style:italic;color:rgb(175,0,0)">          ids of the summary.</span>
<span class="ansi-green-fg">    268</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">--&gt; 269</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">super</span>()<span style="color:rgb(98,98,98)">.</span><span style="color:rgb(0,0,255)">__call__</span>(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\pipelines\text2text_generation.py:167</span>, in <span class="ansi-cyan-fg">Text2TextGenerationPipeline.__call__</span><span class="ansi-blue-fg ansi-bold">(self, *args, **kwargs)</span>
<span class="ansi-green-fg">    138</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">__call__</span>(<span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs):
<span class="ansi-green-fg">    139</span>     <span style="color:rgb(175,0,0)">r</span><span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg">    140</span> <span style="font-style:italic;color:rgb(175,0,0)">    Generate the output text(s) using text(s) given as inputs.</span>
<span class="ansi-green-fg">    141</span> 
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    164</span> <span style="font-style:italic;color:rgb(175,0,0)">          ids of the generated text.</span>
<span class="ansi-green-fg">    165</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">--&gt; 167</span>     result <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">super</span>()<span style="color:rgb(98,98,98)">.</span><span style="color:rgb(0,0,255)">__call__</span>(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">    168</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> (
<span class="ansi-green-fg">    169</span>         <span style="color:rgb(0,135,0)">isinstance</span>(args[<span style="color:rgb(98,98,98)">0</span>], <span style="color:rgb(0,135,0)">list</span>)
<span class="ansi-green-fg">    170</span>         <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">all</span>(<span style="color:rgb(0,135,0)">isinstance</span>(el, <span style="color:rgb(0,135,0)">str</span>) <span style="font-weight:bold;color:rgb(0,135,0)">for</span> el <span style="font-weight:bold;color:rgb(175,0,255)">in</span> args[<span style="color:rgb(98,98,98)">0</span>])
<span class="ansi-green-fg">    171</span>         <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">all</span>(<span style="color:rgb(0,135,0)">len</span>(res) <span style="color:rgb(98,98,98)">==</span> <span style="color:rgb(98,98,98)">1</span> <span style="font-weight:bold;color:rgb(0,135,0)">for</span> res <span style="font-weight:bold;color:rgb(175,0,255)">in</span> result)
<span class="ansi-green-fg">    172</span>     ):
<span class="ansi-green-fg">    173</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> [res[<span style="color:rgb(98,98,98)">0</span>] <span style="font-weight:bold;color:rgb(0,135,0)">for</span> res <span style="font-weight:bold;color:rgb(175,0,255)">in</span> result]

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\pipelines\base.py:1257</span>, in <span class="ansi-cyan-fg">Pipeline.__call__</span><span class="ansi-blue-fg ansi-bold">(self, inputs, num_workers, batch_size, *args, **kwargs)</span>
<span class="ansi-green-fg">   1249</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">next</span>(
<span class="ansi-green-fg">   1250</span>         <span style="color:rgb(0,135,0)">iter</span>(
<span class="ansi-green-fg">   1251</span>             <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>get_iterator(
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   1254</span>         )
<span class="ansi-green-fg">   1255</span>     )
<span class="ansi-green-fg">   1256</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">-&gt; 1257</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">run_single</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">inputs</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">preprocess_params</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">forward_params</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">postprocess_params</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\pipelines\base.py:1264</span>, in <span class="ansi-cyan-fg">Pipeline.run_single</span><span class="ansi-blue-fg ansi-bold">(self, inputs, preprocess_params, forward_params, postprocess_params)</span>
<span class="ansi-green-fg">   1262</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">run_single</span>(<span style="color:rgb(0,135,0)">self</span>, inputs, preprocess_params, forward_params, postprocess_params):
<span class="ansi-green-fg">   1263</span>     model_inputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>preprocess(inputs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>preprocess_params)
<span class="ansi-green-fg ansi-bold">-&gt; 1264</span>     model_outputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>forward(model_inputs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>forward_params)
<span class="ansi-green-fg">   1265</span>     outputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>postprocess(model_outputs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>postprocess_params)
<span class="ansi-green-fg">   1266</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> outputs

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\pipelines\base.py:1164</span>, in <span class="ansi-cyan-fg">Pipeline.forward</span><span class="ansi-blue-fg ansi-bold">(self, model_inputs, **forward_params)</span>
<span class="ansi-green-fg">   1162</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> inference_context():
<span class="ansi-green-fg">   1163</span>         model_inputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_ensure_tensor_on_device(model_inputs, device<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>device)
<span class="ansi-green-fg ansi-bold">-&gt; 1164</span>         model_outputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward(model_inputs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>forward_params)
<span class="ansi-green-fg">   1165</span>         model_outputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_ensure_tensor_on_device(model_outputs, device<span style="color:rgb(98,98,98)">=</span>torch<span style="color:rgb(98,98,98)">.</span>device(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">cpu</span><span style="color:rgb(175,0,0)">"</span>))
<span class="ansi-green-fg">   1166</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\pipelines\text2text_generation.py:191</span>, in <span class="ansi-cyan-fg">Text2TextGenerationPipeline._forward</span><span class="ansi-blue-fg ansi-bold">(self, model_inputs, **generate_kwargs)</span>
<span class="ansi-green-fg">    184</span>     in_b, input_length <span style="color:rgb(98,98,98)">=</span> tf<span style="color:rgb(98,98,98)">.</span>shape(model_inputs[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">input_ids</span><span style="color:rgb(175,0,0)">"</span>])<span style="color:rgb(98,98,98)">.</span>numpy()
<span class="ansi-green-fg">    186</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>check_inputs(
<span class="ansi-green-fg">    187</span>     input_length,
<span class="ansi-green-fg">    188</span>     generate_kwargs<span style="color:rgb(98,98,98)">.</span>get(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">min_length</span><span style="color:rgb(175,0,0)">"</span>, <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>model<span style="color:rgb(98,98,98)">.</span>config<span style="color:rgb(98,98,98)">.</span>min_length),
<span class="ansi-green-fg">    189</span>     generate_kwargs<span style="color:rgb(98,98,98)">.</span>get(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">max_length</span><span style="color:rgb(175,0,0)">"</span>, <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>model<span style="color:rgb(98,98,98)">.</span>config<span style="color:rgb(98,98,98)">.</span>max_length),
<span class="ansi-green-fg">    190</span> )
<span class="ansi-green-fg ansi-bold">--&gt; 191</span> output_ids <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>model<span style="color:rgb(98,98,98)">.</span>generate(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>model_inputs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>generate_kwargs)
<span class="ansi-green-fg">    192</span> out_b <span style="color:rgb(98,98,98)">=</span> output_ids<span style="color:rgb(98,98,98)">.</span>shape[<span style="color:rgb(98,98,98)">0</span>]
<span class="ansi-green-fg">    193</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>framework <span style="color:rgb(98,98,98)">==</span> <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">pt</span><span style="color:rgb(175,0,0)">"</span>:

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\autograd\grad_mode.py:27</span>, in <span class="ansi-cyan-fg">_DecoratorContextManager.__call__.&lt;locals&gt;.decorate_context</span><span class="ansi-blue-fg ansi-bold">(*args, **kwargs)</span>
<span class="ansi-green-fg">     24</span> <span style="color:rgb(175,0,255)">@functools</span><span style="color:rgb(98,98,98)">.</span>wraps(func)
<span class="ansi-green-fg">     25</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">decorate_context</span>(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs):
<span class="ansi-green-fg">     26</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>clone():
<span class="ansi-green-fg ansi-bold">---&gt; 27</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> func(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\generation\utils.py:1745</span>, in <span class="ansi-cyan-fg">GenerationMixin.generate</span><span class="ansi-blue-fg ansi-bold">(self, inputs, generation_config, logits_processor, stopping_criteria, prefix_allowed_tokens_fn, synced_gpus, assistant_model, streamer, negative_prompt_ids, negative_prompt_attention_mask, **kwargs)</span>
<span class="ansi-green-fg">   1739</span>     model_kwargs[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">attention_mask</span><span style="color:rgb(175,0,0)">"</span>] <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_prepare_attention_mask_for_generation(
<span class="ansi-green-fg">   1740</span>         inputs_tensor, generation_config<span style="color:rgb(98,98,98)">.</span>_pad_token_tensor, generation_config<span style="color:rgb(98,98,98)">.</span>_eos_token_tensor
<span class="ansi-green-fg">   1741</span>     )
<span class="ansi-green-fg">   1743</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>config<span style="color:rgb(98,98,98)">.</span>is_encoder_decoder <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">encoder_outputs</span><span style="color:rgb(175,0,0)">"</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(175,0,255)">in</span> model_kwargs:
<span class="ansi-green-fg">   1744</span>     <span style="font-style:italic;color:rgb(95,135,135)"># if model is encoder decoder encoder_outputs are created and added to `model_kwargs`</span>
<span class="ansi-green-fg ansi-bold">-&gt; 1745</span>     model_kwargs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_prepare_encoder_decoder_kwargs_for_generation</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">   1746</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">inputs_tensor</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">model_kwargs</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">model_input_name</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">generation_config</span>
<span class="ansi-green-fg">   1747</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   1749</span> <span style="font-style:italic;color:rgb(95,135,135)"># 5. Prepare `input_ids` which will be used for auto-regressive generation</span>
<span class="ansi-green-fg">   1750</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>config<span style="color:rgb(98,98,98)">.</span>is_encoder_decoder:

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\generation\utils.py:549</span>, in <span class="ansi-cyan-fg">GenerationMixin._prepare_encoder_decoder_kwargs_for_generation</span><span class="ansi-blue-fg ansi-bold">(self, inputs_tensor, model_kwargs, model_input_name, generation_config)</span>
<span class="ansi-green-fg">    547</span> encoder_kwargs[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">return_dict</span><span style="color:rgb(175,0,0)">"</span>] <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>
<span class="ansi-green-fg">    548</span> encoder_kwargs[model_input_name] <span style="color:rgb(98,98,98)">=</span> inputs_tensor
<span class="ansi-green-fg ansi-bold">--&gt; 549</span> model_kwargs[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">encoder_outputs</span><span style="color:rgb(175,0,0)">"</span>]: ModelOutput <span style="color:rgb(98,98,98)">=</span> encoder(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>encoder_kwargs)
<span class="ansi-green-fg">    551</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> model_kwargs

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\nn\modules\module.py:1194</span>, in <span class="ansi-cyan-fg">Module._call_impl</span><span class="ansi-blue-fg ansi-bold">(self, *input, **kwargs)</span>
<span class="ansi-green-fg">   1190</span> <span style="font-style:italic;color:rgb(95,135,135)"># If we don't have any hooks, we want to skip the rest of the logic in</span>
<span class="ansi-green-fg">   1191</span> <span style="font-style:italic;color:rgb(95,135,135)"># this function, and just call forward.</span>
<span class="ansi-green-fg">   1192</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> (<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_backward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_pre_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_backward_hooks
<span class="ansi-green-fg">   1193</span>         <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_pre_hooks):
<span class="ansi-green-fg ansi-bold">-&gt; 1194</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> forward_call(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(0,135,0)">input</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">   1195</span> <span style="font-style:italic;color:rgb(95,135,135)"># Do not call functions when jit is used</span>
<span class="ansi-green-fg">   1196</span> full_backward_hooks, non_full_backward_hooks <span style="color:rgb(98,98,98)">=</span> [], []

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\models\t5\modeling_t5.py:1106</span>, in <span class="ansi-cyan-fg">T5Stack.forward</span><span class="ansi-blue-fg ansi-bold">(self, input_ids, attention_mask, encoder_hidden_states, encoder_attention_mask, inputs_embeds, head_mask, cross_attn_head_mask, past_key_values, use_cache, output_attentions, output_hidden_states, return_dict)</span>
<span class="ansi-green-fg">   1091</span>     layer_outputs <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_gradient_checkpointing_func(
<span class="ansi-green-fg">   1092</span>         layer_module<span style="color:rgb(98,98,98)">.</span>forward,
<span class="ansi-green-fg">   1093</span>         hidden_states,
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   1103</span>         output_attentions,
<span class="ansi-green-fg">   1104</span>     )
<span class="ansi-green-fg">   1105</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">-&gt; 1106</span>     layer_outputs <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">layer_module</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">   1107</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">hidden_states</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1108</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">attention_mask</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">extended_attention_mask</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1109</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">position_bias</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">position_bias</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1110</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">encoder_hidden_states</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">encoder_hidden_states</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1111</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">encoder_attention_mask</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">encoder_extended_attention_mask</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1112</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">encoder_decoder_position_bias</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">encoder_decoder_position_bias</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1113</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">layer_head_mask</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">layer_head_mask</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1114</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">cross_attn_layer_head_mask</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">cross_attn_layer_head_mask</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1115</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">past_key_value</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">past_key_value</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1116</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">use_cache</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">use_cache</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1117</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">output_attentions</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">output_attentions</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1118</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   1120</span> <span style="font-style:italic;color:rgb(95,135,135)"># layer_outputs is a tuple with:</span>
<span class="ansi-green-fg">   1121</span> <span style="font-style:italic;color:rgb(95,135,135)"># hidden-states, key-value-states, (self-attention position bias), (self-attention weights), (cross-attention position bias), (cross-attention weights)</span>
<span class="ansi-green-fg">   1122</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> use_cache <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">False</span>:

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\nn\modules\module.py:1194</span>, in <span class="ansi-cyan-fg">Module._call_impl</span><span class="ansi-blue-fg ansi-bold">(self, *input, **kwargs)</span>
<span class="ansi-green-fg">   1190</span> <span style="font-style:italic;color:rgb(95,135,135)"># If we don't have any hooks, we want to skip the rest of the logic in</span>
<span class="ansi-green-fg">   1191</span> <span style="font-style:italic;color:rgb(95,135,135)"># this function, and just call forward.</span>
<span class="ansi-green-fg">   1192</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> (<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_backward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_pre_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_backward_hooks
<span class="ansi-green-fg">   1193</span>         <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_pre_hooks):
<span class="ansi-green-fg ansi-bold">-&gt; 1194</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> forward_call(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(0,135,0)">input</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">   1195</span> <span style="font-style:italic;color:rgb(95,135,135)"># Do not call functions when jit is used</span>
<span class="ansi-green-fg">   1196</span> full_backward_hooks, non_full_backward_hooks <span style="color:rgb(98,98,98)">=</span> [], []

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\models\t5\modeling_t5.py:746</span>, in <span class="ansi-cyan-fg">T5Block.forward</span><span class="ansi-blue-fg ansi-bold">(self, hidden_states, attention_mask, position_bias, encoder_hidden_states, encoder_attention_mask, encoder_decoder_position_bias, layer_head_mask, cross_attn_layer_head_mask, past_key_value, use_cache, output_attentions, return_dict)</span>
<span class="ansi-green-fg">    743</span>     attention_outputs <span style="color:rgb(98,98,98)">=</span> attention_outputs <span style="color:rgb(98,98,98)">+</span> cross_attention_outputs[<span style="color:rgb(98,98,98)">2</span>:]
<span class="ansi-green-fg">    745</span> <span style="font-style:italic;color:rgb(95,135,135)"># Apply Feed Forward layer</span>
<span class="ansi-green-fg ansi-bold">--&gt; 746</span> hidden_states <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">layer</span><span class="ansi-yellow-bg">[</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">-</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">1</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">hidden_states</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    748</span> <span style="font-style:italic;color:rgb(95,135,135)"># clamp inf values to enable fp16 training</span>
<span class="ansi-green-fg">    749</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> hidden_states<span style="color:rgb(98,98,98)">.</span>dtype <span style="color:rgb(98,98,98)">==</span> torch<span style="color:rgb(98,98,98)">.</span>float16:

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\nn\modules\module.py:1194</span>, in <span class="ansi-cyan-fg">Module._call_impl</span><span class="ansi-blue-fg ansi-bold">(self, *input, **kwargs)</span>
<span class="ansi-green-fg">   1190</span> <span style="font-style:italic;color:rgb(95,135,135)"># If we don't have any hooks, we want to skip the rest of the logic in</span>
<span class="ansi-green-fg">   1191</span> <span style="font-style:italic;color:rgb(95,135,135)"># this function, and just call forward.</span>
<span class="ansi-green-fg">   1192</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> (<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_backward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_pre_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_backward_hooks
<span class="ansi-green-fg">   1193</span>         <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_pre_hooks):
<span class="ansi-green-fg ansi-bold">-&gt; 1194</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> forward_call(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(0,135,0)">input</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">   1195</span> <span style="font-style:italic;color:rgb(95,135,135)"># Do not call functions when jit is used</span>
<span class="ansi-green-fg">   1196</span> full_backward_hooks, non_full_backward_hooks <span style="color:rgb(98,98,98)">=</span> [], []

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\models\t5\modeling_t5.py:335</span>, in <span class="ansi-cyan-fg">T5LayerFF.forward</span><span class="ansi-blue-fg ansi-bold">(self, hidden_states)</span>
<span class="ansi-green-fg">    333</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">forward</span>(<span style="color:rgb(0,135,0)">self</span>, hidden_states):
<span class="ansi-green-fg">    334</span>     forwarded_states <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>layer_norm(hidden_states)
<span class="ansi-green-fg ansi-bold">--&gt; 335</span>     forwarded_states <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">DenseReluDense</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">forwarded_states</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    336</span>     hidden_states <span style="color:rgb(98,98,98)">=</span> hidden_states <span style="color:rgb(98,98,98)">+</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>dropout(forwarded_states)
<span class="ansi-green-fg">    337</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> hidden_states

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\nn\modules\module.py:1194</span>, in <span class="ansi-cyan-fg">Module._call_impl</span><span class="ansi-blue-fg ansi-bold">(self, *input, **kwargs)</span>
<span class="ansi-green-fg">   1190</span> <span style="font-style:italic;color:rgb(95,135,135)"># If we don't have any hooks, we want to skip the rest of the logic in</span>
<span class="ansi-green-fg">   1191</span> <span style="font-style:italic;color:rgb(95,135,135)"># this function, and just call forward.</span>
<span class="ansi-green-fg">   1192</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> (<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_backward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_pre_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_backward_hooks
<span class="ansi-green-fg">   1193</span>         <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_pre_hooks):
<span class="ansi-green-fg ansi-bold">-&gt; 1194</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> forward_call(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(0,135,0)">input</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">   1195</span> <span style="font-style:italic;color:rgb(95,135,135)"># Do not call functions when jit is used</span>
<span class="ansi-green-fg">   1196</span> full_backward_hooks, non_full_backward_hooks <span style="color:rgb(98,98,98)">=</span> [], []

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\transformers\models\t5\modeling_t5.py:289</span>, in <span class="ansi-cyan-fg">T5DenseActDense.forward</span><span class="ansi-blue-fg ansi-bold">(self, hidden_states)</span>
<span class="ansi-green-fg">    283</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> (
<span class="ansi-green-fg">    284</span>     <span style="color:rgb(0,135,0)">isinstance</span>(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>wo<span style="color:rgb(98,98,98)">.</span>weight, torch<span style="color:rgb(98,98,98)">.</span>Tensor)
<span class="ansi-green-fg">    285</span>     <span style="font-weight:bold;color:rgb(175,0,255)">and</span> hidden_states<span style="color:rgb(98,98,98)">.</span>dtype <span style="color:rgb(98,98,98)">!=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>wo<span style="color:rgb(98,98,98)">.</span>weight<span style="color:rgb(98,98,98)">.</span>dtype
<span class="ansi-green-fg">    286</span>     <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>wo<span style="color:rgb(98,98,98)">.</span>weight<span style="color:rgb(98,98,98)">.</span>dtype <span style="color:rgb(98,98,98)">!=</span> torch<span style="color:rgb(98,98,98)">.</span>int8
<span class="ansi-green-fg">    287</span> ):
<span class="ansi-green-fg">    288</span>     hidden_states <span style="color:rgb(98,98,98)">=</span> hidden_states<span style="color:rgb(98,98,98)">.</span>to(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>wo<span style="color:rgb(98,98,98)">.</span>weight<span style="color:rgb(98,98,98)">.</span>dtype)
<span class="ansi-green-fg ansi-bold">--&gt; 289</span> hidden_states <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">wo</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">hidden_states</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    290</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> hidden_states

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\nn\modules\module.py:1194</span>, in <span class="ansi-cyan-fg">Module._call_impl</span><span class="ansi-blue-fg ansi-bold">(self, *input, **kwargs)</span>
<span class="ansi-green-fg">   1190</span> <span style="font-style:italic;color:rgb(95,135,135)"># If we don't have any hooks, we want to skip the rest of the logic in</span>
<span class="ansi-green-fg">   1191</span> <span style="font-style:italic;color:rgb(95,135,135)"># this function, and just call forward.</span>
<span class="ansi-green-fg">   1192</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> (<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_backward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_forward_pre_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_backward_hooks
<span class="ansi-green-fg">   1193</span>         <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_hooks <span style="font-weight:bold;color:rgb(175,0,255)">or</span> _global_forward_pre_hooks):
<span class="ansi-green-fg ansi-bold">-&gt; 1194</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> forward_call(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(0,135,0)">input</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)
<span class="ansi-green-fg">   1195</span> <span style="font-style:italic;color:rgb(95,135,135)"># Do not call functions when jit is used</span>
<span class="ansi-green-fg">   1196</span> full_backward_hooks, non_full_backward_hooks <span style="color:rgb(98,98,98)">=</span> [], []

File <span class="ansi-green-fg ansi-bold">c:\Users\hyunj\Documents\Development\Python\trouver_py310_venv\lib\site-packages\torch\nn\modules\linear.py:114</span>, in <span class="ansi-cyan-fg">Linear.forward</span><span class="ansi-blue-fg ansi-bold">(self, input)</span>
<span class="ansi-green-fg">    113</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">forward</span>(<span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(0,135,0)">input</span>: Tensor) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> Tensor:
<span class="ansi-green-fg ansi-bold">--&gt; 114</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">F</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">linear</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">input</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">weight</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">bias</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-red-fg ansi-bold">KeyboardInterrupt</span>: </pre>
</div>
</div>
</div>
<p>After running the above code, the predicted names for the definitions and notations should be contained in the <code>definiiton</code> and <code>notation</code> attributes of the HTML tags. If a <code>notation</code> attribute’s value remains blank <code>""</code>, then this effectively means that predicted name for the notation is the entire LaTeX math mode string that the HTML tags encompasses (<a href="#locating-definitions-and-notations-introduced-in-standard-information-notes">recall that</a> notation HTML tags only surround LaTeX math mode strings)</p>
</section>
<section id="creating-notation-notes-for-the-notations-introduced-in-standard-information-notes" class="level4">
<h4 class="anchored" data-anchor-id="creating-notation-notes-for-the-notations-introduced-in-standard-information-notes">Creating notation notes for the notations introduced in standard information notes</h4>
<p>Once the notations <a href="#locating-definitions-and-notations-introduced-in-standard-information-notes">have been marked with HTML tags</a> and the <a href="#naming-marked-definitions-and-notations">notations have been named</a>, we use the <code>make_notation_notes_from_HTML_tags</code> function to create new notes dedicated to each notation and to link these newly created notes</p>
<p>This part does not depend on any ML models. Run the following code:</p>
<div id="cell-64" class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>index_note <span class="op">=</span> VaultNote(vault, name<span class="op">=</span><span class="ss">f'_index_</span><span class="sc">{</span>reference<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> notes_linked_in_notes_linked_in_note(index_note, as_dict<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>        new_notes <span class="op">=</span> make_notation_notes_from_HTML_tags(note, vault, reference_name<span class="op">=</span>reference)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(note.name)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span>(e)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># assert len(new_notes) == 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following is a comparison of the note before and after the above code is executed:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_46_note_before_notation_notes_created.png" alt="The standard notation note before the notation notes are created" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_47_note_after_notation_notes_created.png" alt="A note after notations are identified" width="400" class="center">
</p>
<p>If some extraneously notation notes are created due to incorrectly marked HTML tags, you may remove/edit the HTML tags, delete tha notation note, and delete the link to the notation note.</p>
<p>Moreover, even if some HTML tags had not been marked to indicate a notation introduced in a standard information note, running the above code again will safely create the notation note after the double asterisks are correctly added. <code>make_notation_notes_from_HTML_tags</code> attempts to create new notation notes without creating duplication notation notes.</p>
<p>TODO: change the below to reflect recent version.</p>
<p>For example, the <code>def_notat_classifier</code> seems to have deemed the LaTeX strings <code>$e(\pi, q)$</code> and <code>$e(\pi,q)$</code> to introduce notations, and marked these latex strings with double asterisks <code>**</code>. The <code>make_notation_notes_from_double_asts</code> function above then created notation notes corresponding to these LaTeX strings. However, the author of <code>trouver</code> does not consider these strings to have actually introduced the notations (because the standard information note containing these strings does <strong>NOT</strong> define what these notations mean). Let us remove the double asterisks, delete the corresponding notation notes, and delete the links to these notation notes:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_48_note_after_correcting_some_notations.png" alt="A note after notations are identified" width="400" class="center">
</p>
</section>
<section id="summarizing-what-the-notations-denote-and-recording-the-summaries-in-the-notation-notes" class="level4">
<h4 class="anchored" data-anchor-id="summarizing-what-the-notations-denote-and-recording-the-summaries-in-the-notation-notes">Summarizing what the notations denote and recording the summaries in the notation notes</h4>
<p>Finally, we pass the <code>summarizer</code> pipeline to the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.machine_learning.notation_summarization.html#append_summary_to_notation_note"><code>append_summary_to_notation_note</code></a> function to summarize what the notations denote and record these summaries in the notation notes:</p>
<p>Depending on the length and number of notes, this may take at least several or dozens of minutes.</p>
<div id="cell-68" class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>index_note <span class="op">=</span> VaultNote(vault, name<span class="op">=</span><span class="ss">f'_index_</span><span class="sc">{</span>reference<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> notes_linked_in_notes_linked_in_note(index_note, as_dict<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> note.exists():</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"note does not exist: </span><span class="sc">{</span>note<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>()</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Summarizing notations"</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> note <span class="kw">in</span> notes:</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    notation_notes_linked_in_note <span class="op">=</span> notation_notes_linked_in_see_also_section(note, vault)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> notation_note <span class="kw">in</span> notation_notes_linked_in_note:</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>        append_summary_to_notation_note(notation_note, vault, summarizer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Token indices sequence length is longer than the specified maximum sequence length for this model (2259 &gt; 512). Running this sequence through the model will result in indexing errors</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Summarizing notations</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Your max_length is set to 200, but your input_length is only 184. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=92)
Your max_length is set to 200, but your input_length is only 178. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=89)
Your max_length is set to 200, but your input_length is only 163. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=81)
Your max_length is set to 200, but your input_length is only 164. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=82)
Your max_length is set to 200, but your input_length is only 164. Since this is a summarization task, where outputs shorter than the input are typically wanted, you might consider decreasing max_length manually, e.g. summarizer('...', max_length=82)</code></pre>
</div>
</div>
<p>The following is a comparison of the notation note before and after the <a href="https://hyunjongkimmath.github.io/trouver/markdown.obsidian.personal.machine_learning.notation_summarization.html#append_summary_to_notation_note"><code>append_summary_to_notation_note</code></a> function is applied to the notation note:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_49_notation_note_before_summary.png" alt="The notation note before the summarization happens" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_50_notation_note_after_summary.png" alt="The notation note after the summarization happens" width="400" class="center">
</p>
<p>Note that the <code>_auto/notation_summary</code> tag is added to the notation note’s YAML frontmatter meta data to indicate that the <code>summarizer</code> pipeline generated the summary.</p>
<p>We highly recommend manually editing the notation note as follows:</p>
<ul>
<li>Correct the notation LaTeX string if necessary (in this example, the notation is the string <code>$F_q(X,Y)$</code> before the link <code>[[kimpark_ga1dcmmc_29|denotes]]</code> and it looks like there is nothing to correct. However, corrections might be necessary more generally, e.g.&nbsp;)</li>
<li>Rename the notation notes to be more searchable. Recall that Obsidian’s <code>Quick switcher</code> provides suggestions for notes to open based on note/file names.</li>
<li>Correct the autogenerated summary and remove the <code>_auto/notation_summary</code> tag.</li>
</ul>
<blockquote class="blockquote">
<p><strong>Warning</strong> The model is currently not robust enough to generate reliable summaries in general. The model especially struggles with generating LaTeX strings.</p>
</blockquote>
<pre><code>For example, this is what the notation note for the string `$F_q(X,Y)$` looks just after the autogenerated summary has been added:</code></pre>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_54_notation_note_before_summary_fixed.png" alt="The notation note after the summarization happens in viewing mode" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_55_notation_note_before_summary_fixed_in_editing_mode.png" alt="The notation note after the summarization happens in editing mode" width="400" class="center">
</p>
<p>Let us fix the summary, remove the <code>_auto/notation_summary</code> tag (to indicate that the summary in the notation note is no longer autogenerated), and rename the note as follows:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_56_fix_notation_note_summary.png" alt="Reading view for notation note summary fixed" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_57_fix_notation_note_summary_edit_view.png" alt="Edit view for notation note summary fixed" width="400" class="center">
</p>
<ul>
<li>If the “notation note” does not correspond to a LaTeX string in a standard information note, then delete the “notation note”.</li>
</ul>
</section>
</section>
<section id="applications-of-the-notation-notes" class="level2">
<h2 class="anchored" data-anchor-id="applications-of-the-notation-notes">Applications of the notation notes</h2>
<p>We also recommend using notation notes in the following ways:</p>
<section id="embed-notation-notes-in-footnotes" class="level4">
<h4 class="anchored" data-anchor-id="embed-notation-notes-in-footnotes">Embed notation notes in footnotes</h4>
<p>It can be useful to (manually) <a href="https://help.obsidian.md/Linking+notes+and+files/Embedding+files">embed</a> notation notes in standard notation notes in <a href="https://help.obsidian.md/How+to/Format+your+notes#Footnotes">footnotes</a>. For example, the following is a (standard information) note presenting a lemma about <span class="math inline">\(F_q(X,Y)\)</span>:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_51_lemma_with_notation.png" alt="A note with a lemma using the notation $F_q(X,Y)$" width="400" class="center">
</p>
<p>Let us add a footnote with the notation note for the notation <span class="math inline">\(F_q(X,Y)\)</span> embedded:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_51_lemma_with_notation.png" alt="A note with a lemma using the notation $F_q(X,Y)$" width="400" class="center">
</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_52_footnote_embedding_notation_note_added_to_lemma_note.png" alt="Adding a footnote that embeds the notation note for $F_q(X,Y)$" width="400" class="center">
</p>
<p>Let us now view the standard information note in Viewing mode:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_53_viewing_mode_footnote_embedding_notation_note_added_to_lemma_note.png" alt="A note viewed in Viewing mode with a footnote that embeds the notation note for $F_q(X,Y)$" width="400" class="center">
</p>
<p>The following is what the bottom of the note looks like. Note that the notation note has been embedded:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_58_viewing_mode_footnote_embedding_notation_note_added_to_lemma_note_bottom.png" alt="A note viewed in Viewing mode with a footnote that embeds the notation note for $F_q(X,Y)$" width="400" class="center">
</p>
<p>In particular, the footnote indicates to the reader/user that the LaTeX string <code>$F_q(s_0,s_1)$</code> depends upon the notation <span class="math inline">\(F_q(X,Y)\)</span>, which denotes the monic minimal polynomial of the closed point <span class="math inline">\(q \in \mathbb{P}^1_k\)</span>. Such footnotes can be useful for users who need to remind themselves of mathematical facts, but have difficulties recalling the precise denotations of various notations.</p>
</section>
<section id="link-notation-notes-in-other-notation-notes." class="level4">
<h4 class="anchored" data-anchor-id="link-notation-notes-in-other-notation-notes.">Link notation notes in other notation notes.</h4>
<p>While we do not recommend embedding notation notes into other notation notes (because such efforts might result in multi-level embeddings of notation notes or even circular embeddings of notation notes), we still recommend linking notation notes in other notation notes.</p>
<p>For example, we can write the following notation note:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="an">detect_regex:</span><span class="co"> []</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="an">latex_in_original:</span><span class="co"> ["e(\\pi,q)"]</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="an">tags:</span><span class="co"> []</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>$e(\pi,q)$ [<span class="co">[</span><span class="ot">kim_park_ga1dcmmc_Definition 3.2|denotes</span><span class="co">]</span>] the Euler number $e(\pi^* \mathscr{O}_{\mathbb{P}^1_k}(\deg F_q), F_q(s_0,s_1))$ where $q \in \mathbb{P}^1_k$ is a closed point and $\pi: C \to \mathbb{P}^1_k$ is a finite morphism over a field $k$ whose characteristic is not $2$ where $C$ is a smooth projective curve, assuming that $\pi^*(\mathscr{O}_{\mathbb{P}^1_k}(\deg F_q))$ is a relatively orientable line bundle of $C$.</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">$e(V,f)$</span><span class="co">](kim_park_ga1dcmmc_notation_e_V_f_euler_number_of_global_section_of_relatively_orientable_vector_bundle)</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">$F_q(X,Y)$</span><span class="co">](kim_park_ga1dcmmc_notation_F_q_X_Y_monic_minimal_polynomial_of_closed_point_in_P_1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that <a href="https://help.obsidian.md/How+to/Format+your+notes#External+links">External links/Markdownstyle links</a> are used to link to the other notation notes as opposed to <a href="https://help.obsidian.md/How+to/Format+your+notes#Internal+linking">Internal links/Wikilink-styled links</a>. We use external links/Markdownstyle links here because Obsidian internal links/Wikilink-styled links do not render LaTeX strings.</p>
<p>This note displays as</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_59_reading_view_notation_note_with_links_to_notation_notes.png" alt="Reading view for a notation note with links to other notation notes" width="400" class="center">
</p>
<p>Note that one can hover the cursor above links in Obsidian to show a preview of the linked note:</p>
<p style="text-align:center;">
<img src="./images/tutorial_walkthrough_60_cursor_hover_over_link_to_preview_note.png" alt="Hovering the cursor above a link shows a preview of the linked note" width="400" class="center">
</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hyunjongkimmath\.github\.io\/trouver");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hyunjongkimmath/trouver/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>